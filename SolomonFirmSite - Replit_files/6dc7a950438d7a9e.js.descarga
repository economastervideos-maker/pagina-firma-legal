;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="a18c91ea-11ad-83c0-f8bc-1f79351dd5e4")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,152659,(e,t,r)=>{var n=e.r(954546),i=e.r(365738);!function(){"use strict";var e={864:function(e){var t,r=("undefined"==typeof Reflect?"undefined":i._(Reflect))==="object"?Reflect:null,o=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise(function(r,n){var i,o,a;function s(r){e.removeListener(t,f),n(r)}function f(){"function"==typeof e.removeListener&&e.removeListener("error",s),r([].slice.call(arguments))}p(e,t,f,{once:!0}),"error"!==t&&(i=e,o=s,a={once:!0},"function"==typeof i.on&&p(i,"error",o,a))})},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var f=10;function u(e){if("function"!=typeof e)throw TypeError('The "listener" argument must be of type Function. Received type '+(void 0===e?"undefined":i._(e)))}function c(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function l(e,t,r,n){if(u(r),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),a=o[t]),void 0===a)a=o[t]=r,++e._eventsCount;else if("function"==typeof a?a=o[t]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),(i=c(e))>0&&a.length>i&&!a.warned){a.warned=!0;var i,o,a,s=Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=a.length,console&&console.warn&&console.warn(s)}return e}function h(){if(!this.fired)return(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length)?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=h.bind(n);return i.listener=r,n.wrapFn=i,i}function v(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):g(i,i.length)}function m(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function g(e,t){for(var r=Array(t),n=0;n<t;++n)r[n]=e[n];return r}function p(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else if("function"==typeof e.addEventListener)e.addEventListener(t,function i(o){n.once&&e.removeEventListener(t,i),r(o)});else throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+(void 0===e?"undefined":i._(e)))}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return f},set:function(e){if("number"!=typeof e||e<0||a(e))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");f=e}}),s.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||a(e))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,a=this._events;if(void 0!==a)i=i&&void 0===a.error;else if(!i)return!1;if(i){if(t.length>0&&(s=t[0]),n._(s,Error))throw s;var s,f=Error("Unhandled error."+(s?" ("+s.message+")":""));throw f.context=s,f}var u=a[e];if(void 0===u)return!1;if("function"==typeof u)o(u,this,t);else for(var c=u.length,l=g(u,c),r=0;r<c;++r)o(l[r],this,t);return!0},s.prototype.addListener=function(e,t){return l(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return l(this,e,t,!0)},s.prototype.once=function(e,t){return u(t),this.on(e,d(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,d(this,e,t)),this},s.prototype.removeListener=function(e,t){var r,n,i,o,a;if(u(t),void 0===(n=this._events)||void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){a=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,a||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0==arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},s.prototype.listeners=function(e){return v(this,e,!0)},s.prototype.rawListeners=function(e){return v(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},s.prototype.listenerCount=m,s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}}},r={};function o(t){var n=r[t];if(void 0!==n)return n.exports;var i=r[t]={exports:{}},a=!0;try{e[t](i,i.exports,o),a=!1}finally{a&&delete r[t]}return i.exports}o.ab="/ROOT/node_modules/.pnpm/next@16.0.1_@babel+core@7.21.4_@opentelemetry+api@1.9.0_babel-plugin-macros@3.1.0_react_93265113966a84f0dd9a21e4850bafa0/node_modules/next/dist/compiled/events/",t.exports=o(864)}()},644920,968263,e=>{"use strict";var t=e.i(346715);function r(){var e,t,r={promise:new Promise(function(r,n){e=r,t=n}),resolve:function(t){r.isFulfilled=!0,e(t)},reject:function(e){r.isFulfilled=!0,t(e)},isFulfilled:!1};return r}function n(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{wait:0},i=null,o=null,a=null,s=null;if(n.wait<0)throw Error("wait must be 0 or more");if(n.maxWait){if(n.maxWait<0)throw Error("maxWait must be 0 or more");if(n.maxWait<n.wait)throw Error("maxWait must be higher than wait")}function f(){o&&clearTimeout(o),o=null,s=null,i=null,a=null}function u(){if(!i||!o)throw Error("Expected to call debounced function once before flushing");var r=i,n=s;return f(),e.apply(void 0,(0,t._)(n)).then(function(e){return r.resolve(e),e}).catch(function(e){throw r.reject(e),e})}return Object.assign(function(){for(var e=arguments.length,t=Array(e),f=0;f<e;f++)t[f]=arguments[f];if(i){if(!o)throw Error("Did not expect to have deferred and no timeout");clearTimeout(o)}else i=r(),a=Date.now();return s=t,o=setTimeout(function(){u()},function(){if(!n.maxWait)return n.wait;if(!a)throw Error("Expected scheduledAt to be a set when getting wait");var e=Date.now()-a;return Math.min(n.maxWait-e,n.wait)}()),i.promise},{isScheduled:function(){return!!(i&&o)},cancel:function(){if(!o||!i)throw Error("Expected to call debounced function once before cancelling");var e=i;f(),e.reject(Error("Debounced function cancelled"))},flush:u})}e.s(["default",()=>r],968263),e.s(["default",()=>n],644920)},995683,e=>{"use strict";var t=e.i(937500),r=e.i(904851),n=e.i(90659),i=e.i(721281),o=e.i(167626),a=e.i(119468),s=function(){function e(n,s){if((0,r._)(this,e),(0,i._)(this,"asEncoding",{}),(0,i._)(this,"asBuffer",null),s&&"string"==typeof n)this.asEncoding[s]=n;else if(null==n)this.asBuffer=t.Buffer.alloc(0);else if((0,o._)(n,t.Buffer))this.asBuffer=n;else if("string"==typeof n)this.asEncoding.utf8=n;else if((0,o._)(n,ArrayBuffer))this.asBuffer=t.Buffer.from(n);else{if((0,o._)(n,e))return n;(0,o._)(n,Uint8Array)?this.asBuffer=t.Buffer.from(n):(void 0===n?"undefined":(0,a._)(n))==="object"&&"object"===(0,a._)(n.asEncoding)&&null!==n.asEncoding&&((0,o._)(n.asBuffer,t.Buffer)||null===n.asBuffer)&&(this.asBuffer=n.asBuffer||null,"string"==typeof n.asEncoding.base64&&(this.asEncoding={base64:n.asEncoding.base64}),"string"==typeof n.asEncoding.utf8&&(this.asEncoding={utf8:n.asEncoding.utf8}))}}return(0,n._)(e,[{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"utf8";if(void 0!==this.asEncoding[e])return this.asEncoding[e];var t=this.toBuffer().toString(e);return this.asEncoding[e]=t,t}},{key:"toJSON",value:function(){return{asEncoding:{base64:this.toString("base64")},asBuffer:null}}},{key:"length",get:function(){return void 0!==this.asEncoding.utf8?this.asEncoding.utf8.length:this.toBuffer().length}},{key:"toBuffer",value:function(){if(this.asBuffer)return this.asBuffer;for(var e in this.asEncoding){var r=this.asEncoding[e];if("string"==typeof r){var n=t.Buffer.from(r,e);return this.asBuffer=n,n}}return this.asBuffer=t.Buffer.alloc(0),this.asBuffer}}],[{key:"from",value:function(t,r){return new e(t,r)}},{key:"isBuffer",value:function(t){return(0,o._)(t,e)}}]),e}();e.s(["default",()=>s])},328751,676480,e=>{"use strict";var t,r=e.i(399119),n=e.i(904851),i=e.i(90659),o=e.i(445789),a=e.i(167626),s=e.i(530658),f=e.i(346715),u=e.i(179302),c=e.i(753950),l=e.i(66796),h=(e.i(486701),e.i(433772),function(){function e(t,r,i,o){(0,n._)(this,e),this.fromA=t,this.toA=r,this.fromB=i,this.toB=o}return(0,i._)(e,[{key:"offset",value:function(t,r){return new e(this.fromA+t,this.toA+t,this.fromB+r,this.toB+r)}}]),e}());function d(e,t,r,n,i,o){if(e==n)return[];var a=y(e,t,r,n,i,o),f=A(e,t+a,r,n,i+a,o);t+=a,r-=f,i+=a;var u=r-t,c=(o-=f)-i;if(!u||!c)return[new h(t,r,i,o)];if(u>c){var l=e.slice(t,r).indexOf(n.slice(i,o));if(l>-1)return[new h(t,t+l,i,i),new h(t+l+c,r,o,o)]}else if(c>u){var m=n.slice(i,o).indexOf(e.slice(t,r));if(m>-1)return[new h(t,t,i,i+m),new h(r,r,i+m+u,o)]}if(1==u||1==c)return[new h(t,r,i,o)];var b=function e(t,r,n,i,o,a){var s=n-r,f=a-o;if(s<f){var u=e(i,o,a,t,r,n);return u&&[u[1],u[0],u[2]]}return s<4||2*f<s?null:w(t,r,n,i,o,a,Math.floor(s/4),-1)}(e,t,r,n,i,o);if(b){var k=(0,s._)(b,3),x=k[0],C=k[1],_=k[2];return d(e,t,x,n,i,C).concat(d(e,x+_,r,n,C+_,o))}return function(e,t,r,n,i,o){var a=r-t,s=o-i;if(v<1e9&&Math.min(a,s)>16*v)return Math.min(a,s)>64*v?[new h(t,r,i,o)]:B(e,t,r,n,i,o);var f=Math.ceil((a+s)/2);g.reset(f),p.reset(f);for(var u=function(r,o){return e.charCodeAt(t+r)==n.charCodeAt(i+o)},c=function(t,i){return e.charCodeAt(r-t-1)==n.charCodeAt(o-i-1)},l=(a-s)%2!=0?p:null,m=l?null:g,b=0;b<f;b++){if(b>v)return B(e,t,r,n,i,o);var y=g.advance(b,a,s,f,l,!1,u)||p.advance(b,a,s,f,m,!0,c);if(y)return function(e,t,r,n,i,o,a,s){var f=!1;return(D(e,n)||++n!=r||(f=!0),D(i,s)||++s!=a||(f=!0),f)?[new h(t,r,o,a)]:d(e,t,n,i,o,s).concat(d(e,n,r,i,s,a))}(e,t,r,t+y[0],n,i,o,i+y[1])}return[new h(t,r,i,o)]}(e,t,r,n,i,o)}var v=1e9,m=function(){function e(){(0,n._)(this,e),this.vec=[]}return(0,i._)(e,[{key:"reset",value:function(e){this.len=e<<1;for(var t=0;t<this.len;t++)this.vec[t]=-1;this.vec[e+1]=0,this.start=this.end=0}},{key:"advance",value:function(e,t,r,n,i,o,a){for(var s=-e+this.start;s<=e-this.end;s+=2){for(var f=n+s,u=s==-e||s!=e&&this.vec[f-1]<this.vec[f+1]?this.vec[f+1]:this.vec[f-1]+1,c=u-s;u<t&&c<r&&a(u,c);)u++,c++;if(this.vec[f]=u,u>t)this.end+=2;else if(c>r)this.start+=2;else if(i){var l=n+(t-r)-s;if(l>=0&&l<this.len&&-1!=i.vec[l]){if(o){var h=i.vec[l];if(h>=t-u)return[h,n+h-l]}else if(u>=t-i.vec[l])return[u,c]}}}return null}}]),e}(),g=new m,p=new m;function b(e,t){for(var r=1,n=Math.min(e,t);r<n;)r<<=1;return r}function y(e,t,r,n,i,o){if(t==r||t==o||e.charCodeAt(t)!=n.charCodeAt(i))return 0;for(var a=b(r-t,o-i),s=t,f=i;;){var u=s+a,c=f+a;if(u>r||c>o||e.slice(s,u)!=n.slice(f,c)){if(1==a)return s-t-!D(e,s);a>>=1}else{if(u==r||c==o)return u-t;s=u,f=c}}}function A(e,t,r,n,i,o){if(t==r||i==o||e.charCodeAt(r-1)!=n.charCodeAt(o-1))return 0;for(var a=b(r-t,o-i),s=r,f=o;;){var u=s-a,c=f-a;if(u<t||c<i||e.slice(u,s)!=n.slice(c,f)){if(1==a)return r-s-!D(e,s);a>>=1}else{if(u==t||c==i)return r-u;s=u,f=c}}}function w(e,t,r,n,i,o,a,s){for(var f=n.slice(i,o),u=null;;){if(u||a<s)return u;for(var c=t+a;;){!D(e,c)&&c++;var l=c+a;if(D(e,l)||(l+=l==c+1?1:-1),l>=r)break;for(var h=e.slice(c,l),d=-1;-1!=(d=f.indexOf(h,d+1));){var v=y(e,l,r,n,i+d+h.length,o),m=A(e,t,c,n,i,i+d),g=h.length+v+m;(!u||u[2]<g)&&(u=[c-m,i+d-m,g])}c=l}if(s<0)return u;a>>=1}}function B(e,t,r,n,i,o){var a,f=r-t,u=o-i;if(f<u){var c=w(n,i,o,e,t,r,Math.floor(f/6),50);a=c&&[c[1],c[0],c[2]]}else a=w(e,t,r,n,i,o,Math.floor(u/6),50);if(!a)return[new h(t,r,i,o)];var l=(0,s._)(a,3),v=l[0],m=l[1],g=l[2];return d(e,t,v,n,i,m).concat(d(e,v+g,r,n,m+g,o))}function k(e,t){for(var r=1;r<e.length;r++){var n=e[r-1],i=e[r];n.toA>i.fromA-t&&n.toB>i.fromB-t&&(e[r-1]=new h(n.fromA,i.toA,n.fromB,i.toB),e.splice(r--,1))}}try{t=RegExp("[\\p{Alphabetic}\\p{Number}]","u")}catch(e){}function x(e){return e>48&&e<58||e>64&&e<91||e>96&&e<123}function C(e,r){if(r==e.length)return 0;var n=e.charCodeAt(r);return n<192?+!!x(n):t?L(n)&&r!=e.length-1?2*!!t.test(e.slice(r,r+2)):+!!t.test(String.fromCharCode(n)):0}function _(e,r){if(!r)return 0;var n=e.charCodeAt(r-1);return n<192?+!!x(n):t?O(n)&&1!=r?2*!!t.test(e.slice(r-2,r)):+!!t.test(String.fromCharCode(n)):0}function E(e,t,r){if(t==e.length||!_(e,t))return t;for(var n=t,i=t+r;;){var o=C(e,n);if(!o)return n;if((n+=o)>i)return t}}function M(e,t,r){if(!t||!C(e,t))return t;for(var n=t,i=t-r;;){var o=_(e,n);if(!o)return n;if((n-=o)<i)return t}}var L=function(e){return e>=55296&&e<=56319},O=function(e){return e>=56320&&e<=57343};function D(e,t){return!t||t==e.length||!L(e.charCodeAt(t-1))||!O(e.charCodeAt(t))}function S(e,t,r){var n;return v=(null!=(n=null==r?void 0:r.scanLimit)?n:1e9)>>1,function(e,t,r){for(;;){k(r,1);for(var n=!1,i=0;i<r.length;i++){var o=r[i],a=void 0,s=void 0;(a=y(e,o.fromA,o.toA,t,o.fromB,o.toB))&&(o=r[i]=new h(o.fromA+a,o.toA,o.fromB+a,o.toB)),(s=A(e,o.fromA,o.toA,t,o.fromB,o.toB))&&(o=r[i]=new h(o.fromA,o.toA-s,o.fromB,o.toB-s));var f=o.toA-o.fromA,u=o.toB-o.fromB;if(!f||!u){var c=o.fromA-(i?r[i-1].toA:0),l=(i<r.length-1?r[i+1].fromA:e.length)-o.toA;if(c&&l){var d=f?e.slice(o.fromA,o.toA):t.slice(o.fromB,o.toB);c<=d.length&&e.slice(o.fromA-c,o.fromA)==d.slice(d.length-c)?(r[i]=new h(o.fromA-c,o.toA-c,o.fromB-c,o.toB-c),n=!0):l<=d.length&&e.slice(o.toA,o.toA+l)==d.slice(0,l)&&(r[i]=new h(o.fromA+l,o.toA+l,o.fromB+l,o.toB+l),n=!0)}}}if(!n)break}return r}(e,t,d(e,0,e.length,t,0,t.length))}function R(e,t,r){return function(e,t,r){for(var n=0,i=0;i<e.length;i++){var o=e[i],a=o.toA-o.fromA,f=o.toB-o.fromB;if(a&&f||a>3||f>3){var u=i==e.length-1?t.length:e[i+1].fromA,c=o.fromA-n,l=u-o.toA,d=M(t,o.fromA,Math.min(c,5)),v=E(t,o.toA,Math.min(l,5)),m=o.fromA-d,g=v-o.toA;if(!a||!f){var p=Math.max(a,f),b=(0,s._)(a?[t,o.fromA,o.toA]:[r,o.fromB,o.toB],3),y=b[0],A=b[1],w=b[2],B=void 0,x=void 0;m&&g?(p>m&&t.slice(d,o.fromA)==y.slice(w-m,w)?(d=(o=e[i]=new h(d,d+a,o.fromB-m,o.toB-m)).fromA,v=E(t,o.toA,Math.min(u-o.toA,5))):p>g&&t.slice(o.toA,v)==y.slice(A,A+g)&&(v=(o=e[i]=new h(v-a,v,o.fromB+g,o.toB+g)).toA,d=M(t,o.fromA,Math.min(o.fromA-n,5))),m=o.fromA-d,g=v-o.toA):!m&&!g&&(x=o.fromA-(B=function(e,t,r){for(var n=t,i=t-r;;){var o=n?e.charCodeAt(n-1):10;if(10==o)return n;if(--n<i||32!=o&&9!=o)return t}}(t,o.fromA,c)))&&t.slice(B,o.fromA)==y.slice(w-x,w)&&(o=e[i]=new h(B,B+a,o.fromB-x,o.toB-x))}(m||g)&&(o=e[i]=new h(o.fromA-m,o.toA+g,o.fromB-m,o.toB+g)),n=o.toA}}return k(e,3),e}(S(e,t,r),e,t)}var T=c.Facet.define({combine:function(e){return e[0]}}),N=c.StateEffect.define(),j=c.StateField.define({create:function(e){return null},update:function(e,t){var r=!0,n=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var s=o.value;s.is(N)&&(e=s.value)}}catch(e){n=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}return e}}),V=function(){function e(t,r,i,o,a){(0,n._)(this,e),this.changes=t,this.fromA=r,this.toA=i,this.fromB=o,this.toB=a}return(0,i._)(e,[{key:"offset",value:function(t,r){return t||r?new e(this.changes,this.fromA+t,this.toA+t,this.fromB+r,this.toB+r):this}},{key:"endA",get:function(){return Math.max(this.fromA,this.toA-1)}},{key:"endB",get:function(){return Math.max(this.fromB,this.toB-1)}}],[{key:"build",value:function(e,t,r){return P(R(e.toString(),t.toString(),r),e,t,0,0)}},{key:"updateA",value:function(e,t,r,n,i){return q(U(e,n,!0,r.length),e,t,r,i)}},{key:"updateB",value:function(e,t,r,n,i){return q(U(e,n,!1,t.length),e,t,r,i)}}]),e}();function G(e,t,r,n){var i=r.lineAt(e),o=n.lineAt(t);return i.to==e&&o.to==t&&e<r.length&&t<n.length?[e+1,t+1]:[i.from,o.from]}function F(e,t,r,n){var i=r.lineAt(e),o=n.lineAt(t);return i.from==e&&o.from==t?[e,t]:[i.to+1,o.to+1]}function P(e,t,r,n,i){for(var o=[],a=0;a<e.length;a++){for(var f=e[a],u=(0,s._)(G(f.fromA+n,f.fromB+i,t,r),2),c=u[0],l=u[1],h=(0,s._)(F(f.toA+n,f.toB+i,t,r),2),d=h[0],v=h[1],m=[f.offset(-c+n,-l+i)];a<e.length-1;){var g,p=e[a+1],b=(0,s._)(G(p.fromA+n,p.fromB+i,t,r),2),y=b[0],A=b[1];if(y>d+1&&A>v+1)break;m.push(p.offset(-c+n,-l+i)),d=(g=(0,s._)(F(p.toA+n,p.toB+i,t,r),2))[0],v=g[1],a++}o.push(new V(m,c,Math.max(c,d),l,Math.max(l,v)))}return o}function W(e,t,r,n){for(var i=0,o=e.length;;){if(i==o){var a,f=0,u=0;i&&(f=(a=e[i-1]).toA,u=a.toB);var c=t-(r?f:u);return[f+c,u+c]}var l=i+o>>1,h=e[l],d=(0,s._)(r?[h.fromA,h.toA]:[h.fromB,h.toB],2),v=d[0],m=d[1];if(v>t)o=l;else{if(!(m<=t))return n?[h.fromA,h.fromB]:[h.toA,h.toB];i=l+1}}}function U(e,t,r,n){var i=[];return t.iterChangedRanges(function(o,a,f,u){var c=0,l=r?t.length:n,h=0,d=r?n:t.length;o>1e3&&(c=(v=(0,s._)(W(e,o-1e3,r,!0),2))[0],h=v[1]),a<t.length-1e3&&(l=(m=(0,s._)(W(e,a+1e3,r,!1),2))[0],d=m[1]);var v,m,g,p=u-f-(a-o),b=(0,s._)(r?[p,0]:[0,p],2),y=b[0],A=b[1];i.length&&(g=i[i.length-1]).toA>=c?i[i.length-1]={fromA:g.fromA,fromB:g.fromB,toA:l,toB:d,diffA:g.diffA+y,diffB:g.diffB+A}:i.push({fromA:c,toA:l,fromB:h,toB:d,diffA:y,diffB:A})}),i}function q(e,t,r,n,i){if(!e.length)return t;for(var o=[],a=0,s=0,f=0,u=0;;a++){for(var c=a==e.length?null:e[a],l=c?c.fromA+s:r.length,h=c?c.fromB+f:n.length;u<t.length;){var d=t[u];if(d.toA+s>l||d.toB+f>h)break;o.push(d.offset(s,f)),u++}if(!c)break;var v=c.toA+s+c.diffA,m=c.toB+f+c.diffB,g=R(r.sliceString(l,v),n.sliceString(h,m),i),p=!0,b=!1,y=void 0;try{for(var A,w=P(g,r,n,l,h)[Symbol.iterator]();!(p=(A=w.next()).done);p=!0){var B=A.value;o.push(B)}}catch(e){b=!0,y=e}finally{try{p||null==w.return||w.return()}finally{if(b)throw y}}for(s+=c.diffA,f+=c.diffB;u<t.length;){var k=t[u];if(k.fromA+s>v&&k.fromB+f>m)break;u++}}return o}var z={scanLimit:500},H=u.ViewPlugin.fromClass(function(){function e(t){var r;(0,n._)(this,e),r=X(t),this.deco=r.deco,this.gutter=r.gutter}return(0,i._)(e,[{key:"update",value:function(e){var t,r,n,i,o;(e.docChanged||e.viewportChanged||(r=e.startState,n=e.state,r.field(j,!1)!=n.field(j,!1))||(i=e.startState,o=e.state,i.facet(T)!=o.facet(T)))&&(t=X(e.view),this.deco=t.deco,this.gutter=t.gutter)}}]),e}(),{decorations:function(e){return e.deco}}),I=c.Prec.low((0,u.gutter)({class:"cm-changeGutter",markers:function(e){var t;return(null==(t=e.plugin(H))?void 0:t.gutter)||c.RangeSet.empty}})),K=u.Decoration.line({class:"cm-changedLine"}),Y=u.Decoration.mark({class:"cm-changedText"}),J=u.Decoration.mark({tagName:"ins",class:"cm-insertedLine"}),$=u.Decoration.mark({tagName:"del",class:"cm-deletedLine"}),Q=new(function(e){function t(){var e;return(0,n._)(this,t),e=(0,r._)(this,t,arguments),e.elementClass="cm-changedLineGutter",e}return(0,o._)(t,e),t}(u.GutterMarker));function X(e){var t=e.state.field(j),r=e.state.facet(T),n=r.side,i=r.highlightChanges,o=r.markGutter,a="a"==n,s=new c.RangeSetBuilder,f=o?new c.RangeSetBuilder:null,u=e.viewport,l=u.from,h=u.to,d=!0,v=!1,m=void 0;try{for(var g,p=t[Symbol.iterator]();!(d=(g=p.next()).done);d=!0){var b=g.value;if((a?b.fromA:b.fromB)>=h)break;(a?b.toA:b.toB)>l&&function(e,t,r,n,i,o){var a=r?e.fromA:e.fromB,s=r?e.toA:e.toB,f=0;if(a!=s){i.add(a,a,K),i.add(a,s,r?$:J),o&&o.add(a,a,Q);for(var u=t.iterRange(a,s-1),c=a;!u.next().done;){if(u.lineBreak){c++,i.add(c,c,K),o&&o.add(c,c,Q);continue}var l=c+u.value.length;if(n)for(;f<e.changes.length;){var h=e.changes[f],d=a+(r?h.fromA:h.fromB),v=a+(r?h.toA:h.toB),m=Math.max(c,d),g=Math.min(l,v);if(m<g&&i.add(m,g,Y),v<l)f++;else break}c=l}}}(b,e.state.doc,a,i,s,f)}}catch(e){v=!0,m=e}finally{try{d||null==p.return||p.return()}finally{if(v)throw m}}return{deco:s.finish(),gutter:f&&f.finish()}}var Z=function(e){function t(e){var i;return(0,n._)(this,t),(i=(0,r._)(this,t)).height=e,i}return(0,o._)(t,e),(0,i._)(t,[{key:"eq",value:function(e){return this.height==e.height}},{key:"toDOM",value:function(){var e=document.createElement("div");return e.className="cm-mergeSpacer",e.style.height=this.height+"px",e}},{key:"updateDOM",value:function(e){return e.style.height=this.height+"px",!0}},{key:"estimatedHeight",get:function(){return this.height}},{key:"ignoreEvent",value:function(){return!1}}]),t}(u.WidgetType),ee=c.StateEffect.define({map:function(e,t){return e.map(t)}}),et=c.StateField.define({create:function(){return u.Decoration.none},update:function(e,t){var r=!0,n=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var s=o.value;if(s.is(ee))return s.value}}catch(e){n=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}return e.map(t.changes)},provide:function(e){return u.EditorView.decorations.from(e)}});function er(e,t){if(e.size!=t.size)return!1;for(var r=e.iter(),n=t.iter();r.value;){if(r.from!=n.from||Math.abs(r.value.spec.widget.height-n.value.spec.widget.height)>1)return!1;r.next(),n.next()}return!0}var en=c.StateEffect.define({map:function(e,t){return t.mapPos(e)}}),ei=function(e){function t(e){var i;return(0,n._)(this,t),(i=(0,r._)(this,t)).lines=e,i}return(0,o._)(t,e),(0,i._)(t,[{key:"eq",value:function(e){return this.lines==e.lines}},{key:"toDOM",value:function(e){var t=document.createElement("div");return t.className="cm-collapsedLines",t.textContent="⦚ "+e.state.phrase("$ unchanged lines",this.lines)+" ⦚",t.addEventListener("click",function(t){var r=e.posAtDOM(t.target);e.dispatch({effects:en.of(r)});var n=e.state.facet(T),i=n.side,o=n.sibling;o&&o().dispatch({effects:en.of(function(e,t,r){for(var n=0,i=0,o=0;;o++){var a,f=o<t.length?t[o]:null;if(!f||(r?f.fromA:f.fromB)>=e)return i+(e-n);n=(a=(0,s._)(r?[f.toA,f.toB]:[f.toB,f.toA],2))[0],i=a[1]}}(r,e.state.field(j),"a"==i))})}),t}},{key:"ignoreEvent",value:function(e){return(0,a._)(e,MouseEvent)}},{key:"estimatedHeight",get:function(){return 27}}]),t}(u.WidgetType),eo=c.StateField.define({create:function(e){return u.Decoration.none},update:function(e,t){e=e.map(t.changes);var r=!0,n=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(r=(o=a.next()).done);r=!0)!function(){var t=o.value;t.is(en)&&(e=e.update({filter:function(e){return e!=t.value}}))}()}catch(e){n=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}return e},provide:function(e){return u.EditorView.decorations.from(e)}});function ea(e){var t=e.margin,r=void 0===t?3:t,n=e.minSize,i=void 0===n?4:n;return eo.init(function(e){return function(e,t,r){for(var n=new c.RangeSetBuilder,i="a"==e.facet(T).side,o=e.field(j),a=1,s=0;;s++){var f=s<o.length?o[s]:null,l=s?a+t:1,h=f?e.doc.lineAt(i?f.fromA:f.fromB).number-1-t:e.doc.lines,d=h-l+1;if(d>=r&&n.add(e.doc.line(l).from,e.doc.line(h).to,u.Decoration.replace({widget:new ei(d),block:!0})),!f)break;a=e.doc.lineAt(Math.min(e.doc.length,i?f.toA:f.toB)).number}return n.finish()}(e,r,i)})}var es=u.EditorView.styleModule.of(new l.StyleModule({".cm-mergeView":{overflowY:"auto"},".cm-mergeViewEditors":{display:"flex",alignItems:"stretch"},".cm-mergeViewEditor":{flexGrow:1,flexBasis:0,overflow:"hidden"},".cm-merge-revert":{width:"1.6em",flexGrow:0,flexShrink:0,position:"relative"},".cm-merge-revert button":{position:"absolute",display:"block",width:"100%",boxSizing:"border-box",textAlign:"center",background:"none",border:"none",font:"inherit",cursor:"pointer"}})),ef=u.EditorView.baseTheme({".cm-mergeView & .cm-scroller, .cm-mergeView &":{height:"auto !important",overflowY:"visible !important"},"&.cm-merge-a .cm-changedLine, .cm-deletedChunk":{backgroundColor:"rgba(160, 128, 100, .08)"},"&.cm-merge-b .cm-changedLine":{backgroundColor:"rgba(100, 160, 128, .08)"},"&light.cm-merge-a .cm-changedText, &light .cm-deletedChunk .cm-deletedText":{background:"linear-gradient(#ee443366, #ee443366) bottom/100% 2px no-repeat"},"&dark.cm-merge-a .cm-changedText, &dark .cm-deletedChunk .cm-deletedText":{background:"linear-gradient(#ffaa9966, #ffaa9966) bottom/100% 2px no-repeat"},"&light.cm-merge-b .cm-changedText":{background:"linear-gradient(#22bb2266, #22bb2266) bottom/100% 2px no-repeat"},"&dark.cm-merge-b .cm-changedText":{background:"linear-gradient(#88ff8866, #88ff8866) bottom/100% 2px no-repeat"},".cm-insertedLine, .cm-deletedLine":{textDecoration:"none"},".cm-deletedChunk":{paddingLeft:"6px","& .cm-chunkButtons":{position:"absolute",insetInlineEnd:"5px"},"& button":{border:"none",cursor:"pointer",color:"white",margin:"0 2px",borderRadius:"3px","&[name=accept]":{background:"#2a2"},"&[name=reject]":{background:"#d43"}}},".cm-collapsedLines":{padding:"5px 5px 5px 10px",cursor:"pointer"},"&light .cm-collapsedLines":{color:"#444",background:"linear-gradient(to bottom, transparent 0, #f3f3f3 30%, #f3f3f3 70%, transparent 100%)"},"&dark .cm-collapsedLines":{color:"#ddd",background:"linear-gradient(to bottom, transparent 0, #222 30%, #222 70%, transparent 100%)"},".cm-changeGutter":{width:"3px",paddingLeft:"1px"},"&light.cm-merge-a .cm-changedLineGutter, &light .cm-deletedLineGutter":{background:"#e43"},"&dark.cm-merge-a .cm-changedLineGutter, &dark .cm-deletedLineGutter":{background:"#fa9"},"&light.cm-merge-b .cm-changedLineGutter":{background:"#2b2"},"&dark.cm-merge-b .cm-changedLineGutter":{background:"#8f8"}}),eu=new c.Compartment,ec=new c.Compartment,el=function(){function e(t){var r=this;(0,n._)(this,e),this.revertDOM=null,this.revertToA=!1,this.revertToLeft=!1,this.measuring=-1,this.diffConf=t.diffConfig||z;var i=[c.Prec.low(H),ef,es,et,u.EditorView.updateListener.of(function(e){r.measuring<0&&(e.heightChanged||e.viewportChanged)&&!e.transactions.some(function(e){return e.effects.some(function(e){return e.is(ee)})})&&r.measure()})],o=[T.of({side:"a",sibling:function(){return r.b},highlightChanges:!1!==t.highlightChanges,markGutter:!1!==t.gutter})];!1!==t.gutter&&o.push(I);var a=c.EditorState.create({doc:t.a.doc,selection:t.a.selection,extensions:[t.a.extensions||[],u.EditorView.editorAttributes.of({class:"cm-merge-a"}),ec.of(o),i]}),s=[T.of({side:"b",sibling:function(){return r.a},highlightChanges:!1!==t.highlightChanges,markGutter:!1!==t.gutter})];!1!==t.gutter&&s.push(I);var f=c.EditorState.create({doc:t.b.doc,selection:t.b.selection,extensions:[t.b.extensions||[],u.EditorView.editorAttributes.of({class:"cm-merge-b"}),ec.of(s),i]});this.chunks=V.build(a.doc,f.doc,this.diffConf);var l=[j.init(function(){return r.chunks}),eu.of(t.collapseUnchanged?ea(t.collapseUnchanged):[])];a=a.update({effects:c.StateEffect.appendConfig.of(l)}).state,f=f.update({effects:c.StateEffect.appendConfig.of(l)}).state,this.dom=document.createElement("div"),this.dom.className="cm-mergeView",this.editorDOM=this.dom.appendChild(document.createElement("div")),this.editorDOM.className="cm-mergeViewEditors";var h=t.orientation||"a-b",d=document.createElement("div");d.className="cm-mergeViewEditor";var v=document.createElement("div");v.className="cm-mergeViewEditor",this.editorDOM.appendChild("a-b"==h?d:v),this.editorDOM.appendChild("a-b"==h?v:d),this.a=new u.EditorView({state:a,parent:d,root:t.root,dispatchTransactions:function(e){return r.dispatch(e,r.a)}}),this.b=new u.EditorView({state:f,parent:v,root:t.root,dispatchTransactions:function(e){return r.dispatch(e,r.b)}}),this.setupRevertControls(!!t.revertControls,"b-to-a"==t.revertControls,t.renderRevertControl),t.parent&&t.parent.appendChild(this.dom),this.scheduleMeasure()}return(0,i._)(e,[{key:"dispatch",value:function(e,t){if(e.some(function(e){return e.docChanged})){var r=e[e.length-1],n=e.reduce(function(e,t){return e.compose(t.changes)},c.ChangeSet.empty(e[0].startState.doc.length));this.chunks=t==this.a?V.updateA(this.chunks,r.newDoc,this.b.state.doc,n,this.diffConf):V.updateB(this.chunks,this.a.state.doc,r.newDoc,n,this.diffConf),t.update((0,f._)(e).concat([r.state.update({effects:N.of(this.chunks)})]));var i=t==this.a?this.b:this.a;i.update([i.state.update({effects:N.of(this.chunks)})]),this.scheduleMeasure()}else t.update(e)}},{key:"reconfigure",value:function(e){var t=this;if("diffConfig"in e&&(this.diffConf=e.diffConfig),"orientation"in e){var r="b-a"!=e.orientation;if(r!=(this.editorDOM.firstChild==this.a.dom.parentNode)){var n=this.a.dom.parentNode,i=this.b.dom.parentNode;n.remove(),i.remove(),this.editorDOM.insertBefore(r?n:i,this.editorDOM.firstChild),this.editorDOM.appendChild(r?i:n),this.revertToLeft=!this.revertToLeft,this.revertDOM&&(this.revertDOM.textContent="")}}if("revertControls"in e||"renderRevertControl"in e){var o=!!this.revertDOM,a=this.revertToA,s=this.renderRevert;"revertControls"in e&&(o=!!e.revertControls,a="b-to-a"==e.revertControls),"renderRevertControl"in e&&(s=e.renderRevertControl),this.setupRevertControls(o,a,s)}var f="highlightChanges"in e,u="gutter"in e,c="collapseUnchanged"in e;if(f||u||c){var l=[],h=[];if(f||u){var d=this.a.state.facet(T),v=u?!1!==e.gutter:d.markGutter,m=f?!1!==e.highlightChanges:d.highlightChanges;l.push(ec.reconfigure([T.of({side:"a",sibling:function(){return t.b},highlightChanges:m,markGutter:v}),v?I:[]])),h.push(ec.reconfigure([T.of({side:"b",sibling:function(){return t.a},highlightChanges:m,markGutter:v}),v?I:[]]))}if(c){var g=eu.reconfigure(e.collapseUnchanged?ea(e.collapseUnchanged):[]);l.push(g),h.push(g)}this.a.dispatch({effects:l}),this.b.dispatch({effects:h})}this.scheduleMeasure()}},{key:"setupRevertControls",value:function(e,t,r){var n=this;this.revertToA=t,this.revertToLeft=this.revertToA==(this.editorDOM.firstChild==this.a.dom.parentNode),this.renderRevert=r,!e&&this.revertDOM?(this.revertDOM.remove(),this.revertDOM=null):e&&!this.revertDOM?(this.revertDOM=this.editorDOM.insertBefore(document.createElement("div"),this.editorDOM.firstChild.nextSibling),this.revertDOM.addEventListener("mousedown",function(e){return n.revertClicked(e)}),this.revertDOM.className="cm-merge-revert"):this.revertDOM&&(this.revertDOM.textContent="")}},{key:"scheduleMeasure",value:function(){var e=this;if(this.measuring<0){var t=this.dom.ownerDocument.defaultView||window;this.measuring=t.requestAnimationFrame(function(){e.measuring=-1,e.measure()})}}},{key:"measure",value:function(){!function(e,t,r){for(var n=new c.RangeSetBuilder,i=new c.RangeSetBuilder,o=e.state.field(et).iter(),a=t.state.field(et).iter(),s=0,f=0,l=0,h=0,d=e.viewport,v=t.viewport,m=0;;m++){var g=m<r.length?r[m]:null,p=g?g.fromA:e.state.doc.length,b=g?g.fromB:t.state.doc.length;if(s<p){var y=e.lineBlockAt(s).top+l-(t.lineBlockAt(f).top+h);y<-.01?(l-=y,n.add(s,s,u.Decoration.widget({widget:new Z(-y),block:!0,side:-1}))):y>.01&&(h+=y,i.add(f,f,u.Decoration.widget({widget:new Z(y),block:!0,side:-1})))}if(p>s+1e3&&s<d.from&&p>d.from&&f<v.from&&b>v.from){var A=Math.min(d.from-s,v.from-f);s+=A,f+=A,m--}else if(g)s=g.toA,f=g.toB;else break;for(;o.value&&o.from<s;)l-=o.value.spec.widget.height,o.next();for(;a.value&&a.from<f;)h-=a.value.spec.widget.height,a.next()}for(;o.value;)l-=o.value.spec.widget.height,o.next();for(;a.value;)h-=a.value.spec.widget.height,a.next();var w=e.contentHeight+l-(t.contentHeight+h);w<.01?n.add(e.state.doc.length,e.state.doc.length,u.Decoration.widget({widget:new Z(-w),block:!0,side:1})):w>.01&&i.add(t.state.doc.length,t.state.doc.length,u.Decoration.widget({widget:new Z(w),block:!0,side:1}));var B=n.finish(),k=i.finish();er(B,e.state.field(et))||e.dispatch({effects:ee.of(B)}),er(k,t.state.field(et))||t.dispatch({effects:ee.of(k)})}(this.a,this.b,this.chunks),this.revertDOM&&this.updateRevertButtons()}},{key:"updateRevertButtons",value:function(){for(var e=this.revertDOM,t=e.firstChild,r=this.a.viewport,n=this.b.viewport,i=0;i<this.chunks.length;i++){var o=this.chunks[i];if(o.fromA>r.to||o.fromB>n.to)break;if(!(o.fromA<r.from)&&!(o.fromB<n.from)){for(var a=this.a.lineBlockAt(o.fromA).top+"px";t&&+t.dataset.chunk<i;)t=eh(t);t&&t.dataset.chunk==String(i)?(t.style.top!=a&&(t.style.top=a),t=t.nextSibling):e.insertBefore(this.renderRevertButton(a,i),t)}}for(;t;)t=eh(t)}},{key:"renderRevertButton",value:function(e,t){var r;if(this.renderRevert)r=this.renderRevert();else{r=document.createElement("button");var n=this.a.state.phrase("Revert this chunk");r.setAttribute("aria-label",n),r.setAttribute("title",n),r.textContent=this.revertToLeft?"⇜":"⇝"}return r.style.top=e,r.setAttribute("data-chunk",String(t)),r}},{key:"revertClicked",value:function(e){for(var t,r=e.target;r&&r.parentNode!=this.revertDOM;)r=r.parentNode;if(r&&(t=this.chunks[r.dataset.chunk])){var n=(0,s._)(this.revertToA?[this.b,this.a,t.fromB,t.toB,t.fromA,t.toA]:[this.a,this.b,t.fromA,t.toA,t.fromB,t.toB],6),i=n[0],o=n[1],a=n[2],f=n[3],u=n[4],c=n[5],l=i.state.sliceDoc(a,Math.max(a,f-1));a!=f&&c<=o.state.doc.length&&(l+=i.state.lineBreak),o.dispatch({changes:{from:u,to:Math.min(o.state.doc.length,c),insert:l},userEvent:"revert"}),e.preventDefault()}}},{key:"destroy",value:function(){this.a.destroy(),this.b.destroy(),this.measuring>-1&&(this.dom.ownerDocument.defaultView||window).cancelAnimationFrame(this.measuring),this.dom.remove()}}]),e}();function eh(e){var t=e.nextSibling;return e.remove(),t}var ed=c.StateEffect.define();function ev(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=S(e.toString(),t.toString())[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var f=a.value,u=f.fromA,l=f.fromB,h=f.toA,d=f.toB;u===h&&r.push({from:u,insert:t.slice(l,d)}),l===d&&r.push({from:u,to:h,insert:""}),u!==h&&l!==d&&r.push({from:u,to:h,insert:t.slice(l,d)})}}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return c.ChangeSet.of(r,e.length)}(function(e){function t(e){var i;return(0,n._)(this,t),(i=(0,r._)(this,t)).buildDOM=e,i.dom=null,i}(0,o._)(t,e),(0,i._)(t,[{key:"eq",value:function(e){return this.dom==e.dom}},{key:"toDOM",value:function(e){return this.dom||(this.dom=this.buildDOM(e))}}])})(u.WidgetType),e.s(["Change",()=>h,"Chunk",()=>V,"MergeView",()=>el,"diff",()=>S],676480),e.s(["changeSetFromDiff",()=>ev],328751)}]);

//# debugId=a18c91ea-11ad-83c0-f8bc-1f79351dd5e4
//# sourceMappingURL=b866a387428389a4.js.map