;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="9ee76260-6cbb-ae2c-c066-d760dadd181d")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,315358,(e,t,n)=>{var r=e.r(954546),o=e.r(365738),a={452:function(t){"use strict";t.exports=e.r(842891)}},i={};function s(e){var t=i[e];if(void 0!==t)return t.exports;var n=i[e]={exports:{}},r=!0;try{a[e](n,n.exports,s),r=!1}finally{r&&delete i[e]}return n.exports}s.ab="/ROOT/node_modules/.pnpm/next@16.0.1_@babel+core@7.21.4_@opentelemetry+api@1.9.0_babel-plugin-macros@3.1.0_react_93265113966a84f0dd9a21e4850bafa0/node_modules/next/dist/compiled/native-url/";var c={};!function(){var e,t=(e=s(452))&&"object"==(void 0===e?"undefined":o._(e))&&"default"in e?e.default:e,n=/https?|ftp|gopher|file/;function a(e){"string"==typeof e&&(e=b(e));var r,a,i,s,c,u,l,d,h,p=(a=(r=e).auth,i=r.hostname,s=r.protocol||"",c=r.pathname||"",u=r.hash||"",l=r.query||"",d=!1,a=a?encodeURIComponent(a).replace(/%3A/i,":")+"@":"",r.host?d=a+r.host:i&&(d=a+(~i.indexOf(":")?"["+i+"]":i),r.port&&(d+=":"+r.port)),l&&"object"==(void 0===l?"undefined":o._(l))&&(l=t.encode(l)),h=r.search||l&&"?"+l||"",s&&":"!==s.substr(-1)&&(s+=":"),r.slashes||(!s||n.test(s))&&!1!==d?(d="//"+(d||""),c&&"/"!==c[0]&&(c="/"+c)):d||(d=""),u&&"#"!==u[0]&&(u="#"+u),h&&"?"!==h[0]&&(h="?"+h),{protocol:s,host:d,pathname:c=c.replace(/[?#]/g,encodeURIComponent),search:h=h.replace("#","%23"),hash:u});return""+p.protocol+p.host+p.pathname+p.search+p.hash}var i="http://",u=i+"w.w",l=/^([a-z0-9.+-]*:\/\/\/)([a-z0-9.+-]:\/*)?/i,d=/https?|ftp|gopher|file/;function h(e,t){var n="string"==typeof e?b(e):e;e="object"==(void 0===e?"undefined":o._(e))?a(e):e;var r=b(t),s="";n.protocol&&!n.slashes&&(s=n.protocol,e=e.replace(n.protocol,""),s+="/"===t[0]||"/"===e[0]?"/":""),s&&r.protocol&&(s="",r.slashes||(s=r.protocol,t=t.replace(r.protocol,"")));var c=e.match(l);c&&!r.protocol&&(e=e.substr((s=c[1]+(c[2]||"")).length),/^\/\/[^/]/.test(t)&&(s=s.slice(0,-1)));var h=new URL(e,u+"/"),p=new URL(t,h).toString().replace(u,""),f=r.protocol||n.protocol;return f+=n.slashes||r.slashes?"//":"",!s&&f?p=p.replace(i,f):s&&(p=p.replace(i,"")),d.test(p)||~t.indexOf(".")||"/"===e.slice(-1)||"/"===t.slice(-1)||"/"!==p.slice(-1)||(p=p.slice(0,-1)),s&&(p=s+("/"===p[0]?p.substr(1):p)),p}function p(){}p.prototype.parse=b,p.prototype.format=a,p.prototype.resolve=h,p.prototype.resolveObject=h;var f=/^https?|ftp|gopher|file/,g=/^(.*?)([#?].*)/,y=/^([a-z0-9.+-]*:)(\/{0,3})(.*)/i,v=/^([a-z0-9.+-]*:)?\/\/\/*/i,m=/^([a-z0-9.+-]*:)(\/{0,2})\[(.*)\]$/i;function b(e,n,i){if(void 0===n&&(n=!1),void 0===i&&(i=!1),e&&"object"==(void 0===e?"undefined":o._(e))&&r._(e,p))return e;var s=(e=e.trim()).match(g);e=s?s[1].replace(/\\/g,"/")+s[2]:e.replace(/\\/g,"/"),m.test(e)&&"/"!==e.slice(-1)&&(e+="/");var c=!/(^javascript)/.test(e)&&e.match(y),l=v.test(e),d="";c&&(f.test(c[1])||(d=c[1].toLowerCase(),e=""+c[2]+c[3]),c[2]||(l=!1,f.test(c[1])?(d=c[1],e=""+c[3]):e="//"+c[3]),3!==c[2].length&&1!==c[2].length||(d=c[1],e="/"+c[3]));var h,b=(s?s[1]:e).match(/^https?:\/\/[^/]+(:[0-9]+)(?=\/|$)/),C=b&&b[1],w=new p,E="",S="";try{h=new URL(e)}catch(t){E=t,d||i||!/^\/\//.test(e)||/^\/\/.+[@.]/.test(e)||(S="/",e=e.substr(1));try{h=new URL(e,u)}catch(e){return w.protocol=d,w.href=d,w}}w.slashes=l&&!S,w.host="w.w"===h.host?"":h.host,w.hostname="w.w"===h.hostname?"":h.hostname.replace(/(\[|\])/g,""),w.protocol=E?d||null:h.protocol,w.search=h.search.replace(/\\/g,"%5C"),w.hash=h.hash.replace(/\\/g,"%5C");var O=e.split("#");!w.search&&~O[0].indexOf("?")&&(w.search="?"),w.hash||""!==O[1]||(w.hash="#"),w.query=n?t.decode(h.search.substr(1)):w.search.substr(1),w.pathname=S+(c?h.pathname.replace(/['^|`]/g,function(e){return"%"+e.charCodeAt().toString(16).toUpperCase()}).replace(/((?:%[0-9A-F]{2})+)/g,function(e,t){try{return decodeURIComponent(t).split("").map(function(e){var t=e.charCodeAt();return t>256||/^[a-z0-9]$/i.test(e)?e:"%"+t.toString(16).toUpperCase()}).join("")}catch(e){return t}}):h.pathname),"about:"===w.protocol&&"blank"===w.pathname&&(w.protocol="",w.pathname=""),E&&"/"!==e[0]&&(w.pathname=w.pathname.substr(1)),d&&!f.test(d)&&"/"!==e.slice(-1)&&"/"===w.pathname&&(w.pathname=""),w.path=w.pathname+w.search,w.auth=[h.username,h.password].map(decodeURIComponent).filter(Boolean).join(":"),w.port=h.port,C&&!w.host.endsWith(C)&&(w.host+=C,w.port=C.slice(1)),w.href=S?""+w.pathname+w.search+w.hash:a(w);var k=/^(file)/.test(w.href)?["host","hostname"]:[];return Object.keys(w).forEach(function(e){~k.indexOf(e)||(w[e]=w[e]||null)}),w}c.parse=b,c.format=a,c.resolve=h,c.resolveObject=function(e,t){return b(h(e,t))},c.Url=p}(),t.exports=c},7433,105823,e=>{"use strict";var t=e.i(548452),n=e.i(468930),r=e.i(893299),o=(0,e.i(908564).createContextKey)("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function a(e){return e.setValue(o,!0)}function i(e){return!0===e.getValue(o)}e.s(["isTracingSuppressed",()=>i,"suppressTracing",()=>a],105823);var s="[_0-9a-z-*/]",c=RegExp("^(?:[a-z]"+s+"{0,255}|"+("[a-z0-9]"+s+"{0,240}@[a-z]")+s+"{0,13})$"),u=/^[ -~]{0,255}[!-~]$/,l=/,|=/,d=function(){function e(e){this._internalState=new Map,e&&this._parse(e)}return e.prototype.set=function(e,t){var n=this._clone();return n._internalState.has(e)&&n._internalState.delete(e),n._internalState.set(e,t),n},e.prototype.unset=function(e){var t=this._clone();return t._internalState.delete(e),t},e.prototype.get=function(e){return this._internalState.get(e)},e.prototype.serialize=function(){var e=this;return this._keys().reduce(function(t,n){return t.push(n+"="+e.get(n)),t},[]).join(",")},e.prototype._parse=function(e){!(e.length>512)&&(this._internalState=e.split(",").reverse().reduce(function(e,t){var n=t.trim(),r=n.indexOf("=");if(-1!==r){var o=n.slice(0,r),a=n.slice(r+1,t.length);c.test(o)&&u.test(a)&&!l.test(a)&&e.set(o,a)}return e},new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))},e.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},e.prototype._clone=function(){var t=new e;return t._internalState=new Map(this._internalState),t},e}(),h="traceparent",p="tracestate",f=RegExp("^\\s?((?!ff)[\\da-f]{2})-((?![0]{32})[\\da-f]{32})-((?![0]{16})[\\da-f]{16})-([\\da-f]{2})(-.*)?\\s?$"),g=function(){function e(){}return e.prototype.inject=function(e,o,a){var s=n.trace.getSpanContext(e);if(!(!s||i(e))&&(0,t.isSpanContextValid)(s)){var c="00-"+s.traceId+"-"+s.spanId+"-0"+Number(s.traceFlags||r.TraceFlags.NONE).toString(16);a.set(o,h,c),s.traceState&&a.set(o,p,s.traceState.serialize())}},e.prototype.extract=function(e,t,r){var o,a=r.get(t,h);if(!a)return e;var i=Array.isArray(a)?a[0]:a;if("string"!=typeof i)return e;var s=(o=f.exec(i))&&("00"!==o[1]||!o[5])?{traceId:o[2],spanId:o[3],traceFlags:parseInt(o[4],16)}:null;if(!s)return e;s.isRemote=!0;var c=r.get(t,p);if(c){var u=Array.isArray(c)?c.join(","):c;s.traceState=new d("string"==typeof u?u:void 0)}return n.trace.setSpanContext(e,s)},e.prototype.fields=function(){return[h,p]},e}();e.s(["W3CTraceContextPropagator",()=>g],7433)},787182,e=>{"use strict";var t,n=e.i(399119),r=e.i(904851),o=e.i(445789),a=e.i(530658),i=e.i(463348),s=((t={}).NotFound="NotFound",t.NotAllowed="NotAllowed",t.ConcurrentReplLimit="ConcurrentReplLimit",t.LanguageTokenDenied="LanguageTokenDenied",t.RequiresRefresh="RequiresRefresh",t.CrosisChannel="CrosisChannel",t),c={"repl not found":"NotFound","not allowed to run at this time":"NotAllowed","language tokens are only for logged out people.":"LanguageTokenDenied","user is required to refresh":"RequiresRefresh","channel with name ot":"CrosisChannel","cannot send any more commands after a close request on channel for ot":"CrosisChannel"};function u(e){var t=!0,n=!1,r=void 0;try{for(var o,i=Object.entries(c)[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var s=(0,a._)(o.value,2),u=s[0],l=s[1];if(e.message.toLowerCase().includes(u))return l}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return null}var l=function(e){function t(e){return(0,r._)(this,t),(0,n._)(this,t,["user is required to refresh: "+e])}return(0,o._)(t,e),t}((0,i._)(Error));e.s(["NonBsodErrorType",()=>s,"PleaseRefreshError",()=>l,"default",()=>u])},259039,(e,t,n)=>{"use strict";t.exports=function(){throw Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},193283,(e,t,n)=>{let r;var o,a=e.r(954546),i=e.r(365738);o=function(){"use strict";function t(e,t){if(!a._(e,t))throw TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function c(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=o(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}}).apply(this,arguments)}var l=function(){function e(){t(this,e),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return r(e,[{key:"addEventListener",value:function(e,t,n){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push({callback:t,options:n})}},{key:"removeEventListener",value:function(e,t){if(e in this.listeners){for(var n=this.listeners[e],r=0,o=n.length;r<o;r++)if(n[r].callback===t)return void n.splice(r,1)}}},{key:"dispatchEvent",value:function(e){if(e.type in this.listeners){for(var t=this.listeners[e.type].slice(),n=0,r=t.length;n<r;n++){var o=t[n];try{o.callback.call(this,e)}catch(e){Promise.resolve().then(function(){throw e})}o.options&&o.options.once&&this.removeEventListener(e.type,o.callback)}return!e.defaultPrevented}}}]),e}(),AbortSignal=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");AbortSignal.prototype=Object.create(e&&e.prototype,{constructor:{value:AbortSignal,writable:!0,configurable:!0}}),Object.defineProperty(AbortSignal,"prototype",{writable:!1}),e&&s(AbortSignal,e);var n,a=(n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=o(AbortSignal);e=n?Reflect.construct(t,arguments,o(this).constructor):t.apply(this,arguments);if(e&&((void 0===e?"undefined":i._(e))==="object"||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return c(this)});function AbortSignal(){var e;return t(this,AbortSignal),(e=a.call(this)).listeners||l.call(c(e)),Object.defineProperty(c(e),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(c(e),"onabort",{value:null,writable:!0,configurable:!0}),Object.defineProperty(c(e),"reason",{value:void 0,writable:!0,configurable:!0}),e}return r(AbortSignal,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(e){"abort"===e.type&&(this.aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,e)),u(o(AbortSignal.prototype),"dispatchEvent",this).call(this,e)}}]),AbortSignal}(l),d=function(){function e(){t(this,e),Object.defineProperty(this,"signal",{value:new AbortSignal,writable:!0,configurable:!0})}return r(e,[{key:"abort",value:function(e){try{t=new Event("abort")}catch(e){"undefined"!=typeof document?document.createEvent?(t=document.createEvent("Event")).initEvent("abort",!1,!1):(t=document.createEventObject()).type="abort":t={type:"abort",bubbles:!1,cancelable:!1}}var t,n=e;if(void 0===n)if("undefined"==typeof document)(n=Error("This operation was aborted")).name="AbortError";else try{n=new DOMException("signal is aborted without reason")}catch(e){(n=Error("This operation was aborted")).name="AbortError"}this.signal.reason=n,this.signal.dispatchEvent(t)}},{key:"toString",value:function(){return"[object AbortController]"}}]),e}();"undefined"!=typeof Symbol&&Symbol.toStringTag&&(d.prototype[Symbol.toStringTag]="AbortController",AbortSignal.prototype[Symbol.toStringTag]="AbortSignal");var h="undefined"!=typeof self?self:e.g;(h.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),0):("function"!=typeof h.Request||h.Request.prototype.hasOwnProperty("signal"))&&h.AbortController)||(h.AbortController=d,h.AbortSignal=AbortSignal)},"function"==typeof define&&define.amd?void 0!==(r=o(e.r,n,t))&&e.v(r):o()},316237,(e,t,n)=>{"use strict";var r=e.r(772929),o=e.r(883735),a=e.r(619314),i=e.r(559542),s=e.r(873719);Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){function t(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return o._(this,t),(n=r._(this,t,[e])).name="CrosisError",n.extras=a,n.tags=i,n}return i._(t,e),a._(t,null,[{key:"fromError",value:function(e){var n=new t(e.message);return n.stack=e.stack,n}}]),t}(s._(Error))},41597,(e,t,n)=>{"use strict";var r=e.r(529405),o=e.r(883735),a=e.r(5044),i=e.r(23256),s=e.r(745291),c=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.Channel=void 0;var u=e.r(626430),l=c(e.r(316237));n.Channel=function e(t){var n=this,c=t.id,d=t.name,h=t.service,p=t.send,f=t.onUnrecoverableError,g=this;o._(this,e),this.onCommand=function(e){if("closed"===n.status){var t=new l.default("Trying to listen to commands on a closed channel for "+n.service,n.getExtras(),{service:n.service});throw n.onUnrecoverableError(t),t}return n.onCommandListeners.push(e),function(){n.onCommandListeners=n.onCommandListeners.filter(function(t){return t!==e})}},this.send=function(e){if("closed"===n.status){var t=new l.default("Calling send on closed channel for "+n.service,n.getExtras(e),{service:n.service});throw n.onUnrecoverableError(t),t}if("closing"===n.status){var r=new l.default("Cannot send any more commands after a close request on channel for "+n.service,n.getExtras(e),{service:n.service});throw n.onUnrecoverableError(r),r}e.channel=n.id,n.sendToContainer(u.api.Command.create(e))},this.request=function(e){return r._(function(){var t,n;return s._(this,function(r){return t=this,e.ref=n=Number(Math.random().toString().split(".")[1]).toString(36),[2,new Promise(function(r,o){t.requestMap[n]=r;try{t.send(e)}catch(e){delete t.requestMap[n],o(e)}})]})}).call(n)},this.handleCommand=function(e){n.onCommandListeners.forEach(function(t){return t(e)}),e.ref&&n.requestMap[e.ref]&&(n.requestMap[e.ref](e),delete n.requestMap[e.ref])},this.handleClose=function(e){Object.keys(n.requestMap).forEach(function(t){var r=u.api.Command.fromObject({});r.channelClosed=e,n.requestMap[t](r),delete n.requestMap[t]}),n.status="closed",n.onCommandListeners=[]},this.getExtras=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=e?{command:e,commandRef:e.ref,commandKeys:Object.keys(e)}:{};return i._(a._({},t),{channelName:g.name,channelId:g.id})},this.id=c,this.name=d,this.service=h,this.sendToContainer=p,this.onUnrecoverableError=f,this.status="open",this.requestMap={},this.onCommandListeners=[]}},673184,(e,t,n)=>{"use strict";var r=e.r(365738),o=e.e&&e.e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e.e&&e.e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return a(t,e),t},s=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.getConnectionStr=n.getWebSocketClass=n.defaultGetNextRetryDelay=void 0;var c=i(e.r(315358)),u=s(e.r(316237));function l(e){return((void 0===e?"undefined":r._(e))==="object"||"function"==typeof e)&&!!e&&"OPEN"in e&&1===e.OPEN}n.defaultGetNextRetryDelay=function(e){return Math.min(1e3*Math.pow(1.7,e),15e3)+Math.floor(500*Math.random())},n.getWebSocketClass=function(e){if(e){if(!l(e))throw new u.default("Passed in WebSocket does not look like a standard WebSocket");return e}if("undefined"!=typeof WebSocket){if(!l(WebSocket))throw new u.default("Global WebSocket does not look like a standard WebSocket");return WebSocket}throw new u.default("Please pass in a WebSocket class or add it to global")},n.getConnectionStr=function(e,t){var n=c.parse(e.gurl);return t?(n.hostname=t,n.host=t,n.pathname="/wsv2/".concat(e.token,"/").concat(encodeURIComponent(e.gurl))):n.pathname="/wsv2/".concat(e.token),c.format(n)}},706361,(e,t,n)=>{try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){t.exports=!1}},540823,(e,t,n)=>{t.exports="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")()},778980,(e,t,n)=>{var r=e.r(706361),o=e.r(540823);t.exports=function(e){var t=e.xdomain,n=e.xscheme,a=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||r))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!n&&a)return new XDomainRequest}catch(e){}if(!t)try{return new o[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch(e){}}},277177,(e,t,n)=>{t.exports=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var r in e)n.call(e,r)&&t.push(r);return t}},436387,(e,t,n)=>{var r={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},330748,(e,t,n)=>{var r=e.i(937500),o=e.r(954546),a=e.r(365738),i=e.r(436387),s=Object.prototype.toString,c="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===s.call(Blob),u="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===s.call(File);t.exports=function e(t){if(!t||(void 0===t?"undefined":a._(t))!=="object")return!1;if(i(t)){for(var n=0,s=t.length;n<s;n++)if(e(t[n]))return!0;return!1}if("function"==typeof r.Buffer&&r.Buffer.isBuffer&&r.Buffer.isBuffer(t)||"function"==typeof ArrayBuffer&&o._(t,ArrayBuffer)||c&&o._(t,Blob)||u&&o._(t,File))return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1==arguments.length)return e(t.toJSON(),!0);for(var l in t)if(Object.prototype.hasOwnProperty.call(t,l)&&e(t[l]))return!0;return!1}},243879,(e,t,n)=>{t.exports=function(e,t,n){var r=e.byteLength;if(t=t||0,n=n||r,e.slice)return e.slice(t,n);if(t<0&&(t+=r),n<0&&(n+=r),n>r&&(n=r),t>=r||t>=n||0===r)return new ArrayBuffer(0);for(var o=new Uint8Array(e),a=new Uint8Array(n-t),i=t,s=0;i<n;i++,s++)a[s]=o[i];return a.buffer}},692923,(e,t,n)=>{t.exports=function(e,t,n){var o=!1;return n=n||r,a.count=e,0===e?t():a;function a(e,r){if(a.count<=0)throw Error("after called too many times");--a.count,e?(o=!0,t(e),t=n):0!==a.count||o||t(null,r)}};function r(){}},119401,(e,t,n)=>{var r,o,a,i=String.fromCharCode;function s(e){for(var t,n,r=[],o=0,a=e.length;o<a;)(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<a?(64512&(n=e.charCodeAt(o++)))==56320?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),o--):r.push(t);return r}function c(e,t){if(e>=55296&&e<=57343){if(t)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function u(e,t){return i(e>>t&63|128)}function l(){if(a>=o)throw Error("Invalid byte index");var e=255&r[a];if(a++,(192&e)==128)return 63&e;throw Error("Invalid continuation byte")}t.exports={version:"2.1.2",encode:function(e,t){for(var n=!1!==(t=t||{}).strict,r=s(e),o=r.length,a=-1,l="";++a<o;)l+=function(e,t){if((0xffffff80&e)==0)return i(e);var n="";return(0xfffff800&e)==0?n=i(e>>6&31|192):(0xffff0000&e)==0?(c(e,t)||(e=65533),n=i(e>>12&15|224)+u(e,6)):(0xffe00000&e)==0&&(n=i(e>>18&7|240)+u(e,12)+u(e,6)),n+=i(63&e|128)}(r[a],n);return l},decode:function(e,t){var n,u=!1!==(t=t||{}).strict;o=(r=s(e)).length,a=0;for(var d=[];!1!==(n=function(e){var t,n,i,s;if(a>o)throw Error("Invalid byte index");if(a==o)return!1;if(t=255&r[a],a++,(128&t)==0)return t;if((224&t)==192){if((s=(31&t)<<6|(n=l()))>=128)return s;throw Error("Invalid continuation byte")}if((240&t)==224){if((s=(15&t)<<12|(n=l())<<6|(i=l()))>=2048)return c(s,e)?s:65533;throw Error("Invalid continuation byte")}if((248&t)==240&&(n=l(),(s=(7&t)<<18|n<<12|(i=l())<<6|l())>=65536&&s<=1114111))return s;throw Error("Invalid UTF-8 detected")}(u));)d.push(n);for(var h,p=d.length,f=-1,g="";++f<p;)(h=d[f])>65535&&(h-=65536,g+=i(h>>>10&1023|55296),h=56320|1023&h),g+=i(h);return g}}},706869,(e,t,n)=>{!function(e){"use strict";n.encode=function(t){var n,r=new Uint8Array(t),o=r.length,a="";for(n=0;n<o;n+=3)a+=e[r[n]>>2],a+=e[(3&r[n])<<4|r[n+1]>>4],a+=e[(15&r[n+1])<<2|r[n+2]>>6],a+=e[63&r[n+2]];return o%3==2?a=a.substring(0,a.length-1)+"=":o%3==1&&(a=a.substring(0,a.length-2)+"=="),a},n.decode=function(t){var n,r,o,a,i,s=.75*t.length,c=t.length,u=0;"="===t[t.length-1]&&(s--,"="===t[t.length-2]&&s--);var l=new ArrayBuffer(s),d=new Uint8Array(l);for(n=0;n<c;n+=4)r=e.indexOf(t[n]),o=e.indexOf(t[n+1]),a=e.indexOf(t[n+2]),i=e.indexOf(t[n+3]),d[u++]=r<<2|o>>4,d[u++]=(15&o)<<4|a>>2,d[u++]=(3&a)<<6|63&i;return l}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},58936,(e,t,n)=>{var r=e.r(954546),o=void 0!==o?o:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder&&MozBlobBuilder,a=function(){try{var e=new Blob(["hi"]);return 2===e.size}catch(e){return!1}}(),i=a&&function(){try{var e=new Blob([new Uint8Array([1,2])]);return 2===e.size}catch(e){return!1}}(),s=o&&o.prototype.append&&o.prototype.getBlob;function c(e){return e.map(function(e){if(r._(e.buffer,ArrayBuffer)){var t=e.buffer;if(e.byteLength!==t.byteLength){var n=new Uint8Array(e.byteLength);n.set(new Uint8Array(t,e.byteOffset,e.byteLength)),t=n.buffer}return t}return e})}function u(e,t){t=t||{};var n=new o;return c(e).forEach(function(e){n.append(e)}),t.type?n.getBlob(t.type):n.getBlob()}function l(e,t){return new Blob(c(e),t||{})}"undefined"!=typeof Blob&&(u.prototype=Blob.prototype,l.prototype=Blob.prototype),t.exports=a?i?Blob:l:s?u:void 0},662464,(e,t,n)=>{var r,o=e.r(954546),a=e.r(277177),i=e.r(330748),s=e.r(243879),c=e.r(692923),u=e.r(119401);"undefined"!=typeof ArrayBuffer&&(r=e.r(706869));var l="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),d="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),h=l||d;n.protocol=3;var p=n.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},f=a(p),g={type:"error",data:"parser error"},y=e.r(58936);function v(e,t,n){for(var r=Array(e.length),o=c(e.length,n),a=function(e,n,o){t(n,function(t,n){r[e]=n,o(t,r)})},i=0;i<e.length;i++)a(i,e[i],o)}n.encodePacket=function(e,t,r,a){"function"==typeof t&&(a=t,t=!1),"function"==typeof r&&(a=r,r=null);var i,s=void 0===e.data?void 0:e.data.buffer||e.data;if("undefined"!=typeof ArrayBuffer&&o._(s,ArrayBuffer)){var c=e,l=t,d=a;if(!l)return n.encodeBase64Packet(c,d);var f=c.data,g=new Uint8Array(f),v=new Uint8Array(1+f.byteLength);v[0]=p[c.type];for(var m=0;m<g.length;m++)v[m+1]=g[m];return d(v.buffer)}if(void 0!==y&&o._(s,y)){var b=e,C=t,w=a;if(!C)return n.encodeBase64Packet(b,w);if(h){if(!C)return n.encodeBase64Packet(b,w);var E=new FileReader;return E.onload=function(){n.encodePacket({type:b.type,data:E.result},C,!0,w)},E.readAsArrayBuffer(b.data)}var S=new Uint8Array(1);return S[0]=p[b.type],w(new y([S.buffer,b.data]))}if(s&&s.base64){return i=e,a("b"+n.packets[i.type]+i.data.data)}var O=p[e.type];return void 0!==e.data&&(O+=r?u.encode(String(e.data),{strict:!1}):String(e.data)),a(""+O)},n.encodeBase64Packet=function(e,t){var r,a="b"+n.packets[e.type];if(void 0!==y&&o._(e.data,y)){var i=new FileReader;return i.onload=function(){var e=i.result.split(",")[1];t(a+e)},i.readAsDataURL(e.data)}try{r=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(t){for(var s=new Uint8Array(e.data),c=Array(s.length),u=0;u<s.length;u++)c[u]=s[u];r=String.fromCharCode.apply(null,c)}return t(a+=btoa(r))},n.decodePacket=function(e,t,r){if(void 0===e)return g;if("string"==typeof e){if("b"===e.charAt(0))return n.decodeBase64Packet(e.substr(1),t);if(r&&!1===(e=function(e){try{e=u.decode(e,{strict:!1})}catch(e){return!1}return e}(e)))return g;var o=e.charAt(0);return Number(o)==o&&f[o]?e.length>1?{type:f[o],data:e.substring(1)}:{type:f[o]}:g}var o=new Uint8Array(e)[0],a=s(e,1);return y&&"blob"===t&&(a=new y([a])),{type:f[o],data:a}},n.decodeBase64Packet=function(e,t){var n=f[e.charAt(0)];if(!r)return{type:n,data:{base64:!0,data:e.substr(1)}};var o=r.decode(e.substr(1));return"blob"===t&&y&&(o=new y([o])),{type:n,data:o}},n.encodePayload=function(e,t,r){"function"==typeof t&&(r=t,t=null);var o=i(e);return t&&o?y&&!h?n.encodePayloadAsBlob(e,r):n.encodePayloadAsArrayBuffer(e,r):e.length?void v(e,function(e,r){n.encodePacket(e,!!o&&t,!1,function(e){r(null,e.length+":"+e)})},function(e,t){return r(t.join(""))}):r("0:")},n.decodePayload=function(e,t,r){if("string"!=typeof e)return n.decodePayloadAsBinary(e,t,r);if("function"==typeof t&&(r=t,t=null),""===e)return r(g,0,1);for(var o,a,i,s="",c=0,u=e.length;c<u;c++){var l=e.charAt(c);if(":"!==l){s+=l;continue}if(""===s||s!=(a=Number(s))||s!=(i=e.substr(c+1,a)).length)return r(g,0,1);if(i.length){if(o=n.decodePacket(i,t,!1),g.type===o.type&&g.data===o.data)return r(g,0,1);if(!1===r(o,c+a,u))return}c+=a,s=""}if(""!==s)return r(g,0,1)},n.encodePayloadAsArrayBuffer=function(e,t){if(!e.length)return t(new ArrayBuffer(0));v(e,function(e,t){n.encodePacket(e,!0,!0,function(e){return t(null,e)})},function(e,n){var r=new Uint8Array(n.reduce(function(e,t){var n;return e+(n="string"==typeof t?t.length:t.byteLength).toString().length+n+2},0)),o=0;return n.forEach(function(e){var t="string"==typeof e,n=e;if(t){for(var a=new Uint8Array(e.length),i=0;i<e.length;i++)a[i]=e.charCodeAt(i);n=a.buffer}t?r[o++]=0:r[o++]=1;for(var s=n.byteLength.toString(),i=0;i<s.length;i++)r[o++]=parseInt(s[i]);r[o++]=255;for(var a=new Uint8Array(n),i=0;i<a.length;i++)r[o++]=a[i]}),t(r.buffer)})},n.encodePayloadAsBlob=function(e,t){v(e,function(e,t){n.encodePacket(e,!0,!0,function(e){var n=new Uint8Array(1);if(n[0]=1,"string"==typeof e){for(var r=new Uint8Array(e.length),a=0;a<e.length;a++)r[a]=e.charCodeAt(a);e=r.buffer,n[0]=0}for(var i=(o._(e,ArrayBuffer)?e.byteLength:e.size).toString(),s=new Uint8Array(i.length+1),a=0;a<i.length;a++)s[a]=parseInt(i[a]);s[i.length]=255,y&&t(null,new y([n.buffer,s.buffer,e]))})},function(e,n){return t(new y(n))})},n.decodePayloadAsBinary=function(e,t,r){"function"==typeof t&&(r=t,t=null);for(var o=e,a=[];o.byteLength>0;){for(var i=new Uint8Array(o),c=0===i[0],u="",l=1;255!==i[l];l++){if(u.length>310)return r(g,0,1);u+=i[l]}o=s(o,2+u.length);var d=s(o,0,u=parseInt(u));if(c)try{d=String.fromCharCode.apply(null,new Uint8Array(d))}catch(e){var h=new Uint8Array(d);d="";for(var l=0;l<h.length;l++)d+=String.fromCharCode(h[l])}a.push(d),o=s(o,u)}var p=a.length;a.forEach(function(e,o){r(n.decodePacket(e,t,!0),o,p)})}},649720,(e,t,n)=>{function r(e){if(e){var t=e;for(var n in r.prototype)t[n]=r.prototype[n];return t}}t.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var o=0;o<r.length;o++)if((n=r[o])===t||n.fn===t){r.splice(o,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,o=n.length;r<o;++r)n[r].apply(this,t)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},711655,(e,t,n)=>{var r=e.r(662464),o=e.r(649720);function a(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.withCredentials=e.withCredentials,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.isReactNative=e.isReactNative,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}t.exports=a,o(a.prototype),a.prototype.onError=function(e,t){var n=Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},a.prototype.open=function(){return("closed"===this.readyState||""===this.readyState)&&(this.readyState="opening",this.doOpen()),this},a.prototype.close=function(){return("opening"===this.readyState||"open"===this.readyState)&&(this.doClose(),this.onClose()),this},a.prototype.send=function(e){if("open"===this.readyState)this.write(e);else throw Error("Transport not open")},a.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},a.prototype.onData=function(e){var t=r.decodePacket(e,this.socket.binaryType);this.onPacket(t)},a.prototype.onPacket=function(e){this.emit("packet",e)},a.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},745651,(e,t,n)=>{n.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},n.decode=function(e){for(var t={},n=e.split("&"),r=0,o=n.length;r<o;r++){var a=n[r].split("=");t[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return t}},101642,(e,t,n)=>{t.exports=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},462533,(e,t,n)=>{"use strict";var r,o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),a={},i=0,s=0;function c(e){var t="";do t=o[e%64]+t,e=Math.floor(e/64);while(e>0)return t}function u(){var e=c(+new Date);return e!==r?(i=0,r=e):e+"."+c(i++)}for(;s<64;s++)a[o[s]]=s;u.encode=c,u.decode=function(e){var t=0;for(s=0;s<e.length;s++)t=64*t+a[e.charAt(s)];return t},t.exports=u},62635,(e,t,n)=>{var r=e.r(365738);function o(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}t.exports=function(e,t){t=t||{};var n,a,i=void 0===e?"undefined":r._(e);if("string"===i&&e.length>0){var s=e;if(!((s=String(s)).length>100)){var c=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(s);if(c){var u=parseFloat(c[1]);switch((c[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*u;case"days":case"day":case"d":return 864e5*u;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*u;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*u;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*u;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return u;default:break}}}return}if("number"===i&&!1===isNaN(e)){return t.long?o(n=e,864e5,"day")||o(n,36e5,"hour")||o(n,6e4,"minute")||o(n,1e3,"second")||n+" ms":(a=e)>=864e5?Math.round(a/864e5)+"d":a>=36e5?Math.round(a/36e5)+"h":a>=6e4?Math.round(a/6e4)+"m":a>=1e3?Math.round(a/1e3)+"s":a+"ms"}throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},451634,(e,t,n)=>{var r=e.r(954546);function o(e){var t;function r(){if(r.enabled){var e=+new Date;r.diff=e-(t||e),r.prev=t,r.curr=e,t=e;for(var o=Array(arguments.length),a=0;a<o.length;a++)o[a]=arguments[a];o[0]=n.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var i=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(e,t){if("%%"===e)return e;i++;var a=n.formatters[t];if("function"==typeof a){var s=o[i];e=a.call(r,s),o.splice(i,1),i--}return e}),n.formatArgs.call(r,o),(r.log||n.log||console.log.bind(console)).apply(r,o)}}return r.namespace=e,r.enabled=n.enabled(e),r.useColors=n.useColors(),r.color=function(e){var t,r=0;for(t in e)r=(r<<5)-r+e.charCodeAt(t)|0;return n.colors[Math.abs(r)%n.colors.length]}(e),r.destroy=a,"function"==typeof n.init&&n.init(r),n.instances.push(r),r}function a(){var e=n.instances.indexOf(this);return -1!==e&&(n.instances.splice(e,1),!0)}(n=t.exports=o.debug=o.default=o).coerce=function(e){return r._(e,Error)?e.stack||e.message:e},n.disable=function(){n.enable("")},n.enable=function(e){n.save(e),n.names=[],n.skips=[];var t,r=("string"==typeof e?e:"").split(/[\s,]+/),o=r.length;for(t=0;t<o;t++)r[t]&&("-"===(e=r[t].replace(/\*/g,".*?"))[0]?n.skips.push(RegExp("^"+e.substr(1)+"$")):n.names.push(RegExp("^"+e+"$")));for(t=0;t<n.instances.length;t++){var a=n.instances[t];a.enabled=n.enabled(a.namespace)}},n.enabled=function(e){var t,r;if("*"===e[e.length-1])return!0;for(t=0,r=n.skips.length;t<r;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;t<r;t++)if(n.names[t].test(e))return!0;return!1},n.humanize=e.r(62635),n.instances=[],n.names=[],n.skips=[],n.formatters={}},635817,(e,t,n)=>{var r=e.i(33699),o=e.r(365738);function a(){var e;try{e=n.storage.debug}catch(e){}return!e&&void 0!==r.default&&"env"in r.default&&(e=r.default.env.DEBUG),e}(n=t.exports=e.r(451634)).log=function(){return"object"===("undefined"==typeof console?"undefined":o._(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},n.formatArgs=function(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+n.humanize(this.diff),t){var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var o=0,a=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(o++,"%c"===e&&(a=o))}),e.splice(a,0,r)}},n.save=function(e){try{null==e?n.storage.removeItem("debug"):n.storage.debug=e}catch(e){}},n.load=a,n.useColors=function(){return"undefined"!=typeof window&&!!window.process&&"renderer"===window.process.type||!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},n.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),n.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],n.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},n.enable(a())},462864,(e,t,n)=>{var r=e.r(711655),o=e.r(745651),a=e.r(662464),i=e.r(101642),s=e.r(462533),c=e.r(635817)("engine.io-client:polling");t.exports=l;var u=null!=new(e.r(778980))({xdomain:!1}).responseType;function l(e){var t=e&&e.forceBase64;(!u||t)&&(this.supportsBinary=!1),r.call(this,e)}i(l,r),l.prototype.name="polling",l.prototype.doOpen=function(){this.poll()},l.prototype.pause=function(e){var t=this;function n(){c("paused"),t.readyState="paused",e()}if(this.readyState="pausing",this.polling||!this.writable){var r=0;this.polling&&(c("we are currently polling - waiting to pause"),r++,this.once("pollComplete",function(){c("pre-pause polling complete"),--r||n()})),this.writable||(c("we are currently writing - waiting to pause"),r++,this.once("drain",function(){c("pre-pause writing complete"),--r||n()}))}else n()},l.prototype.poll=function(){c("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},l.prototype.onData=function(e){var t=this;c("polling got data %s",e),a.decodePayload(e,this.socket.binaryType,function(e,n,r){if("opening"===t.readyState&&"open"===e.type&&t.onOpen(),"close"===e.type)return t.onClose(),!1;t.onPacket(e)}),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():c('ignoring poll - transport state "%s"',this.readyState))},l.prototype.doClose=function(){var e=this;function t(){c("writing close packet"),e.write([{type:"close"}])}"open"===this.readyState?(c("transport open - closing"),t()):(c("transport not open - deferring close"),this.once("open",t))},l.prototype.write=function(e){var t=this;this.writable=!1;var n=function(){t.writable=!0,t.emit("drain")};a.encodePayload(e,this.supportsBinary,function(e){t.doWrite(e,n)})},l.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(e[this.timestampParam]=s()),this.supportsBinary||e.sid||(e.b64=1),e=o.encode(e),this.port&&("https"===t&&443!==Number(this.port)||"http"===t&&80!==Number(this.port))&&(n=":"+this.port),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e}},203240,(e,t,n)=>{var r=e.r(778980),o=e.r(462864),a=e.r(649720),i=e.r(101642),s=e.r(635817)("engine.io-client:polling-xhr"),c=e.r(540823);function u(){}function l(e){if(o.call(this,e),this.requestTimeout=e.requestTimeout,this.extraHeaders=e.extraHeaders,"undefined"!=typeof location){var t="https:"===location.protocol,n=location.port;n||(n=t?443:80),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||n!==e.port,this.xs=e.secure!==t}}function d(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.withCredentials=e.withCredentials,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}function h(){for(var e in d.requests)d.requests.hasOwnProperty(e)&&d.requests[e].abort()}t.exports=l,t.exports.Request=d,i(l,o),l.prototype.supportsBinary=!0,l.prototype.request=function(e){return(e=e||{}).uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.withCredentials=this.withCredentials,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new d(e)},l.prototype.doWrite=function(e,t){var n=this.request({method:"POST",data:e,isBinary:"string"!=typeof e&&void 0!==e}),r=this;n.on("success",t),n.on("error",function(e){r.onError("xhr post error",e)}),this.sendXhr=n},l.prototype.doPoll=function(){s("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},a(d.prototype),d.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new r(e),n=this;try{s("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var o in t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(o)&&t.setRequestHeader(o,this.extraHeaders[o])}catch(e){}if("POST"===this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{t.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in t&&(t.withCredentials=this.withCredentials),this.requestTimeout&&(t.timeout=this.requestTimeout),this.hasXDR()?(t.onload=function(){n.onLoad()},t.onerror=function(){n.onError(t.responseText)}):t.onreadystatechange=function(){if(2===t.readyState)try{var e=t.getResponseHeader("Content-Type");(n.supportsBinary&&"application/octet-stream"===e||"application/octet-stream; charset=UTF-8"===e)&&(t.responseType="arraybuffer")}catch(e){}4===t.readyState&&(200===t.status||1223===t.status?n.onLoad():setTimeout(function(){n.onError("number"==typeof t.status?t.status:0)},0))},s("xhr data %s",this.data),t.send(this.data)}catch(e){setTimeout(function(){n.onError(e)},0);return}"undefined"!=typeof document&&(this.index=d.requestsCount++,d.requests[this.index]=this)},d.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},d.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},d.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},d.prototype.cleanup=function(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=u:this.xhr.onreadystatechange=u,e)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete d.requests[this.index],this.xhr=null}},d.prototype.onLoad=function(){var e,t;try{try{t=this.xhr.getResponseHeader("Content-Type")}catch(e){}e=("application/octet-stream"===t||"application/octet-stream; charset=UTF-8"===t)&&this.xhr.response||this.xhr.responseText}catch(e){this.onError(e)}null!=e&&this.onData(e)},d.prototype.hasXDR=function(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR},d.prototype.abort=function(){this.cleanup()},d.requestsCount=0,d.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",h):"function"==typeof addEventListener&&addEventListener("onpagehide"in c?"pagehide":"unload",h,!1))},128822,(e,t,n)=>{var r,o=e.r(462864),a=e.r(101642),i=e.r(540823);t.exports=l;var s=/\n/g,c=/\\n/g;function u(){}function l(e){o.call(this,e),this.query=this.query||{},r||(r=i.___eio=i.___eio||[]),this.index=r.length;var t=this;r.push(function(e){t.onData(e)}),this.query.j=this.index,"function"==typeof addEventListener&&addEventListener("beforeunload",function(){t.script&&(t.script.onerror=u)},!1)}a(l,o),l.prototype.supportsBinary=!1,l.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),o.prototype.doClose.call(this)},l.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(t,n):(document.head||document.body).appendChild(t),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},l.prototype.doWrite=function(e,t){var n=this;if(!this.form){var r,o=document.createElement("form"),a=document.createElement("textarea"),i=this.iframeId="eio_iframe_"+this.index;o.className="socketio",o.style.position="absolute",o.style.top="-1000px",o.style.left="-1000px",o.target=i,o.method="POST",o.setAttribute("accept-charset","utf-8"),a.name="d",o.appendChild(a),document.body.appendChild(o),this.form=o,this.area=a}function u(){l(),t()}function l(){if(n.iframe)try{n.form.removeChild(n.iframe)}catch(e){n.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+n.iframeId+'">';r=document.createElement(e)}catch(e){(r=document.createElement("iframe")).name=n.iframeId,r.src="javascript:0"}r.id=n.iframeId,n.form.appendChild(r),n.iframe=r}this.form.action=this.uri(),l(),e=e.replace(c,"\\\n"),this.area.value=e.replace(s,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===n.iframe.readyState&&u()}:this.iframe.onload=u}},142222,(e,t,n)=>{var r,o,a=e.i(937500),i=e.r(711655),s=e.r(662464),c=e.r(745651),u=e.r(101642),l=e.r(462533),d=e.r(635817)("engine.io-client:websocket");if("undefined"!=typeof WebSocket?r=WebSocket:"undefined"!=typeof self&&(r=self.WebSocket||self.MozWebSocket),"undefined"==typeof window)try{o={}}catch(e){}var h=r||o;function p(e){e&&e.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=r&&!e.forceNode,this.protocols=e.protocols,this.usingBrowserWebSocket||(h=o),i.call(this,e)}t.exports=p,u(p,i),p.prototype.name="websocket",p.prototype.supportsBinary=!0,p.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=this.protocols,n={};this.isReactNative||(n.agent=this.agent,n.perMessageDeflate=this.perMessageDeflate,n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized),this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?t?new h(e,t):new h(e):new h(e,t,n)}catch(e){return this.emit("error",e)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},p.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},p.prototype.write=function(e){var t=this;this.writable=!1;for(var n=e.length,r=0,o=n;r<o;r++)!function(e){s.encodePacket(e,t.supportsBinary,function(r){if(!t.usingBrowserWebSocket){var o={};e.options&&(o.compress=e.options.compress),t.perMessageDeflate&&("string"==typeof r?a.Buffer.byteLength(r):r.length)<t.perMessageDeflate.threshold&&(o.compress=!1)}try{t.usingBrowserWebSocket?t.ws.send(r):t.ws.send(r,o)}catch(e){d("websocket closed before onclose event")}--n||(t.emit("flush"),setTimeout(function(){t.writable=!0,t.emit("drain")},0))})}(e[r])},p.prototype.onClose=function(){i.prototype.onClose.call(this)},p.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},p.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";return this.port&&("wss"===t&&443!==Number(this.port)||"ws"===t&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=l()),this.supportsBinary||(e.b64=1),(e=c.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e},p.prototype.check=function(){return!!h&&!("__initialize"in h&&this.name===p.prototype.name)}},885296,(e,t,n)=>{var r=e.r(778980),o=e.r(203240),a=e.r(128822),i=e.r(142222);n.polling=function(e){var t=!1,n=!1,i=!1!==e.jsonp;if("undefined"!=typeof location){var s="https:"===location.protocol,c=location.port;c||(c=s?443:80),t=e.hostname!==location.hostname||c!==e.port,n=e.secure!==s}if(e.xdomain=t,e.xscheme=n,"open"in new r(e)&&!e.forceJSONP)return new o(e);if(!i)throw Error("JSONP disabled");return new a(e)},n.websocket=i},435123,(e,t,n)=>{var r=[].indexOf;t.exports=function(e,t){if(r)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return -1}},541109,(e,t,n)=>{var r=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,o=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(e){var t,n,a,i,s,c,u=e,l=e.indexOf("["),d=e.indexOf("]");-1!=l&&-1!=d&&(e=e.substring(0,l)+e.substring(l,d).replace(/:/g,";")+e.substring(d,e.length));for(var h=r.exec(e||""),p={},f=14;f--;)p[o[f]]=h[f]||"";return -1!=l&&-1!=d&&(p.source=u,p.host=p.host.substring(1,p.host.length-1).replace(/;/g,":"),p.authority=p.authority.replace("[","").replace("]","").replace(/;/g,":"),p.ipv6uri=!0),t=0,a=(n=p.path).replace(/\/{2,9}/g,"/").split("/"),("/"==n.substr(0,1)||0===n.length)&&a.splice(0,1),"/"==n.substr(n.length-1,1)&&a.splice(a.length-1,1),p.pathNames=a,i=0,s=p.query,c={},s.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(e,t,n){t&&(c[t]=n)}),p.queryKey=c,p}},511353,(e,t,n)=>{var r=e.r(954546),o=e.r(365738),a=e.r(885296),i=e.r(649720),s=e.r(635817)("engine.io-client:socket"),c=e.r(435123),u=e.r(662464),l=e.r(541109),d=e.r(745651);function h(e,t){if(!r._(this,h))return new h(e,t);t=t||{},e&&"object"===(void 0===e?"undefined":o._(e))&&(t=e,e=null),e?(e=l(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=l(t.host).host),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=d.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.withCredentials=!1!==t.withCredentials,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.transportOptions=t.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate&&(t.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||void 0,this.key=t.key||void 0,this.passphrase=t.passphrase||void 0,this.cert=t.cert||void 0,this.ca=t.ca||void 0,this.ciphers=t.ciphers||void 0,this.rejectUnauthorized=void 0===t.rejectUnauthorized||t.rejectUnauthorized,this.forceNode=!!t.forceNode,this.isReactNative="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),("undefined"==typeof self||this.isReactNative)&&(t.extraHeaders&&Object.keys(t.extraHeaders).length>0&&(this.extraHeaders=t.extraHeaders),t.localAddress&&(this.localAddress=t.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}t.exports=h,h.priorWebsocketSuccess=!1,i(h.prototype),h.protocol=u.protocol,h.Socket=h,h.Transport=e.r(711655),h.transports=e.r(885296),h.parser=e.r(662464),h.prototype.createTransport=function(e){s('creating transport "%s"',e);var t=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(this.query);t.EIO=u.protocol,t.transport=e;var n=this.transportOptions[e]||{};return this.id&&(t.sid=this.id),new a[e]({query:t,socket:this,agent:n.agent||this.agent,hostname:n.hostname||this.hostname,port:n.port||this.port,secure:n.secure||this.secure,path:n.path||this.path,forceJSONP:n.forceJSONP||this.forceJSONP,jsonp:n.jsonp||this.jsonp,forceBase64:n.forceBase64||this.forceBase64,enablesXDR:n.enablesXDR||this.enablesXDR,withCredentials:n.withCredentials||this.withCredentials,timestampRequests:n.timestampRequests||this.timestampRequests,timestampParam:n.timestampParam||this.timestampParam,policyPort:n.policyPort||this.policyPort,pfx:n.pfx||this.pfx,key:n.key||this.key,passphrase:n.passphrase||this.passphrase,cert:n.cert||this.cert,ca:n.ca||this.ca,ciphers:n.ciphers||this.ciphers,rejectUnauthorized:n.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:n.perMessageDeflate||this.perMessageDeflate,extraHeaders:n.extraHeaders||this.extraHeaders,forceNode:n.forceNode||this.forceNode,localAddress:n.localAddress||this.localAddress,requestTimeout:n.requestTimeout||this.requestTimeout,protocols:n.protocols||void 0,isReactNative:this.isReactNative})},h.prototype.open=function(){var e;if(this.rememberUpgrade&&h.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else if(0===this.transports.length){var t=this;setTimeout(function(){t.emit("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch(e){this.transports.shift(),this.open();return}e.open(),this.setTransport(e)},h.prototype.setTransport=function(e){s("setting transport %s",e.name);var t=this;this.transport&&(s("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},h.prototype.probe=function(e){s('probing transport "%s"',e);var t=this.createTransport(e,{probe:1}),n=!1,r=this;function o(){if(r.onlyBinaryUpgrades){var o=!this.supportsBinary&&r.transport.supportsBinary;n=n||o}n||(s('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",function(o){if(!n)if("pong"===o.type&&"probe"===o.data){if(s('probe transport "%s" pong',e),r.upgrading=!0,r.emit("upgrading",t),!t)return;h.priorWebsocketSuccess="websocket"===t.name,s('pausing current transport "%s"',r.transport.name),r.transport.pause(function(){n||"closed"!==r.readyState&&(s("changing transport and sending upgrade packet"),d(),r.setTransport(t),t.send([{type:"upgrade"}]),r.emit("upgrade",t),t=null,r.upgrading=!1,r.flush())})}else{s('probe transport "%s" failed',e);var a=Error("probe error");a.transport=t.name,r.emit("upgradeError",a)}}))}function a(){n||(n=!0,d(),t.close(),t=null)}function i(n){var o=Error("probe error: "+n);o.transport=t.name,a(),s('probe transport "%s" failed because of error: %s',e,n),r.emit("upgradeError",o)}function c(){i("transport closed")}function u(){i("socket closed")}function l(e){t&&e.name!==t.name&&(s('"%s" works - aborting "%s"',e.name,t.name),a())}function d(){t.removeListener("open",o),t.removeListener("error",i),t.removeListener("close",c),r.removeListener("close",u),r.removeListener("upgrading",l)}h.priorWebsocketSuccess=!1,t.once("open",o),t.once("error",i),t.once("close",c),this.once("close",u),this.once("upgrading",l),t.open()},h.prototype.onOpen=function(){if(s("socket open"),this.readyState="open",h.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){s("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},h.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(s('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else s('packet received with socket readyState "%s"',this.readyState)},h.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},h.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!==t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},h.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){s("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},h.prototype.ping=function(){var e=this;this.sendPacket("ping",function(){e.emit("ping")})},h.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},h.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(s("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},h.prototype.write=h.prototype.send=function(e,t,n){return this.sendPacket("message",e,t,n),this},h.prototype.sendPacket=function(e,t,n,r){if("function"==typeof t&&(r=t,t=void 0),"function"==typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var o={type:e,data:t,options:n};this.emit("packetCreate",o),this.writeBuffer.push(o),r&&this.once("flush",r),this.flush()}},h.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var e=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?r():t()}):this.upgrading?r():t()}function t(){e.onClose("forced close"),s("socket closing - telling transport to close"),e.transport.close()}function n(){e.removeListener("upgrade",n),e.removeListener("upgradeError",n),t()}function r(){e.once("upgrade",n),e.once("upgradeError",n)}return this},h.prototype.onError=function(e){s("socket error %j",e),h.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},h.prototype.onClose=function(e,t){("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)&&(s('socket close with reason: "%s"',e),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)},h.prototype.filterUpgrades=function(e){for(var t=[],n=0,r=e.length;n<r;n++)~c(this.transports,e[n])&&t.push(e[n]);return t}},813288,(e,t,n)=>{t.exports=e.r(511353),t.exports.parser=e.r(662464)},649051,(e,t,n)=>{"use strict";var r=e.r(883735),o=e.r(619314),a=e.r(5044),i=e.e&&e.e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),c=e.e&&e.e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return s(t,e),t},u=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.EIOCompat=n.createCloseEvent=n.splitHref=void 0;var l=u(e.r(813288)),d=c(e.r(315358));function h(e){var t=d.parse(e),n=t.protocol,r=t.slashes,o=t.auth,a=t.host,i=t.pathname;return{uri:d.format({protocol:n,slashes:r,auth:o,host:a,query:{ordered:"1"}}),path:null!=i?i:"/"}}n.splitHref=h;var p=new Map([["opening",0],["open",1],["closing",2],["closed",3]]);function f(e){return"undefined"!=typeof window?new MessageEvent("message",{data:e}):{type:"message",data:e}}function g(e){return"undefined"!=typeof window?new CloseEvent("close",e):a._({type:"close"},e)}function y(e,t){return"undefined"!=typeof window?new Event(e,t):a._({type:e},t)}n.createCloseEvent=g;var v=function(){function e(t,n){var o=this;if(r._(this,e),this.CLOSED=3,this.CLOSING=2,this.OPEN=1,this.CONNECTING=0,n)throw Error("Passing protocols is not implemented");var a=h(t),i=a.uri,s=a.path;this.onopen=null,this.onclose=null,this.onmessage=null,this.onerror=null,this.eioSocket=(0,l.default)(i,{path:s,transports:["polling"]}),this.url=t,this.extensions="",this.protocol="",this.bufferedAmount=0,this.readyState=0,this.incomingSequence=0,this.outOfOrderQueue={},this.outgoingSequence=0,this.setReadyState(),this.eioSocket.on("open",function(){if(o.setReadyState(),null!=o.onopen){var e=y("open");o.onopen.call(o,e)}}),this.eioSocket.on("close",function(e){if(o.setReadyState(),null!=o.onclose){var t=g({reason:e,code:1001,wasClean:!1});o.onclose.call(o,t)}}),this.eioSocket.on("message",function(e){if(o.setReadyState(),null!=o.onmessage){if("string"==typeof e)throw Error("expected data to be ArrayBuffer not string");var t=new DataView(e).getUint32(0),n=e.slice(4);if(o.incomingSequence!==t){o.outOfOrderQueue[t]=n;return}o.incomingSequence=t+1;var r=f(n),a=o.onmessage.bind(o);a(r);var i=Object.keys(o.outOfOrderQueue);i.length>0&&(i.sort().forEach(function(e){a(f(o.outOfOrderQueue[+e])),o.incomingSequence=+e+1}),o.outOfOrderQueue={})}}),this.eioSocket.on("error",function(){if(o.setReadyState(),null!=o.onerror){var e=y("error");o.onerror.call(o,e)}})}return o._(e,[{key:"setReadyState",value:function(){this.readyState=p.get(this.eioSocket.readyState)}},{key:"send",value:function(e){var t=new ArrayBuffer(4+e.byteLength);new Uint8Array(t).set(new Uint8Array(e),4),new DataView(t).setUint32(0,this.outgoingSequence),this.outgoingSequence+=1,this.eioSocket.send(t),this.setReadyState()}},{key:"close",value:function(){this.onmessage=null,this.eioSocket.close(),this.setReadyState()}},{key:"addEventListener",value:function(){throw Error("Not Implemented, please use onmessage, onopen, onerror, or onclose")}},{key:"removeEventListener",value:function(){throw Error("Not Implemented")}},{key:"dispatchEvent",value:function(){throw Error("Not Implemented")}},{key:"binaryType",get:function(){return this.eioSocket.binaryType||"blob"},set:function(e){this.eioSocket.binaryType=e}}]),e}();n.EIOCompat=v,v.CLOSED=3,v.CLOSING=2,v.OPEN=1,v.CONNECTING=0},709933,(e,t,n)=>{"use strict";var r,o,a,i;Object.defineProperty(n,"__esModule",{value:!0}),n.CloseCode=n.ChannelRequestPriority=n.ClientCloseReason=n.FetchConnectionMetadataError=n.ConnectionState=void 0,(r=n.ConnectionState||(n.ConnectionState={}))[r.CONNECTING=0]="CONNECTING",r[r.CONNECTED=1]="CONNECTED",r[r.DISCONNECTED=2]="DISCONNECTED",(o=n.FetchConnectionMetadataError||(n.FetchConnectionMetadataError={})).Aborted="Aborted",o.Retriable="Retriable",(a=n.ClientCloseReason||(n.ClientCloseReason={})).Intentional="Intentional",a.Temporary="Temporary",a.Disconnected="Disconnected",a.ErrorOrDestroy="ErrorOrDestroy",(i=n.ChannelRequestPriority||(n.ChannelRequestPriority={}))[i.High=0]="High",i[i.Medium=1]="Medium",i[i.Low=2]="Low",n.CloseCode={INVALID_UPSTREAM_RESPONSE:1014,POLICY_VIOLATION:1008,FIREWALL_DENIED:4e3,TRY_ANOTHER_MACHINE:4001,USER_ERROR:4002,CONCURRENT_REPL_LIMIT:4004}},668947,(e,t,n)=>{"use strict";var r=e.r(529405),o=e.r(883735),a=e.r(954546),i=e.r(5044),s=e.r(23256),c=e.r(365738),u=e.r(745291),l=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.Client=n.sortByPriority=void 0;var d=e.r(626430),h=e.r(41597),p=e.r(673184),f=e.r(649051),g=e.r(709933),y=l(e.r(316237));function v(e,t){return e.priority-t.priority}n.sortByPriority=v,n.Client=function e(){var t=this,n=this;o._(this,e),this.open=function(e,n){if(t.chan0Cb){var r=new y.default("You must call `close` before opening the client again");throw t.onUnrecoverableError(r),r}if(t.destroyed){var o=new y.default("Client has been destroyed and cannot be re-used");throw t.onUnrecoverableError(o),o}t.connectionId++,t.connectOptions=i._({timeout:1e4,reuseConnectionMetadata:!1,getNextRetryDelayMs:p.defaultGetNextRetryDelay},e),t.debug({type:"breadcrumb",message:"status:open"}),t.chan0Cb=n,t.connect({tryCount:0,websocketFailureCount:0,connectionId:t.connectionId})},this.openChannel=function(e,n){var r,o=e.name?t.channelRequests.filter(function(t){return t.options.name===e.name}):[];if(o.some(function(e){return!e.closeRequested})){var a=new y.default("Channel with name ".concat(e.name," already opened"));throw t.onUnrecoverableError(a),a}if(t.destroyed){var i=new y.default("Client has been destroyed and is unusable");throw t.onUnrecoverableError(i),i}var s={options:e,openChannelCb:n,isOpen:!1,channelId:null,cleanupCb:null,closeRequested:!1,priority:null!=(r=e.priority)?r:g.ChannelRequestPriority.Medium};return t.channelRequests.push(s),t.channelRequests.sort(v),t.getConnectionState()!==g.ConnectionState.CONNECTED||o.length?t.debug({type:"breadcrumb",message:"client:openChannel:delayed",data:{connectionState:t.getConnectionState(),service:s.options.service,name:s.options.name}}):t.requestOpenChannel(s),function(){if(s.closeRequested)return void t.debug({type:"breadcrumb",message:"client:closeChannel:already requested",data:{channelId:s.channelId,service:s.options.service,name:s.options.name}});if(s.closeRequested=!0,!s.isOpen){t.debug({type:"breadcrumb",message:"client:closeChannel:channel not open",data:{connectionState:t.getConnectionState(),channelId:s.channelId,service:s.options.service,name:s.options.name}}),t.getConnectionState()!==g.ConnectionState.CONNECTED&&(t.channelRequests=t.channelRequests.filter(function(e){return e!==s}));return}t.requestCloseChannel(s)}},this.requestOpenChannel=function(e){var n=e.options,r=e.openChannelCb;if(!t.connectOptions)return void t.onUnrecoverableError(new y.default("Expected connectionOptions"));var o=n.skip;if(o&&o(t.connectOptions.context))return void t.debug({type:"breadcrumb",message:"requestOpenChannel:explicit skip",data:{service:n.service,name:n.name}});var a=n.action;if(a||(a=null==n.name?d.api.OpenChannel.Action.CREATE:d.api.OpenChannel.Action.ATTACH_OR_CREATE),e.channelId)return void t.onUnrecoverableError(new y.default("Unexpected channelId"));var i="string"==typeof n.service?n.service:n.service(t.connectOptions.context),s=Number(Math.random().toString().split(".")[1]).toString(36);t.debug({type:"breadcrumb",message:"requestOpenChannel",data:{name:n.name,service:i,action:a,ref:s}});var c=t.getChannel(0);c.send({ref:s,openChan:{name:n.name,service:i,action:a}});var u=c.onCommand(function(n){if(s===n.ref){if(u(),null==n.openChanRes)return void t.onUnrecoverableError(new y.default("Expected openChanRes on command"));var o=n.openChanRes,a=o.id,c=o.state,l=o.error;if(t.debug({type:"breadcrumb",message:"requestOpenChannel:openChanRes",data:{id:a,state:c,error:l,ref:s}}),!t.connectOptions)return void t.onUnrecoverableError(new y.default("Expected connectionOptions"));if(c===d.api.OpenChannelRes.State.ERROR)return void t.onUnrecoverableError(new y.default("Channel open resulted with an error: ".concat(l||"with no message")));if("number"!=typeof a||"number"!=typeof c)return void t.onUnrecoverableError(new y.default("Expected state and channel id"));if(null!=t.channels[a])return void t.onUnrecoverableError(new y.default("Channel with id ".concat(a," already exists")));var p=new h.Channel({id:a,name:e.options.name,service:i,onUnrecoverableError:t.onUnrecoverableError,send:t.send});if(t.channels[a]=p,e.channelId=a,e.isOpen=!0,e.closeRequested)return void t.requestCloseChannel(e);e.cleanupCb=r({channel:p,context:t.connectOptions.context})}})},this.requestCloseChannel=function(e){return r._(function(){var t,n,r,o,a,i;return u._(this,function(s){switch(s.label){case 0:if(!e.isOpen)return this.onUnrecoverableError(new y.default("Tried to request a channel close before opening")),[2];if(t=e.channelId,(n=this.getChannel(e.channelId)).status="closing",!(r=this.getChannel(0)))return this.onUnrecoverableError(new y.default("Tried to request a channel close but there was no chan0")),[2];return this.debug({type:"breadcrumb",message:"requestCloseChannel",data:{id:t,name:e.options.name,service:e.options.service}}),[4,r.request({closeChan:{action:d.api.CloseChannel.Action.TRY_CLOSE,id:e.channelId}})];case 1:if((o=s.sent()).channelClosed)this.debug({type:"breadcrumb",message:"requestCloseChannel:chan0Closed",data:{id:t,name:e.options.name,service:e.options.service}});else{if(null==o.closeChanRes)return this.onUnrecoverableError(new y.default("Expected closeChanRes")),[2];if(null==(a=o.closeChanRes.id))return this.onUnrecoverableError(new y.default("Expected id, got ".concat(a))),[2];if(a!==t)return this.onUnrecoverableError(new y.default("Expected id from closeChanRes to be ".concat(t," got ").concat(a))),[2];this.debug({type:"breadcrumb",message:"requestCloseChannel:closeChanRes",data:{id:t,name:e.options.name,service:e.options.service,closeStatus:o.closeChanRes.status}})}if(this.channelRequests=this.channelRequests.filter(function(t){return t!==e}),delete this.channels[t],n.handleClose({initiator:"channel",willReconnect:!1}),e.cleanupCb&&e.cleanupCb({initiator:"channel",willReconnect:!1}),!e.options.name||this.connectionState!==g.ConnectionState.CONNECTED||!(i=this.channelRequests.find(function(t){return t.options.name===e.options.name})))return[2];return this.requestOpenChannel(i),[2]}})}).call(t)},this.close=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{expectReconnect:!1}).expectReconnect;if(!n.destroyed){if(n.debug({type:"breadcrumb",message:e?"close:temporary":"close:intentional"}),!n.chan0Cb||!n.connectOptions){var t=new y.default("Must call client.open before closing");throw n.onUnrecoverableError(t),t}n.connectionMetadata=null,n.handleClose(e?g.ClientCloseReason.Temporary:g.ClientCloseReason.Intentional)}},this.destroy=function(){t.destroyed||(t.destroyed=!0,t.debug({type:"breadcrumb",message:"status:destroy"}),t.handleClose(g.ClientCloseReason.ErrorOrDestroy),t.debug=function(){},t.connectionStateChangeFuncs=[],t.userUnrecoverableErrorHandler=null,t.channelRequests=[],t.destroyed=!0)},this.getChannel=function(e){var n=t.channels[e];if(!n){var r=new y.default("No channel with number ".concat(e));throw t.onUnrecoverableError(r),r}return n},this.debug=function(e){t.debugFuncs.forEach(function(t){return t(e)})},this.onDebugLog=function(e){return t.debugFuncs.push(e),function(){var n=t.debugFuncs.indexOf(e);n>-1&&t.debugFuncs.splice(n,1)}},this.setConnectionState=function(e){t.connectionState=e,setTimeout(function(){t.connectionStateChangeFuncs.forEach(function(t){return t(e)})},0)},this.onConnectionStateChange=function(e){return t.connectionStateChangeFuncs.push(e),function(){var n=t.connectionStateChangeFuncs.indexOf(e);n>-1&&t.connectionStateChangeFuncs.splice(n,1)}},this.getConnectionState=function(){return t.connectionState},this.onBootStatus=function(e){return t.bootStatusFuncs.push(e),function(){var n=t.bootStatusFuncs.indexOf(e);n>-1&&t.bootStatusFuncs.splice(n,1)}},this.onFirewallDenied=function(){t.onUnrecoverableError(new y.default("Can't connect to unfirewalled repl from firewall mode"))},this.setUnrecoverableErrorHandler=function(e){t.userUnrecoverableErrorHandler=e},this.getConnectionMetadata=function(){return t.connectionMetadata},this.connect=function(e){var n=e.tryCount,o=e.websocketFailureCount,l=e.connectionId;return r._(function(){var e,t,r,v,m,b,C,w,E,S,O,k,R,x,_,T,A,P,U,M,N,I,F;return u._(this,function(u){switch(u.label){case 0:if(e=this,t=this,this.debug({type:"breadcrumb",message:"status:connecting",data:{connectionState:this.connectionState,connectTries:n,websocketFailureCount:o,readyState:this.ws?this.ws.readyState:void 0,chan0CbExists:!!this.chan0Cb}}),this.getConnectionState()!==g.ConnectionState.DISCONNECTED)throw r=new y.default("Client must be disconnected to connect"),this.onUnrecoverableError(r),r;if(this.ws)throw v=new y.default("Unexpected existing websocket instance"),this.onUnrecoverableError(v),v;if(!this.connectOptions)throw m=new y.default("Expected connectionOptions"),this.onUnrecoverableError(m),m;if(!this.chan0Cb)return this.onUnrecoverableError(new y.default("Expected chan0Cb")),[2];if(this.chan0CleanupCb)return this.onUnrecoverableError(new y.default("Unexpected chan0CleanupCb, are you sure you closed")),[2];if(this.channelRequests.some(function(e){return e.isOpen}))return this.onUnrecoverableError(new y.default("All channels should be closed when we connect")),[2];if(Object.keys(this.channels).length)return this.onUnrecoverableError(new y.default("Found an an unexpected existing channels")),[2];if(this.connectTimeoutId)return this.onUnrecoverableError(new y.default("Unexpected connectTimeoutId")),[2];if(this.setConnectionState(g.ConnectionState.CONNECTING),b=new h.Channel({id:0,name:"chan0",service:"chan0",onUnrecoverableError:this.onUnrecoverableError,send:this.send}),this.channels[0]=b,b.onCommand(function(t){var n=t.bootStatus;null!=n&&e.bootStatusFuncs.forEach(function(e){return e(n)})}),b.onCommand(function(t){var n=t.redirect;if(null!=n)return e.handleRedirect(n.url)}),!(!this.connectOptions.reuseConnectionMetadata||null===this.connectionMetadata))return[3,5];if(this.fetchTokenAbortControllers.get(l))return this.onUnrecoverableError(new y.default("Expected fetchTokenAbortController to be null")),[2];C=new AbortController,this.fetchTokenAbortControllers.set(l,C),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,this.connectOptions.fetchConnectionMetadata(C.signal)];case 2:return w=u.sent(),[3,4];case 3:return E=u.sent(),S=a._(E,y.default)?E:new y.default(a._(E,Error)?E.message:E&&(void 0===E?"undefined":c._(E))==="object"&&"message"in E&&"string"==typeof E.message?E.message:"string"==typeof E?E:"Unknown error when fetching connection metadata"),S=new y.default(S.message,s._(i._({},S.extras),{from:"fetchConnectionMetadata"}),S.tags),this.onUnrecoverableError(S),[2];case 4:if(this.fetchTokenAbortControllers.delete(l),O=w,C.signal.aborted)return[2];if(O.error===g.FetchConnectionMetadataError.Aborted)return this.onUnrecoverableError(new y.default("Client received abort from fetchConnectionMetadata, but the request was not aborted.")),[2];if(O.error===g.FetchConnectionMetadataError.Retriable)return this.retryConnect({tryCount:n+1,websocketFailureCount:o,chan0:b,error:new y.default("Retriable error"),connectionId:l}),[2];if(this.getConnectionState()!==g.ConnectionState.CONNECTING)return this.onUnrecoverableError(new y.default("Client entered wrong state during connect(); connected="+(this.getConnectionState()===g.ConnectionState.CONNECTED?"true":"false"))),[2];if(O.error)return this.onUnrecoverableError(y.default.fromError(O.error)),[2];this.connectionMetadata=O,u.label=5;case 5:return 3===o&&this.connectOptions.pollingHost&&this.debug({type:"breadcrumb",message:"websocket:polling fallback"}),(x=new(R=(k=o>=3&&this.connectOptions.pollingHost)?f.EIOCompat:(0,p.getWebSocketClass)(this.connectOptions.WebSocketClass))((0,p.getConnectionStr)(this.connectionMetadata,k?this.connectOptions.pollingHost:void 0))).binaryType="arraybuffer",x.onmessage=this.onSocketMessage,this.ws=x,_=!1,T=!1,A=null,x.onerror=function(){A?A(new y.default("WebSocket errored")):e.onUnrecoverableError(new y.default("Got websocket error but no `onFailed` cb"))},x.onclose=function(t){if(!A)return void e.onUnrecoverableError(new y.default("Got websocket closure but no `onFailed` cb"));var n=!0,r="WebSocket closed before we got READY";R===f.EIOCompat?T||(e.connectionMetadata=null):"code"in t&&(t.code===g.CloseCode.POLICY_VIOLATION?e.connectionMetadata=null:t.code===g.CloseCode.USER_ERROR?(r="Repl not allowed to run at this time. Please try again later.",n=!1):t.code===g.CloseCode.FIREWALL_DENIED?(r="Can't connect to unfirewalled repl from firewall mode",n=!1):t.code===g.CloseCode.CONCURRENT_REPL_LIMIT&&(r="You have reached the concurrent Repl limit. Please shut down other Repls.",n=!1)),A(new y.default(r),n)},x.onopen=function(){R!==f.EIOCompat&&(_=!0)},P=function(){},U=function(){},null!==(M=this.connectOptions.timeout)&&(U=function(){e.debug({type:"breadcrumb",message:"timeout:cancel"}),e.connectTimeoutId&&(clearTimeout(e.connectTimeoutId),e.connectTimeoutId=null)},(P=function(){e.debug({type:"breadcrumb",message:"timeout:reset"}),e.connectTimeoutId&&clearTimeout(e.connectTimeoutId),e.connectTimeoutId=setTimeout(function(){(e.debug({type:"breadcrumb",message:"timeout:hit"}),A)?A(new y.default("timeout")):e.onUnrecoverableError(new y.default("Connecting timed out but there was no `onFailed` cb"))},M)})()),N=b.onCommand(function(t){if(T=!0,P(),null!=t.firewallDenied)return void e.onFirewallDenied();if(null!=t.containerState){if(null==t.containerState.state)return void e.onUnrecoverableError(new y.default("Got containerState but state was not defined"));var n=t.containerState.state;e.debug({type:"breadcrumb",message:"container:state",data:n});var r=d.api.ContainerState.State;switch(n){case r.READY:N(),U(),e.handleConnect(b);break;case r.SLEEP:if(!A)return void e.onUnrecoverableError(new y.default("Got SLEEP but there was no `onFailed` cb"));A(new y.default("Got SLEEP as container state"))}}}),I=this.getChannel(0),F=this.connectOptions,A=function(e){var r=!(arguments.length>1)||void 0===arguments[1]||arguments[1];(A=null,t.cleanupSocket(),U(),N(),t.connectOptions!==F||t.getChannel(0)!==I)?t.onUnrecoverableError(new y.default("onFailed got called but client is in a different connecting context")):r?t.retryConnect({tryCount:n+1,websocketFailureCount:_?0:o+1,chan0:b,error:e,connectionId:l}):t.onUnrecoverableError(e)},[2]}})}).call(t)},this.retryConnect=function(e){var n=e.tryCount,r=e.websocketFailureCount,o=e.chan0,a=e.error,i=e.connectionId;return t.retryTimeoutId?void t.onUnrecoverableError(new y.default("Unexpected existing retryTimeoutId")):t.chan0Cb?t.connectOptions?n>=10&&t.redirectInitiatorURL?(t.debug({type:"breadcrumb",message:"client:redirectInitiatorFallback",data:{connectionState:t.connectionState,connectTries:n,websocketFailureCount:r,error:a,wsReadyState:t.ws?t.ws.readyState:void 0}}),t.redirectInitiatorFallback()):void(t.retryTimeoutId=setTimeout(function(){t.chan0Cb?(t.retryTimeoutId=null,t.debug({type:"breadcrumb",message:"status:retrying",data:{connectionState:t.connectionState,connectTries:n,websocketFailureCount:r,error:a,wsReadyState:t.ws?t.ws.readyState:void 0}}),o.handleClose({initiator:"client",willReconnect:!0}),delete t.channels[0],t.setConnectionState(g.ConnectionState.DISCONNECTED),t.connect({tryCount:n,websocketFailureCount:r,connectionId:i})):t.onUnrecoverableError(new y.default("Scheduled retry is called after we closed?"))},t.connectOptions.getNextRetryDelayMs(n))):void t.onUnrecoverableError(new y.default("Expected connectOptions when scheduling a retry")):void t.onUnrecoverableError(new y.default("Expected chan0Cb when scheduling a retry"))},this.send=function(e){var n=t.getChannel(e.channel);t.debug({type:"log",log:{direction:"out",channel:{id:e.channel,name:n.name,service:n.service},cmd:e}});var r=d.api.Command.encode(e).finish(),o=r.buffer.slice(r.byteOffset,r.byteOffset+r.length);null==t.ws?t.onUnrecoverableError(new y.default("Calling send on a closed client")):t.ws.send(o)},this.onSocketMessage=function(e){var n=new Uint8Array(e.data),r=d.api.Command.decode(n),o=t.getChannel(r.channel);t.debug({type:"log",log:{direction:"in",channel:{id:r.channel,name:o.name,service:o.service},cmd:r}}),o.handleCommand(r)},this.handleConnect=function(e){if(!t.ws)return void t.onUnrecoverableError(new y.default("Expected Websocket instance"));if(!t.connectOptions)return void t.onUnrecoverableError(new y.default("Expected connectionOptions"));if(!e)return void t.onUnrecoverableError(new y.default("Expected chan0 to be truthy"));if(!t.chan0Cb)return void t.onUnrecoverableError(new y.default("Expected chan0Cb to be truthy"));var n=function(e){t.getConnectionState()===g.ConnectionState.DISCONNECTED?t.onUnrecoverableError(new y.default("Got a close event on socket but client is in disconnected state")):(t.debug({type:"breadcrumb",message:"websocket:close",data:{event:e}}),t.handleClose(g.ClientCloseReason.Disconnected))};t.ws.onclose=n,t.ws.onerror=n;var r=t.close;t.close=function(e){return setTimeout(function(){r(e)},0)},t.setConnectionState(g.ConnectionState.CONNECTED),t.debug({type:"breadcrumb",message:"status:connected"}),t.channelRequests.forEach(function(e){t.requestOpenChannel(e)}),t.chan0CleanupCb=t.chan0Cb({channel:e,context:t.connectOptions.context}),t.close=r},this.handleClose=function(e){if(e!==g.ClientCloseReason.ErrorOrDestroy){if(t.getConnectionState()===g.ConnectionState.DISCONNECTED)return void t.onUnrecoverableError(new y.default("handleClose is called but client already disconnected"));var n=t.fetchTokenAbortControllers.get(t.connectionId);if(t.ws&&n)return void t.onUnrecoverableError(new y.default("fetchTokenAbortController and websocket exist simultaneously"))}t.debug({type:"breadcrumb",message:"client:handleClose",data:{closeReason:e,connectionState:t.getConnectionState()}}),t.cleanupSocket(),t.retryTimeoutId&&(clearTimeout(t.retryTimeoutId),t.retryTimeoutId=null),t.connectTimeoutId&&(clearTimeout(t.connectTimeoutId),t.connectTimeoutId=null);var r=t.fetchTokenAbortControllers.get(t.connectionId);r&&(r.abort(),t.fetchTokenAbortControllers.delete(t.connectionId));var o=e===g.ClientCloseReason.Disconnected||e===g.ClientCloseReason.Temporary;if(t.channelRequests.forEach(function(e){var n=o&&!e.closeRequested;t.debug({type:"breadcrumb",message:"client:handleClose:closing channel",data:{channelId:e.channelId,service:e.options.service,name:e.options.name,closeRequested:e.closeRequested,channelRequestIsOpen:e.isOpen,willChannelReconnect:n,hasWs:!!t.ws}}),e.isOpen&&(t.getChannel(e.channelId).handleClose({initiator:"client",willReconnect:n}),delete t.channels[e.channelId]);var r=e.cleanupCb,a=e.closeRequested;e.channelId=null,e.isOpen=!1,e.cleanupCb=null,e.closeRequested=!1,r&&r({initiator:"client",willReconnect:n}),(a||e.closeRequested)&&(t.channelRequests=t.channelRequests.filter(function(t){return t!==e}))}),t.channels[0]&&(t.channels[0].handleClose({initiator:"client",willReconnect:o}),delete t.channels[0]),0!==Object.keys(t.channels).length){var a=!0,i=!1,s=void 0;try{for(var c,u=Object.values(t.channels)[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var l=c.value;t.debug({type:"breadcrumb",message:"client:handleClose:out of sync",data:{channelId:l.id,status:l.status,service:l.service,name:l.name}})}}catch(e){i=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(i)throw s}}t.channels={},t.onUnrecoverableError(new y.default("channels out of sync, should have been cleaned up by channelRequests"));return}if(t.chan0CleanupCb)t.chan0CleanupCb({initiator:"client",willReconnect:o}),t.chan0CleanupCb=null;else if(!t.chan0Cb&&e!==g.ClientCloseReason.ErrorOrDestroy)return void t.onUnrecoverableError(new y.default("`open` should have been called before `handleClose` (no cleanup or callback function, "+(o?"would reconnect":"would not reconnect")+")",{closeReason:e,connectionState:t.getConnectionState()}));if(t.setConnectionState(g.ConnectionState.DISCONNECTED),!o){t.chan0Cb=null,t.connectOptions=null,t.debug({type:"breadcrumb",message:"status:closed"});return}t.debug({type:"breadcrumb",message:"status:reconnecting"}),t.connectionId++,t.connect({tryCount:0,websocketFailureCount:0,connectionId:t.connectionId})},this.cleanupSocket=function(){var e=t.ws;t.debug({type:"breadcrumb",message:"websocket:cleanup",data:{hasWs:!!e,readyState:e?e.readyState:null,connectionState:t.connectionState}}),e&&(t.ws=null,e.onmessage=null,e.onclose=null,e.onopen=null,e.onerror=function(){},(0===e.readyState||1===e.readyState)&&(t.debug({type:"breadcrumb",message:"websocket:close"}),e.close()))},this.onUnrecoverableError=function(e){if(t.debug({type:"breadcrumb",message:"onUnrecoverableError",data:{message:e.message}}),t.redirectInitiatorURL=null,t.getConnectionState()!==g.ConnectionState.DISCONNECTED)try{t.handleClose(g.ClientCloseReason.ErrorOrDestroy)}catch(e){console.error("handleClose errored during unrecoverable error"),console.error(e)}if(t.userUnrecoverableErrorHandler)return void t.userUnrecoverableErrorHandler(e);throw console.error("Please supply your own unrecoverable error handling function"),e},this.redirectInitiatorFallback=function(){if(!t.connectionMetadata)return t.onUnrecoverableError(new y.default("client's connectionMetadata is null when redirecting to initiator"));if(!t.connectOptions)return t.onUnrecoverableError(new y.default("client's connectOptions is null when redirecting to initiator"));if(!t.chan0Cb)return t.onUnrecoverableError(new y.default("client's chan0Cb is null when redirecting to initiator"));var e=t.connectOptions.context,n=t.chan0Cb,r={token:t.connectionMetadata.token,conmanURL:t.connectionMetadata.conmanURL,gurl:t.connectionMetadata.gurl,dotdevHostname:t.connectionMetadata.dotdevHostname};t.redirectInitiatorURL=null;var o=i._({error:null},r);t.close(),t.open({fetchConnectionMetadata:function(){return Promise.resolve(o)},WebSocketClass:WebSocket,context:e},n)},this.handleRedirect=function(e){if(t.debug({type:"breadcrumb",message:"client:handleRedirect",data:{connectionMetadata:t.connectionMetadata}}),!t.connectionMetadata)return t.onUnrecoverableError(new y.default("client's connectionMetadata is null when redirecting"));if(!t.connectOptions)return t.onUnrecoverableError(new y.default("client's connectOptions is null when redirecting"));if(!t.chan0Cb)return t.onUnrecoverableError(new y.default("client's chan0Cb is null when redirecting"));var n=t.connectOptions.context,r=t.chan0Cb,o={token:t.connectionMetadata.token,conmanURL:t.connectionMetadata.conmanURL,gurl:e,dotdevHostname:t.connectionMetadata.dotdevHostname};t.redirectInitiatorURL=t.connectionMetadata.gurl;var a=i._({error:null},o);t.close(),t.open({fetchConnectionMetadata:function(){return Promise.resolve(a)},WebSocketClass:WebSocket,context:n},r)},this.ws=null,this.channels={},this.connectOptions=null,this.chan0Cb=null,this.chan0CleanupCb=null,this.connectionState=g.ConnectionState.DISCONNECTED,this.connectionStateChangeFuncs=[],this.debugFuncs=[],this.bootStatusFuncs=[],this.userUnrecoverableErrorHandler=null,this.channelRequests=[],this.retryTimeoutId=null,this.connectTimeoutId=null,this.fetchTokenAbortControllers=new Map,this.destroyed=!1,this.connectionMetadata=null,this.redirectInitiatorURL=null,this.connectionId=0,this.debug({type:"breadcrumb",message:"constructor"})}},530448,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ChannelRequestPriority=n.ConnectionState=n.FetchConnectionMetadataError=n.Channel=n.Client=void 0,e.r(193283);var r=e.r(668947);Object.defineProperty(n,"Client",{enumerable:!0,get:function(){return r.Client}});var o=e.r(41597);Object.defineProperty(n,"Channel",{enumerable:!0,get:function(){return o.Channel}});var a=e.r(709933);Object.defineProperty(n,"FetchConnectionMetadataError",{enumerable:!0,get:function(){return a.FetchConnectionMetadataError}}),Object.defineProperty(n,"ConnectionState",{enumerable:!0,get:function(){return a.ConnectionState}}),Object.defineProperty(n,"ChannelRequestPriority",{enumerable:!0,get:function(){return a.ChannelRequestPriority}})},866408,e=>{"use strict";var t=e.i(152659);function n(){return new t.EventEmitter}function r(e,t){return function(n){return e.on(t,n),function(){e.off(t,n)}}}e.s(["createAddListener",()=>r,"default",()=>n])},104375,e=>{"use strict";var t=e.i(297083),n=e.i(817556);e.i(208814);var r=e.i(663457),o=e.i(7433),a="repl.it-web",i=r.trace.getTracer(a);function s(e,o,a){return(0,t._)(function(){var t,s;return(0,n._)(this,function(n){switch(n.label){case 0:t=i.startSpan(o,void 0,e),s=r.trace.setSpan(e,t),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,a(s)];case 2:return[2,n.sent()];case 3:return t.end(),[7];case 4:return[2]}})})()}function c(e,o,a){return(0,t._)(function(){var t,s;return(0,n._)(this,function(n){switch(n.label){case 0:if(void 0!==e)return[3,2];return[4,a()];case 1:return[2,n.sent()];case 2:t=i.startSpan(o,void 0,e),s=r.trace.setSpan(e,t),n.label=3;case 3:return n.trys.push([3,,5,6]),[4,a(s,t)];case 4:return[2,n.sent()];case 5:return t.end(),[7];case 6:return[2]}})})()}function u(e,t){var n=i.startSpan(t,void 0,e),o=r.trace.setSpan(e,n);return{span:n,childCtx:o}}function l(e){var t={};return new o.W3CTraceContextPropagator().inject(e,t,{set:function(e,t,n){e[t]=n}}),t}e.s(["createSpanFromContext",()=>u,"getTraceInfo",()=>l,"startSpanFromContext",()=>s,"startSpanFromOptionalContext",()=>c,"tracerName",()=>a])},859736,e=>{"use strict";var t=e.i(297083),n=e.i(817556);function r(e){return(0,t._)(function(e){var t,r,o,a;return(0,n._)(this,function(n){return t=e.client,r=e.args,o=e.env,a=e.noUserEnv,[2,new Promise(function(e){var n=t.openChannel({service:"exec"},function(t){var i=t.channel,s="";i.onCommand(function(e){e.output&&(s+=e.output)}),i.request({exec:{args:r,env:o,noUserEnv:null!=a&&a}}).then(function(t){t.channelClosed?e({error:"Channel closed",output:s||null}):("open"===i.status&&n(),t.error)?e({error:t.error,output:s||null}):e({output:s,error:null})})})})]})}).apply(this,arguments)}e.s(["default",()=>r])},792e3,963146,282332,19379,e=>{"use strict";e.i(33699);var t,n=e.i(297083),r=e.i(817556),o=e.i(399528),a=e.i(827444),i=e.i(878420),s=e.i(64386),c=e.i(886513),u=e.i(346715),l=e.i(906368),d=e.i(259039),h=e.i(530448),p=e.i(626430),f=e.i(866408),g=e.i(104375),y=e.i(272391),v=e.i(859736),m=e.i(787182),b=((t={}).CONNECTION_STATE_CHANGE="CONNECTION_STATE_CHANGE",t.PORT_OPEN="PORT_OPEN",t.PORT_CLOSE="PORT_CLOSE",t.TOAST="TOAST",t);e.s(["Events",()=>b],963146);var C=1e-4>=Math.random();function w(e){return Math.min(1e3*Math.pow(2,e),6e4)+Math.floor(500*Math.random())}function E(e){var t=e.fetchConnectionMetadata,o=e.getOverrideClusterMetadata,a=e.getDotdevUrl,E=e.logger,S=e.onUnrecoverableError,O=e.performance,k=e.preFetchConnectionMetadata,R=e.registerReconnectionMonitor,x=e.unregisterReconnectionMonitor,_=e.crosisTimeout,T=e.crosisWebSocketClass,A=e.traceCtx,P=e.getPid2Version,U=(0,f.default)();U.setMaxListeners(1e3);var M=null,N=new h.Client;N.setUnrecoverableErrorHandler(S),N.onDebugLog(function(e){if("breadcrumb"===e.type){t="container:state"===e.message?{containerState:e.data}:"data"in e?e.data:void 0,l.addBreadcrumb({category:"crosisV6",message:e.message,data:t});var t,n={replid:null==M?void 0:M.repl.id,language:null==M?void 0:M.repl.language};switch(e.message){case"timeout:hit":E.error("crosis connect timeout",n);break;case"onUnrecoverableError":var r=(0,i._)({errorMessage:e.data.message},n);E.error("crosis unrecoverable error",r);break;case"status:retrying":var o=e.data,a=o.error,s=(0,c._)(o,["error"]),u=(0,i._)({errorMessage:a.message},n,s);E.error("crosis retrying",u);break;case"status:connecting":case"status:reconnecting":var d=e.message.split(":")[1];E.info("crosis ".concat(d),(0,i._)({},n,"data"in e?e.data:void 0));break;case"websocket:polling fallback":E.info("crosis polling fallback",(0,i._)({},n))}}});var I=window.location.search.includes("debug=1");I&&N.onDebugLog(function(e){"log"===e.type&&console.log("in"===e.log.direction?"pid1 --> web":"pid1 <-- web",e.log.channel.service,JSON.stringify({cmd:e.log.cmd,channel:e.log.channel},null,2))});var F=function(e){var t=void 0;if(void 0!==A&&e.service){var n="";"string"==typeof e.service?n=e.service:M&&(n=e.service(M)),n&&(t=(0,g.createSpanFromContext)(A,"container.".concat(n,".openChannel")).span)}return t};return{logger:E,performance:O,onPortOpened:function(e){return U.on(b.PORT_OPEN,e),function(){U.removeListener(b.PORT_OPEN,e)}},onPortClosed:function(e){return U.on(b.PORT_CLOSE,e),function(){U.removeListener(b.PORT_CLOSE,e)}},onToast:function(e){return U.on(b.TOAST,e),function(){U.removeListener(b.TOAST,e)}},onConnectionStateChanged:function(e){return N.onConnectionStateChange(e)},connect:function(e){var a=this,l=e.context,f=e.fetchConnectionMetadataExtras,g=e.getMinimumRetryDelayMs,v=(0,c._)(e,["context","fetchConnectionMetadataExtras","getMinimumRetryDelayMs"]);N.getConnectionState()!==h.ConnectionState.DISCONNECTED&&N.close(),M=l,R(function(){N.getConnectionState()===h.ConnectionState.DISCONNECTED&&a.connect((0,i._)({context:l,fetchConnectionMetadataExtras:f,getMinimumRetryDelayMs:g},v))},function(){N.getConnectionState()!==h.ConnectionState.DISCONNECTED&&a.close({expectReconnect:!0})});var x=function(e){var t=e.chan0,o=e.gurl,s=e.isFirst;return(0,n._)(function(){var e,n,a,c;return(0,r._)(this,function(r){switch(r.label){case 0:if(e=this,"open"!==t.status)return[2];return n=E.timeStart({gurl:o}),a=setTimeout(function(){E.error("ping with no response",{gurl:o}),e.connect((0,i._)({context:l,fetchConnectionMetadataExtras:f,getMinimumRetryDelayMs:g},v))},3e4),[4,t.request({ping:{}})];case 1:if(c=r.sent().channelClosed,clearTimeout(a),c)return[2];return s?n("latency to pid1",{type:"startup"}):C&&n("latency to pid1",{type:"periodic"}),setTimeout(function(){return x({chan0:t,gurl:o,isFirst:!1})},1e3),[2]}})}).call(a)},A={getNextRetryDelayMs:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return Math.max(w.apply(void 0,(0,u._)(t)),g())},context:l,reuseConnectionMetadata:!0,fetchConnectionMetadata:function(e){return(0,n._)(function(){var n,a,c,u,d,g;return(0,r._)(this,function(r){switch(r.label){case 0:if("function"!=typeof k)return[3,2];return[4,k()];case 1:r.sent(),r.label=2;case 2:if("function"!=typeof o)return[3,4];return[4,o()];case 3:return a=r.sent(),[3,5];case 4:a=null,r.label=5;case 5:if(n=a,e.aborted)return[2,{error:h.FetchConnectionMetadataError.Aborted}];c=E.timeStart({hasCustomFetch:!!v.fetchConnectionMetadata}),r.label=6;case 6:if(r.trys.push([6,12,,13]),!v.fetchConnectionMetadata)return[3,8];return[4,v.fetchConnectionMetadata()];case 7:return u=r.sent(),[3,11];case 8:return d={asViewer:l.asViewer,replId:l.repl.id,isLoggedIn:!!l.currentUser},[4,P()];case 9:return[4,t.apply(void 0,[i._.apply(void 0,[(d.requestedPid2Version=r.sent(),d.format=p.api.token.ReplToken.WireFormat.PROTOBUF,d.overrideClusterMetadata=n,d),f])])];case 10:u=r.sent(),r.label=11;case 11:return[3,13];case 12:if(g=r.sent(),e.aborted)return[2,{error:h.FetchConnectionMetadataError.Aborted}];switch(g&&g.statusCode){case 400:case 401:case 403:throw new m.PleaseRefreshError(g.statusCode);case 408:case 409:case 429:case 500:case 502:case 503:case 504:case 526:return E.warn("Retriable error while fetching connection metadata",{statusCode:g.statusCode,originalMessage:g.message}),[2,{error:h.FetchConnectionMetadataError.Retriable}]}throw g;case 13:if(e.aborted)return[2,{error:h.FetchConnectionMetadataError.Aborted}];return I&&console.log("connecting",u),c("fetched connection metadata"),[2,(0,s._)((0,i._)({},u),{error:null})]}})})()}};_&&_>0&&(A.timeout=_),T?A.WebSocketClass=T:"undefined"==typeof WebSocket&&(A.WebSocketClass=d.default);var F=O.now(),q=0;N.open(A,function(e){var t,n=e.channel;I&&console.log("connected",{replId:l.repl.id});var r=n.onCommand(function(e){switch(e.body){case"portOpen":if(!e.portOpen)throw Error("portOpen only handles portOpen commands");var t=!!e.portOpen.forwarded,n=e.portOpen,r=n.address,o=n.cmdline,a=n.cgroup,i=n.pid,s=e.portOpen.port||0;if(8284===s||5901===s)return;U.emit(b.PORT_OPEN,{port:s,externalPort:e.portOpen.externalPort,isVnc:5900===s,isForwarded:t,address:r,cmdline:o,cgroup:a,pid:i});break;case"portClose":if(!e.portClose)throw Error("portClose only handles portClose commands");var c=e.portClose.port||0,u=e.portClose.address;if(8284===c||5901===c)return;U.emit(b.PORT_CLOSE,{port:c,externalPort:e.portClose.externalPort,isVnc:5900===c,address:u});break;case"protocolError":S(new y.default("goval panic").setExtra("message",null!=(d=null==(l=e.protocolError)?void 0:l.text)?d:"protocol error"));break;case"toast":var l,d,h,p=null==(h=e.toast)?void 0:h.text;if(!p)break;U.emit(b.TOAST,p)}});x({chan0:n,gurl:null==(t=N.getConnectionMetadata())?void 0:t.gurl,isFirst:!0}),window.v6ws=N.ws;var o=O.now()-F;return E.info("connected to pid1",{time:o,reconnectCount:q,replid:l.repl.id,language:l.repl.language}),function(e){var t=e.willReconnect;if(r(),!t){M=null;return}F=O.now(),q++}})},openChannel:function(e,t){var n=F(e);return N.openChannel(e,function(e){var r=e.channel.onCommand(function(e){if("protocolError"===e.body){var t,n;S(new y.default("goval panic").setExtra("message",null!=(n=null==(t=e.protocolError)?void 0:t.text)?n:"protocol error"))}}),o=t(e);return void 0!==n&&n.end(),function(e){o&&o(e),r&&r()}})},getConnectionState:function(){return N.getConnectionState()},exec:function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];return(0,n._)(function(){return(0,r._)(this,function(e){return[2,(0,v.default)({client:N,args:t})]})})()},execImmediately:function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];return(0,n._)(function(){return(0,r._)(this,function(e){return[2,(0,v.default)({client:N,args:t,noUserEnv:!0})]})})()},execWithEnv:function(e){for(var t=arguments.length,o=Array(t>1?t-1:0),a=1;a<t;a++)o[a-1]=arguments[a];return(0,n._)(function(){return(0,r._)(this,function(t){return[2,(0,v.default)({client:N,args:o,env:e})]})})()},close:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{expectReconnect:!1};N.getConnectionState()!==h.ConnectionState.DISCONNECTED&&N.close(e)},destroy:function(){N.destroy(),U.removeAllListeners(),x()},client:function(){return N},focus:function(){var e=N.getChannel(0);e&&e.send({focused:{}})},getConnectionMetadata:function(){return N.getConnectionMetadata()},getContext:function(){return M},getDotdevUrl:function(){var e=N.getConnectionMetadata();if(!e||N.getConnectionState()!==h.ConnectionState.CONNECTED)throw Error("Cannot get dot dev url when container is not connected");return a(e)},unrecoverableError:function(e,t){N.destroy(),U.removeAllListeners(),S(t?y.default.wrap(e).setExtras(t):e)}}}e.s(["GALLERY_PREVIEW_PORT",()=>5906,"VNC_PORT",()=>5900,"VSCODE_PORT",()=>5905,"default",()=>E],282332);var S=e.i(664152),O=e.i(530658),k=e.i(389959);function R(){return(0,n._)(function(){return(0,r._)(this,function(e){return"undefined"!=typeof document&&document.hidden?[2,new Promise(function(e){var t=function(){document.hidden||(document.removeEventListener("visibilitychange",t),e())};document.addEventListener("visibilitychange",t)})]:[2]})})()}function x(){var e=(0,O._)((0,k.useState)(!1),2),t=e[0],n=e[1];return(0,k.useEffect)(function(){var e=function(){n(!document.hidden)};return document.addEventListener("visibilitychange",e),e(),function(){document.removeEventListener("visibilitychange",e)}},[]),t}e.s(["pageVisible",()=>R,"usePageVisibility",()=>x],19379);var _=e.i(635984),T=e.i(668106),A=e.i(116680);function P(e){var t,i,s=e.onUnrecoverableError,c=e.ctx,u={register:function(e,n){return i(),window.addEventListener("online",e),window.addEventListener("offline",n),t=function(){window.removeEventListener("online",e),window.removeEventListener("offline",n)},i},unregister:i=function(){t&&(t(),t=void 0)}},l=u.register,d=u.unregister;return E({fetchConnectionMetadata:T.default,getOverrideClusterMetadata:A.default,getDotdevUrl:U,logger:S.logger,onUnrecoverableError:s,performance:window.performance,preFetchConnectionMetadata:function(){return(0,n._)(function(){var e;return(0,r._)(this,function(t){switch(t.label){case 0:if(window.performance.clearMarks(a.performanceMarks.fetchConnectionMetadataPageInvisibleStart),window.performance.clearMarks(a.performanceMarks.fetchConnectionMetadataPageInvisibleEnd),e=S.logger.timeStart(),window.performance.mark(a.performanceMarks.fetchConnectionMetadataPageInvisibleStart),"/migrateReplToNix"===o.default.pathname)return[3,2];return[4,R()];case 1:t.sent(),t.label=2;case 2:window.performance.mark(a.performanceMarks.fetchConnectionMetadataPageInvisibleEnd),e("page visible fetch connection metadata"),t.label=3;case 3:return[2]}})})()},registerReconnectionMonitor:l,unregisterReconnectionMonitor:d,traceCtx:c,getPid2Version:_.getPid2Version})}function U(e){return e.dotdevHostname.endsWith(".localhost")?"http://".concat(e.dotdevHostname,":8081"):"https://".concat(e.dotdevHostname)}e.s(["default",()=>P],792e3)}]);

//# debugId=9ee76260-6cbb-ae2c-c066-d760dadd181d
//# sourceMappingURL=b582b5fd4e2b24e3.js.map