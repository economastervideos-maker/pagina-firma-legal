;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="0f027cdf-9983-3d90-1f29-7e8505974e20")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,248011,e=>{"use strict";var n=e.i(878420),t=e.i(569384),r=e.i(973245),a=e.i(304277);function i(){var e=(0,t._)(["\n  query GetIsFreemiumStarterPlanUsersOwnRepl($replId: String!) {\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        org {\n          __typename\n          id\n        }\n        owner {\n          __typename\n          ... on User {\n            id\n            isSubscribed\n          }\n        }\n        isOwner\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return i=function(){return e},e}e.i(566901);var u={},o=(0,r.gql)(i()),s=e.i(207237);function l(){var e,t,r,i,l=(r={variables:{replId:(0,s.default)()}},i=(0,n._)({},u,r),a.useQuery(o,i)),c=l.data,d=l.refetch,f=(null==c?void 0:c.getRepl.__typename)==="Repl"&&null!=(e=c.getRepl.org)&&!!e.id;return{isFreemiumStarterPlanUsersOwnRepl:(null==c?void 0:c.getRepl.__typename)==="Repl"&&(null==(t=c.getRepl.owner)?void 0:t.__typename)==="User"&&!c.getRepl.owner.isSubscribed&&c.getRepl.isOwner&&!f,refetch:d}}e.s(["useIsFreemiumStarterPlanUsersOwnRepl",()=>l],248011)},963681,197159,83226,e=>{"use strict";var n=e.i(878420),t=e.i(569384),r=e.i(973245),a=e.i(304277),i=e.i(566901);function u(){var e=(0,t._)(["\n  query UpsellExperimentProviderCurrentUser($replId: String!) {\n    currentUser {\n      id\n      isSubscribed\n    }\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        owner {\n          ... on Team {\n            __typename\n            id\n          }\n          ... on User {\n            __typename\n            id\n          }\n        }\n        org {\n          id\n          type\n        }\n      }\n    }\n  }\n"]);return u=function(){return e},e}var o={},s=(0,r.gql)(u());function l(e){var t=(0,n._)({},o,e);return a.useQuery(s,t)}function c(){var e=(0,t._)(["\n  query GetAssistantFreeUsage {\n    currentUser {\n      id\n      aiFreeUsageLimits {\n        ... on UserAiFreeUsageLimitResult {\n          assistantEdits {\n            limit\n            usage\n            isUnderQuota\n          }\n        }\n      }\n    }\n  }\n"]);return c=function(){return e},e}e.s(["useUpsellExperimentProviderCurrentUserQuery",()=>l],963681);var d={},f=(0,r.gql)(c());function p(e){var t=(0,n._)({},d,e);return a.useQuery(f,t)}function v(e){var t=(0,n._)({},d,e);return i.useLazyQuery(f,t)}function m(){var e,n=p(),t=n.data,r=n.loading,a=n.error,i=(null==t||null==(e=t.currentUser)?void 0:e.aiFreeUsageLimits.__typename)==="UserAiFreeUsageLimitResult"?t.currentUser.aiFreeUsageLimits.assistantEdits:null;return i?{loading:r,error:a,assistantEdits:i}:{loading:r,error:a,assistantEdits:null}}e.s(["useGetAssistantFreeUsageLazyQuery",()=>v,"useGetAssistantFreeUsageQuery",()=>p],197159),e.s(["useGetAssistantFreeUsage",()=>m],83226)},453601,758386,128258,e=>{"use strict";var n=e.i(297083),t=e.i(817556),r=e.i(276385),a=e.i(973519),i=e.i(368964),u=e.i(963681),o=e.i(207237),s=e.i(83226),l=e.i(248011),c={showAiUpsell:!1,showPrivateUpsell:!1,showResourcesUpsell:!1,refetch:function(){}},d=function(){var e,n,t,r,a=(0,o.default)(),d=(0,u.useUpsellExperimentProviderCurrentUserQuery)({variables:{replId:a}}),f=d.data,p=d.refetch,v=(0,l.useIsFreemiumStarterPlanUsersOwnRepl)().isFreemiumStarterPlanUsersOwnRepl,m=(0,s.useGetAssistantFreeUsage)().assistantEdits;if((null==f||null==(e=f.currentUser)?void 0:e.__typename)!=="CurrentUser"||(null==f||null==(n=f.getRepl)?void 0:n.__typename)!=="Repl"||!m)return c;var h=f.currentUser.isSubscribed,y=null==(t=f.getRepl.org)?void 0:t.type,g=(y===i.OrgstypeEnumType.Personal||null==y)&&(null==(r=f.getRepl.owner)?void 0:r.__typename)==="User"&&f.getRepl.owner.id===f.currentUser.id&&!h;return{showAiUpsell:g&&(!v||!m.isUnderQuota),showPrivateUpsell:g,showResourcesUpsell:g,refetch:p}};e.s(["useUpsellContext",()=>d],758386);var f=e.i(530658),p=e.i(389959),v=e.i(906368),m=e.i(878420),h=e.i(569384),y=e.i(973245),g=e.i(951262);function _(){var e=(0,h._)(["\n  mutation StartViktorForRepl($input: StartViktorForReplInput!) {\n    startViktor(input: $input) {\n      ... on StartViktorForReplResult {\n        success\n      }\n    }\n  }\n"]);return _=function(){return e},e}var b={},x=(0,y.gql)(_()),w=e.i(222342);function S(){var e,r=(0,o.default)(),a=(0,w.default)(),i=a.showConfirm,u=a.showError,s=(0,f._)((e=(0,m._)({},b,void 0),g.useMutation(x,e)),1)[0],l=(0,p.useCallback)(function(e){if((null==e?void 0:e.startViktor)!=null)switch(e.startViktor.__typename){case"StartViktorForReplResult":if(e.startViktor.success)return void i("Started indexing your App");break;case"NotFoundError":v.captureException(Error("Start Viktor for Repl failed: NotFoundError"),{extra:{replId:r}});break;case"UnauthorizedError":v.captureException(Error("Start Viktor for Repl failed: UnauthorizedError"),{extra:{replId:r}});break;default:u("Failed to start indexing your App")}},[i,u,r]);return(0,p.useCallback)(function(){return(0,n._)(function(){return(0,t._)(this,function(e){switch(e.label){case 0:return[4,s({variables:{input:{replId:r}}})];case 1:return l(e.sent().data),[2]}})})()},[s,l,r])}e.s(["default",()=>S],128258);var A=e.i(446530),C=e.i(613355),R=e.i(396776),F=e.i(625484),j=e.i(383748),U=(0,A.cssRecord)({bannerWrapper:[C.rcss.cursor.pointer,C.rcss.textAlign.left],banner:[C.rcss.borderRadius(0)]}),P=function(e){var i=e.text,u=d(),o=u.showAiUpsell,s=u.refetch,l=(0,a.useGlobalModal)().show,c=S();return o?(0,r.jsx)(F.View,{tag:"button",css:U.bannerWrapper,onClick:function(){return(0,n._)(function(){return(0,t._)(this,function(e){switch(e.label){case 0:return[4,l("MembershipPurchaseModal",{analyticsContext:{upgrade:{context:"ai_chat_upsell"}},onPurchaseComplete:function(){return(0,n._)(function(){return(0,t._)(this,function(e){switch(e.label){case 0:return s(),[4,c()];case 1:return e.sent(),[2]}})})()}})];case 1:return e.sent(),[2]}})})()},children:(0,r.jsx)(R.StatusBanner,{icon:(0,r.jsx)(j.default,{}),colorway:"yellow",text:i,css:U.banner})}):null};e.s(["BasicModeUpgradeBanner",()=>P],453601)},965863,923772,e=>{"use strict";var n=e.i(530658),t=e.i(346715),r=e.i(389959),a=e.i(992785),i=e.i(131141),u=e.i(541793),o=e.i(814563),s=e.i(205104);function l(e){if(0===e.length)return new Map;if(1===e.length)return new Map([[e[0],null]]);var t=new Map,r=!0,a=!1,i=void 0;try{for(var u,o=e[Symbol.iterator]();!(r=(u=o.next()).done);r=!0){var l=u.value,c=(0,s.getFileName)(l),d=t.get(c);d||(d=[],t.set(c,d)),d.push(l)}}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}var f=new Map,p=!0,v=!1,m=void 0;try{for(var h,y=t[Symbol.iterator]();!(p=(h=y.next()).done);p=!0){var g=(0,n._)(h.value,2)[1];if(1===g.length){f.set(g[0],null);continue}var _=new Map,b=new Set,x=0,w=!0,S=!1,A=void 0;try{for(var C,R=g[Symbol.iterator]();!(w=(C=R.next()).done);w=!0){var F=C.value;if(-1===F.indexOf("/")){f.set(F,null),b.add(F);continue}var j=function(e){for(var n=e.split("/").slice(0,-1),t=[],r=0;r<n.length;r++){var a=n.slice(r).join("/")+"/";0!==r&&(a="â€¦/"+a),t.push(a)}return t.reverse()}(F);_.set(F,j),j.length>x&&(x=j.length)}}catch(e){S=!0,A=e}finally{try{w||null==R.return||R.return()}finally{if(S)throw A}}for(var U=0;U<=x;U++){var P=[],k=new Map,I=!0,E=!1,V=void 0;try{for(var M,T=_[Symbol.iterator]();!(I=(M=T.next()).done);I=!0){var O=(0,n._)(M.value,2),G=O[0],B=O[1];if(!b.has(G)){var L=B[U];L||(L=B[B.length-1]),P.push(L),k.set(L,G)}}}catch(e){E=!0,V=e}finally{try{I||null==T.return||T.return()}finally{if(E)throw V}}if(0===P.length)break;var D=!0,q=!1,z=void 0;try{for(var Q,W=P[Symbol.iterator]();!(D=(Q=W.next()).done);D=!0)!function(){var e=Q.value,n=k.get(e);if(void 0===n)throw Error("Unpopulated segment map");1===P.filter(function(n){return n===e}).length&&(b.add(n),f.set(n,e))}()}catch(e){q=!0,z=e}finally{try{D||null==W.return||W.return()}finally{if(q)throw z}}}if(b.size!==g.length){var N=!0,$=!1,H=void 0;try{for(var K,X=g[Symbol.iterator]();!(N=(K=X.next()).done);N=!0){var Y=K.value;if(!b.has(Y)){var J=Y.split("/").slice(0,-1).join("/");f.set(Y,J)}}}catch(e){$=!0,H=e}finally{try{N||null==X.return||X.return()}finally{if($)throw H}}}}}catch(e){v=!0,m=e}finally{try{p||null==y.return||y.return()}finally{if(v)throw m}}return f}e.s(["getUniquePathMap",()=>l],923772);var c=e.i(125674);e.i(282890);var d=e.i(66718),f=e.i(852819),p=(0,u.atom)(null);function v(){return(0,f.useGet)(p)}var m=(0,u.atom)(new Map),h=(0,u.atom)([]),y=(0,u.atom)(null,function(e,n,t){n(m,function(e){return(0,i.produce)(e,function(e){var n=e.get(t.paneId),r=Date.now();if(!n)return void e.set(t.paneId,[{pane:t.pane,lastActiveAt:r}]);var i=n[n.length-1];(0,a.default)(t.pane,i)?i.lastActiveAt=r:n.push({pane:t.pane,lastActiveAt:r})})}),n(p,t.paneId)}),g=(0,u.atom)(null,function(e,n,t){var r=e(p),a=e(m).get(t);a&&n(h,function(e){return(0,i.produce)(e,function(e){var n=!0,t=!1,r=void 0;try{for(var i,u=a[Symbol.iterator]();!(n=(i=u.next()).done);n=!0){var o=i.value;e.push(o)}}catch(e){t=!0,r=e}finally{try{n||null==u.return||u.return()}finally{if(t)throw r}}e.sort(function(e,n){return n.lastActiveAt-e.lastActiveAt})})}),n(m,function(e){return(0,i.produce)(e,function(e){e.delete(t)})}),r===t&&n(p,null)}),_=(0,u.atom)(null,function(e,n,t){n(m,function(e){return(0,i.produce)(e,function(e){var n=e.get(t);if(n){var r=n[n.length-1];r&&(r.lastActiveAt=Date.now())}})}),n(p,t)}),b=(0,u.atom)(null,function(e,n){n(p,null)}),x=(0,u.atom)(function(e){var n=e(m),t=[];return n.forEach(function(e,n){var r=e[e.length-1];r&&t.push([n,r.pane,r.lastActiveAt])}),t.sort(function(e,n){return e[2]-n[2]})}),w=(0,u.atom)(function(e){var t=[],r=!0,a=!1,i=void 0;try{for(var u,o=e(x)[Symbol.iterator]();!(r=(u=o.next()).done);r=!0){var s=(0,n._)(u.value,2),l=(s[0],s[1]),c=(0,d.isFilePane)(l)?l.data.path:null;c&&t.push(c)}}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return t}),S=(0,o.selectAtom)(w,function(e){return e},a.default),A=(0,u.atom)(function(e){var n=[],r=!0,a=!1,i=void 0;try{for(var u,o=(0,t._)(e(m).values())[Symbol.iterator]();!(r=(u=o.next()).done);r=!0){var s=u.value;s.length<=1||n.push.apply(n,(0,t._)(s.slice(0,-1)))}}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}var l=!0,c=!1,d=void 0;try{for(var f,p=e(h)[Symbol.iterator]();!(l=(f=p.next()).done);l=!0){var v=f.value;n.push(v)}}catch(e){c=!0,d=e}finally{try{l||null==p.return||p.return()}finally{if(c)throw d}}return n.sort(function(e,n){return n.lastActiveAt-e.lastActiveAt}).map(function(e){return e.pane})}),C=(0,u.atom)(null,function(e,n){var t=e(h).pop();return n(h,function(e){return(0,i.produce)(e,function(e){e.pop()})}),t}),R=(0,u.atom)(function(e){var n=[],t=!0,r=!1,a=void 0;try{for(var i,u=e(A)[Symbol.iterator]();!(t=(i=u.next()).done);t=!0){var o=i.value,s=(0,d.isFilePane)(o)?o.data.path:null;s&&n.push(s)}}catch(e){r=!0,a=e}finally{try{t||null==u.return||u.return()}finally{if(r)throw a}}return n}),F=(0,o.selectAtom)(R,function(e){return e},a.default),j=(0,u.atom)(function(e){return(0,t._)(new Set((0,t._)(e(S)).concat((0,t._)(e(F)))))}),U=(0,o.selectAtom)(j,function(e){return e},a.default),P=(0,u.atom)(function(e){var n,t,r=e(p);if(!r)return null;var a=e(m).get(r);return a&&null!=(t=null==(n=a[a.length-1])?void 0:n.pane)?t:null}),k=(0,u.atom)(null),I=(0,u.atom)(null),E=(0,u.atom)(function(e){var n=e(P);return n&&(0,d.isFilePane)(n)&&n.data.path||null});function V(e,n){var t=(0,f.useSet)(y),a=(0,f.useSet)(g);(0,r.useEffect)(function(){t({paneId:e,pane:n})},[t,e,n]),(0,r.useEffect)(function(){return function(){a(e)}},[a,e])}function M(){return(0,f.useValue)(x)}function T(){return(0,f.useGet)(x)}function O(){return(0,f.useValue)(S)}function G(){return(0,f.useGet)(S)}function B(){return(0,f.useSet)(C)}function L(){return(0,f.useSet)(_)}function D(){return(0,f.useSet)(b)}function q(){return(0,f.useValue)(P)}function z(){return(0,f.useValue)(E)}function Q(){return(0,f.useGet)(E)}function W(){return(0,f.useObservableValue)(E)}function N(){return(0,f.useSet)(I)}function $(){return(0,f.useObservableValue)(I)}function H(){return(0,f.useGet)(U)}function K(){return(0,f.useObservableValue)(U)}function X(){var e=(0,f.useObservableValue)(S);return(0,c.default)(function(){return function(n){return new Promise(function(t,r){var a=e.subscribe(function(e){e.includes(n)||(a(),t())})})}},[e])}var Y=(0,u.atom)(function(e){return l(e(S))});function J(e){var n=(0,r.useMemo)(function(){return(0,u.atom)(function(n){return e&&n(Y).get(e)||void 0})},[e]);return(0,f.useValue)(n)}function Z(e,n){var t=!0,r=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(t=(i=u.next()).done);t=!0){var o=i.value;(0,d.isFilePane)(o.pane)&&o.pane.data.path===n.path&&("move"===n.type?o.pane.data.path=n.to:o.pane={type:"commands",data:{autoFocus:!1}})}}catch(e){r=!0,a=e}finally{try{t||null==u.return||u.return()}finally{if(r)throw a}}}var ee=(0,u.atom)(null,function(e,t,r){t(m,function(e){return(0,i.produce)(e,function(e){var t=!0,a=!1,i=void 0;try{for(var u,o=e[Symbol.iterator]();!(t=(u=o.next()).done);t=!0){var s=(0,n._)(u.value,2)[1];Z(s,r)}}catch(e){a=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(a)throw i}}})}),t(h,function(e){return(0,i.produce)(e,function(e){Z(e,r)})})});function en(){return(0,f.useSet)(ee)}e.s(["activePaneIdAtom",()=>p,"closedPaneSessionsAtom",()=>h,"modalPaneGroupIdAtom",()=>k,"openPanesAtom",()=>x,"paneSessionsAtom",()=>m,"useActivatePane",()=>L,"useActiveFile",()=>z,"useActivePane",()=>q,"useClearActivePane",()=>D,"useGetActiveFile",()=>Q,"useGetActivePaneId",()=>v,"useGetOpenFiles",()=>G,"useGetPanes",()=>T,"useGetRecentFiles",()=>H,"useHandleFileMoveOrDelete",()=>en,"useObservableActiveFile",()=>W,"useObservableRevealFile",()=>$,"useOpenFiles",()=>O,"useOpenPanes",()=>M,"usePaneSession",()=>V,"usePopClosedPane",()=>B,"useRecentFilesObservable",()=>K,"useSetRevealFile",()=>N,"useUniquePath",()=>J,"useWaitForFileClose",()=>X],965863)},259493,e=>{"use strict";e.i(297083);var n=e.i(530658),t=e.i(346715);e.i(817556);var r=e.i(389959),a=e.i(131141),i=e.i(541793),u=e.i(814563),o=e.i(123111),s=e.i(98816),l=e.i(125674),c=e.i(91442),d=e.i(965863),f=e.i(852819),p=(0,i.atom)({}),v=(0,i.atom)(null,function(e,n,t){n(p,function(e){return(0,a.produce)(e,function(e){null===t.actions?delete e[t.paneId]:e[t.paneId]=t.actions})})});function m(e,n){var a=U(),i=(0,f.useSet)(v),u=(0,s.default)(e);(0,r.useLayoutEffect)(function(){var e;return i({paneId:a,actions:null!=(e=u.current())?e:null}),function(){i({paneId:a,actions:null})}},[i,a,u].concat((0,t._)(n)))}function h(e){var n=(0,l.default)(function(){return(0,u.selectAtom)(p,function(n){return e?n[e]:{}})},[e]);return(0,f.useValue)(n)}function y(){var e=(0,f.useGet)(p);return(0,r.useCallback)(function(n){var t;return null!=(t=e()[n])?t:null},[e])}var g=(0,i.atom)(function(e){var t=e(c.cursorStateAtom);if(!t||!t.isVisible)return null;var r=!0,a=!1,i=void 0;try{for(var u,o=e(d.openPanesAtom)[Symbol.iterator]();!(r=(u=o.next()).done);r=!0){var s,l=(0,n._)(u.value,2),f=l[0],v=l[1];if("codeEditor"===v.type&&v.data.path===t.path){var m=null!=(s=e(p)[f])?s:null;return(null==m?void 0:m.type)==="codeEditor"?m:null}}}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return null});function _(){return(0,f.useObservableValue)(g)}var b=(0,i.atom)(new Map),x=(0,i.atom)(null,function(e,n,t,r){n(b,function(e){var n=new Map(e);return null===r?n.delete(t):r&&n.set(t,r),n})});function w(){return(0,f.useSet)(x)}var S=(0,i.atom)(new Map),A=(0,i.atom)(null,function(e,n,t){n(S,function(e){return(0,a.produce)(e,function(e){null===t.focus?e.delete(t.paneId):e.set(t.paneId,t.focus)})})});function C(e){var n=document.activeElement;return!!e&&!!n&&e!==n&&("dialog"===n.getAttribute("role")||e.contains(n))}function R(e,a){var i=(0,s.default)(e),u=U(),l=(0,o.default)(),c=(0,r.useRef)(!l),p=(0,f.useSet)(A),v=(0,f.useGet)(d.activePaneIdAtom),m=(0,f.useGet)(b),h=(0,n._)((0,r.useState)(null),2),y=h[0],g=h[1];return(0,r.useEffect)(function(){i.current&&g(i.current())},a?(0,t._)(a):[]),(0,r.useEffect)(function(){var e=function(e){v()!==u||e.target!==m().get(u)&&(c.current=!1)};return document.body.addEventListener("focus",e,!0),function(){document.body.removeEventListener("focus",e,!0)}},[v,m,u]),(0,r.useEffect)(function(){if(y){var e=function(){y.focus()};return c.current&&v()===u&&!C(m().get(u))&&e(),p({paneId:u,focus:e}),function(){p({paneId:u,focus:null})}}},[y,p,u,v,m,l]),g}function F(){var e=(0,f.useGet)(S),n=(0,f.useGet)(b);return(0,l.default)(function(){return function(t){var r=e().get(t),a=n().get(t);if(!C(a)){if(r)return void r();null==a||a.focus()}}},[e,n])}var j=(0,r.createContext)(null);function U(){var e=(0,r.useContext)(j);if(!e)throw Error("Expected pane id in context");return e}var P=j.Provider;e.s(["PaneIdProvider",()=>P,"useFocusPane",()=>F,"useGetPaneBindings",()=>y,"useObsevervableCursorPaneBindings",()=>_,"usePaneBindings",()=>h,"useSetFocusTarget",()=>R,"useSetPaneBindings",()=>m,"useSetPaneElement",()=>w])},544218,e=>{e.v({codeViewerSpanFadeIn:"Markdown-module__lfwcLa__codeViewerSpanFadeIn",cv2Span:"Markdown-module__lfwcLa__cv2Span","fade-in-animation":"Markdown-module__lfwcLa__fade-in-animation",fadeInAnimation:"Markdown-module__lfwcLa__fadeInAnimation",textColorDimmer:"Markdown-module__lfwcLa__textColorDimmer",textColorDimmest:"Markdown-module__lfwcLa__textColorDimmest"})},462995,704977,e=>{"use strict";var n=e.i(721281),t=e.i(878420),r=e.i(64386),a=e.i(530658),i=e.i(276385),u=e.i(389959),o=e.i(336250),s=e.i(879626),l=e.i(669104),c=e.i(188507);e.i(877212);var d=e.i(924908),f=e.i(409146);e.i(694906);var p=e.i(446692);e.i(925218);var v=e.i(267103),m=e.i(276822),h=e.i(441329),y=e.i(453601),g=e.i(826771),_=e.i(761732),b=e.i(259493),x=(0,u.createContext)((0,g.observableValue)(null)),w=x.Provider;function S(){var e=(0,u.useContext)(x);return(0,_.default)(e)}function A(){var e=(0,a._)((0,u.useState)(function(){return(0,g.observableValue)(null)}),1)[0],n=(0,b.useObsevervableCursorPaneBindings)();return(0,u.useEffect)(function(){var t=function(n){return e.set((null==n?void 0:n.insertGhostwriterChatCode)&&n.revertGhostwriterChatCode?{insert:n.insertGhostwriterChatCode,revert:n.revertGhostwriterChatCode}:null)};return t(n.current),n.subscribe(t)},[n,e]),e}e.s(["CodeInsertProvider",()=>w,"useCodeInsert",()=>S,"useCreateCodeInsertObservable",()=>A],704977);var C=e.i(858248),R=e.i(709485),F=e.i(967629),j=e.i(480028),U=e.i(446530),P=e.i(613355),k=e.i(140487),I=e.i(88619),E=e.i(751273),V=e.i(245150),M=e.i(273191),T=(0,F.keyframes)({"0%":{opacity:0,transform:"translateX(8px)"},"10%":{opacity:1,transform:"translateX(0)"},"95%":{opacity:1},"100%":{opacity:0}}),O=(0,U.cssRecord)({buttonContainer:[P.rcss.position.relative,{transition:"opacity 75ms linear",opacity:1}],buttonToast:{position:"absolute",display:"block",bottom:"100%",paddingBottom:j.tokens.space4,paddingRight:j.tokens.space8,animation:"".concat(T," 3s"),fontFamily:j.tokens.fontFamilyDefault,fontSize:j.tokens.fontSizeDefault,whiteSpace:"nowrap",userSelect:"none"}}),G=function(e){var n=e.code,t=e.language;return(0,i.jsx)("div",{css:O.buttonContainer,children:(0,i.jsx)(I.CopyButton,{text:"Copy",size:"small",variant:"nofill",textToCopy:n,tooltipPlacement:"bottom",onCopy:function(){(0,C.track)(R.events.ASSISTANT_USED,{action:"code_copied",intent_type:null,model:null,user_model_selection:null,message_content:n,message_source:"chat_pane",message_surface:"workspace_ai_pane"}),(0,C.track)(R.events.GHOSTWRITER_CHAT_CODE_COPIED,{language:t})}})})},B=function(e){var n=e.code,t=e.disabled,r=e.insertCode,o=(0,a._)((0,u.useState)(!1),2),s=o[0],l=o[1],c=(0,i.jsx)(k.Button,{variant:"nofill",text:"Insert",disabled:t,size:"small",iconLeft:(0,i.jsx)(M.default,{}),onClick:function(){r&&((0,C.track)(R.events.AI_CHAT_EVENT,{action:"code_inserted",intent_type:null,model:null,user_model_selection:null,message_content:n,message_source:"chat_pane"}),r(n),l(!0))}});return(0,i.jsxs)("div",{css:O.buttonContainer,children:[s?(0,i.jsx)("span",{css:O.buttonToast,onAnimationEnd:function(){requestAnimationFrame(function(){l(!1)})},"aria-hidden":!0,children:"Inserted!"}):null,(0,i.jsx)(E.Tooltip,{placement:"bottom",tooltip:t?"Place cursor in a file to insert code":"Insert code at cursor position",children:c})]})},L=function(e){var n=e.code,t=e.revertCodeInsert,r=(0,a._)((0,u.useState)(!1),2),o=r[0],s=r[1],l=(0,i.jsx)(k.Button,{text:"Revert",size:"small",iconLeft:(0,i.jsx)(V.default,{}),onClick:function(){(0,C.track)(R.events.AI_CHAT_EVENT,{action:"code_reverted",intent_type:null,model:null,user_model_selection:null,message_content:n,message_source:"chat_pane"}),t(),s(!0)}});return(0,i.jsxs)("div",{css:O.buttonContainer,children:[o?(0,i.jsx)("span",{css:O.buttonToast,onAnimationEnd:function(){requestAnimationFrame(function(){s(!1)})},"aria-hidden":!0,children:"Reverting..."}):null,(0,i.jsx)(E.Tooltip,{placement:"bottom",tooltip:"Revert code insertion",children:l})]})},D=e.i(630818),q=e.i(929872),z=e.i(960178),Q=e.i(625484),W=e.i(916271),N=e.i(544218);function $(e){var n=e.openFile,a=e.messageSenderType;return(0,u.useMemo)(function(){if(n)return function(e){return(0,i.jsx)(ei,(0,r._)((0,t._)({},e),{openFile:n,messageSenderType:a}))}},[n,a])}var H=[l.default,s.default,o.default],K=[],X=function(e){return(0,i.jsx)(Q.View,{children:(0,i.jsx)(z.Text,{children:e.children})})},Y=function(e){return(0,i.jsx)(Q.View,{children:(0,i.jsx)(z.Text,{children:(0,i.jsx)(J,{children:e.children})})})},J=function(e){var n=e.children;return n?(0,i.jsx)(i.Fragment,{children:u.Children.map(n,function(e,n){return e&&"string"==typeof e?e.split(/(\s+)/).map(function(e,t){return(0,i.jsx)("span",{clsx:N.default.fadeInAnimation,children:e},"".concat(n,"-").concat(t))}):(0,i.jsx)("span",{clsx:N.default.fadeInAnimation,children:e},"".concat(n,"-0"))})}):null},Z=function(e){return(0,i.jsx)("input",(0,t._)({disabled:!0},e))},ee={h1:X,h2:X,h3:X,h4:X,h5:X,h6:X,input:Z},en={h1:Y,h2:Y,h3:Y,h4:Y,h5:Y,h6:Y,p:function(e){return(0,i.jsx)("p",{children:(0,i.jsx)(J,{children:e.children})})},li:function(e){return(0,i.jsx)("li",{children:(0,i.jsx)(J,{children:e.children})})},strong:function(e){return(0,i.jsx)("strong",{children:(0,i.jsx)(J,{children:e.children})})},input:Z},et=(0,u.memo)(function(e){var r,a=e.text,u=e.codeComponent,o=e.linkComponent,s=e.messageState,l=e.textColor,d=(0,t._)({},u?{code:u}:void 0,o?{a:o}:void 0),f=(0,h.useIsInMobileWorkspace)();return(0,i.jsx)(W.default,{clsx:(r={},(0,n._)(r,N.default.codeViewerSpanFadeIn,s!==c.EventState.COMPLETE&&!f),(0,n._)(r,N.default.textColorDimmest,"dimmest"===l),(0,n._)(r,N.default.textColorDimmer,"dimmer"===l),r),remarkPlugins:H,rehypePlugins:K,components:s===c.EventState.COMPLETE||f?(0,t._)({},ee,d):(0,t._)({},en,d),lineBreaks:!0,themed:!0,children:a})}),er=(0,U.cssRecord)({styles0:[P.rcss.pl(4),P.rcss.fontSize(12),P.rcss.color.foregroundDimmer]}),ea=(0,U.cssRecord)({root:[P.rcss.borderRadius(4),P.rcss.border({color:j.tokens.outlineDimmest}),P.rcss.overflow("hidden")],header:[P.rcss.border({color:j.tokens.outlineDimmer,direction:"bottom"}),P.rcss.border({direction:"bottom",color:j.tokens.interactiveBackground}),P.rcss.highRes({borderBottomWidth:.5}),{fontFamily:j.tokens.fontFamilyDefault,userSelect:"none"}],headerRight:[{"& button":{borderRadius:0},"& > div:last-of-type button":{borderTopRightRadius:4}}],upgradeBannerWrapper:[{fontFamily:j.tokens.fontFamilyDefault,userSelect:"none"}]}),ei=function(e){var n=(0,m.getLanguageFromClass)(e.className),r=n&&function(e){switch(e){case"crystal":return"main.cr";case"python":case"py":return"main.py";case"sh":case"fish":case"zsh":case"bash":return"main.sh";case"javascript":case"js":return"index.js";case"typescript":case"ts":return"index.ts";case"csharp":case"cs":return"main.cs";case"java":return"Main.java";case"go":return"main.go";case"ruby":case"rb":return"main.rb";case"php":return"main.php";case"rust":return"main.rs";case"swift":return"main.swift";case"kotlin":return"main.kt";case"scala":return"main.scala";case"c":return"main.c";case"cpp":case"c++":return"main.cpp";case"dart":return"main.dart";case"elixir":return"main.ex";case"haskell":return"Main.hs";case"lua":return"main.lua";case"perl":return"main.pl";case"r":return"main.r";case"sql":return"main.sql";case"ocaml":return"main.ml";case"html":return"index.html";case"json":return"main.json";case"css":return"main.css";default:return}}(n),a=r?p.FileTypeRepository.from(r):void 0,u=null==a?void 0:a.name,o=String(e.children).trimEnd(),s=(0,d.useYapper)(),l=(0,v.useObservable)(s.hasAdvancedModel);return e.inline?(0,i.jsx)(m.default,(0,t._)({},e)):(0,i.jsxs)(q.Surface,{css:ea.root,elevated:!0,children:[(0,i.jsxs)(Q.View,{css:ea.header,row:!0,gap:8,children:[(0,i.jsxs)(Q.View,{grow:!0,shrink:!0,align:"center",pl:4,row:!0,gap:0,children:[r?(0,i.jsx)(D.default,{size:12,path:r}):null,u?(0,i.jsx)(z.Text,{multiline:!1,css:er.styles0,children:u}):null]}),(0,i.jsxs)(Q.View,{css:ea.headerRight,row:!0,gap:0,children:[(0,i.jsx)(G,{code:o,language:n}),(0,i.jsx)(eu,{code:o})]})]}),(0,i.jsx)(Q.View,{p:4,children:(0,i.jsx)(f.default,{code:o,language:n})}),e.messageSenderType!==c.UserType.AI||l?null:(0,i.jsx)(Q.View,{css:ea.upgradeBannerWrapper,children:(0,i.jsx)(y.BasicModeUpgradeBanner,{text:"Upgrade to have changes applied automatically"})})]})},eu=function(e){var n=e.code,t=(0,a._)((0,u.useState)(!1),2),r=t[0],o=t[1],s=S();if(!s)return null;var l=s.insert,c=s.revert;return r?r&&c?(0,i.jsx)(L,{code:n,revertCodeInsert:function(){o(!1),c()}}):null:(0,i.jsx)(B,{disabled:!1,code:n,insertCode:function(){o(!0),null==l||l(n)}})};e.s(["FadeInTextAnimation",()=>J,"MarkdownCode",()=>ei,"MessageMarkdown",()=>et,"useMarkdownCodeComponent",()=>$],462995)}]);

//# debugId=0f027cdf-9983-3d90-1f29-7e8505974e20
//# sourceMappingURL=f4da2d854ada6e69.js.map