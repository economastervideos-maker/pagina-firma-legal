;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="3dbbe27f-1957-9a71-7f4e-8bac0a22e758")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,676566,e=>{e.v(JSON.parse('["aaa","aarp","abb","abbott","abbvie","abc","able","abogado","abudhabi","ac","academy","accenture","accountant","accountants","aco","actor","ad","ads","adult","ae","aeg","aero","aetna","af","afl","africa","ag","agakhan","agency","ai","aig","airbus","airforce","airtel","akdn","al","alibaba","alipay","allfinanz","allstate","ally","alsace","alstom","am","amazon","americanexpress","americanfamily","amex","amfam","amica","amsterdam","analytics","android","anquan","anz","ao","aol","apartments","app","apple","aq","aquarelle","ar","arab","aramco","archi","army","arpa","art","arte","as","asda","asia","associates","at","athleta","attorney","au","auction","audi","audible","audio","auspost","author","auto","autos","aw","aws","ax","axa","az","azure","ba","baby","baidu","banamex","band","bank","bar","barcelona","barclaycard","barclays","barefoot","bargains","baseball","basketball","bauhaus","bayern","bb","bbc","bbt","bbva","bcg","bcn","bd","be","beats","beauty","beer","bentley","berlin","best","bestbuy","bet","bf","bg","bh","bharti","bi","bible","bid","bike","bing","bingo","bio","biz","bj","black","blackfriday","blockbuster","blog","bloomberg","blue","bm","bms","bmw","bn","bnpparibas","bo","boats","boehringer","bofa","bom","bond","boo","book","booking","bosch","bostik","boston","bot","boutique","box","br","bradesco","bridgestone","broadway","broker","brother","brussels","bs","bt","build","builders","business","buy","buzz","bv","bw","by","bz","bzh","ca","cab","cafe","cal","call","calvinklein","cam","camera","camp","canon","capetown","capital","capitalone","car","caravan","cards","care","career","careers","cars","casa","case","cash","casino","cat","catering","catholic","cba","cbn","cbre","cc","cd","center","ceo","cern","cf","cfa","cfd","cg","ch","chanel","channel","charity","chase","chat","cheap","chintai","christmas","chrome","church","ci","cipriani","circle","cisco","citadel","citi","citic","city","ck","cl","claims","cleaning","click","clinic","clinique","clothing","cloud","club","clubmed","cm","cn","co","coach","codes","coffee","college","cologne","com","commbank","community","company","compare","computer","comsec","condos","construction","consulting","contact","contractors","cooking","cool","coop","corsica","country","coupon","coupons","courses","cpa","cr","credit","creditcard","creditunion","cricket","crown","crs","cruise","cruises","cu","cuisinella","cv","cw","cx","cy","cymru","cyou","cz","dad","dance","data","date","dating","datsun","day","dclk","dds","de","deal","dealer","deals","degree","delivery","dell","deloitte","delta","democrat","dental","dentist","desi","design","dev","dhl","diamonds","diet","digital","direct","directory","discount","discover","dish","diy","dj","dk","dm","dnp","do","docs","doctor","dog","domains","dot","download","drive","dtv","dubai","dunlop","dupont","durban","dvag","dvr","dz","earth","eat","ec","eco","edeka","edu","education","ee","eg","email","emerck","energy","engineer","engineering","enterprises","epson","equipment","er","ericsson","erni","es","esq","estate","et","eu","eurovision","eus","events","exchange","expert","exposed","express","extraspace","fage","fail","fairwinds","faith","family","fan","fans","farm","farmers","fashion","fast","fedex","feedback","ferrari","ferrero","fi","fidelity","fido","film","final","finance","financial","fire","firestone","firmdale","fish","fishing","fit","fitness","fj","fk","flickr","flights","flir","florist","flowers","fly","fm","fo","foo","food","football","ford","forex","forsale","forum","foundation","fox","fr","free","fresenius","frl","frogans","frontier","ftr","fujitsu","fun","fund","furniture","futbol","fyi","ga","gal","gallery","gallo","gallup","game","games","gap","garden","gay","gb","gbiz","gd","gdn","ge","gea","gent","genting","george","gf","gg","ggee","gh","gi","gift","gifts","gives","giving","gl","glass","gle","global","globo","gm","gmail","gmbh","gmo","gmx","gn","godaddy","gold","goldpoint","golf","goo","goodyear","goog","google","gop","got","gov","gp","gq","gr","grainger","graphics","gratis","green","gripe","grocery","group","gs","gt","gu","gucci","guge","guide","guitars","guru","gw","gy","hair","hamburg","hangout","haus","hbo","hdfc","hdfcbank","health","healthcare","help","helsinki","here","hermes","hiphop","hisamitsu","hitachi","hiv","hk","hkt","hm","hn","hockey","holdings","holiday","homedepot","homegoods","homes","homesense","honda","horse","hospital","host","hosting","hot","hotels","hotmail","house","how","hr","hsbc","ht","hu","hughes","hyatt","hyundai","ibm","icbc","ice","icu","id","ie","ieee","ifm","ikano","il","im","imamat","imdb","immo","immobilien","in","inc","industries","infiniti","info","ing","ink","institute","insurance","insure","int","international","intuit","investments","io","ipiranga","iq","ir","irish","is","ismaili","ist","istanbul","it","itau","itv","jaguar","java","jcb","je","jeep","jetzt","jewelry","jio","jll","jm","jmp","jnj","jo","jobs","joburg","jot","joy","jp","jpmorgan","jprs","juegos","juniper","kaufen","kddi","ke","kerryhotels","kerrylogistics","kerryproperties","kfh","kg","kh","ki","kia","kids","kim","kindle","kitchen","kiwi","km","kn","koeln","komatsu","kosher","kp","kpmg","kpn","kr","krd","kred","kuokgroup","kw","ky","kyoto","kz","la","lacaixa","lamborghini","lamer","lancaster","land","landrover","lanxess","lasalle","lat","latino","latrobe","law","lawyer","lb","lc","lds","lease","leclerc","lefrak","legal","lego","lexus","lgbt","li","lidl","life","lifeinsurance","lifestyle","lighting","like","lilly","limited","limo","lincoln","link","lipsy","live","living","lk","llc","llp","loan","loans","locker","locus","lol","london","lotte","lotto","love","lpl","lplfinancial","lr","ls","lt","ltd","ltda","lu","lundbeck","luxe","luxury","lv","ly","ma","madrid","maif","maison","makeup","man","management","mango","map","market","marketing","markets","marriott","marshalls","mattel","mba","mc","mckinsey","md","me","med","media","meet","melbourne","meme","memorial","men","menu","merckmsd","mg","mh","miami","microsoft","mil","mini","mint","mit","mitsubishi","mk","ml","mlb","mls","mm","mma","mn","mo","mobi","mobile","moda","moe","moi","mom","monash","money","monster","mormon","mortgage","moscow","moto","motorcycles","mov","movie","mp","mq","mr","ms","msd","mt","mtn","mtr","mu","museum","music","mv","mw","mx","my","mz","na","nab","nagoya","name","navy","nba","nc","ne","nec","net","netbank","netflix","network","neustar","new","news","next","nextdirect","nexus","nf","nfl","ng","ngo","nhk","ni","nico","nike","nikon","ninja","nissan","nissay","nl","no","nokia","norton","now","nowruz","nowtv","np","nr","nra","nrw","ntt","nu","nyc","nz","obi","observer","office","okinawa","olayan","olayangroup","ollo","om","omega","one","ong","onl","online","ooo","open","oracle","orange","org","organic","origins","osaka","otsuka","ott","ovh","pa","page","panasonic","paris","pars","partners","parts","party","pay","pccw","pe","pet","pf","pfizer","pg","ph","pharmacy","phd","philips","phone","photo","photography","photos","physio","pics","pictet","pictures","pid","pin","ping","pink","pioneer","pizza","pk","pl","place","play","playstation","plumbing","plus","pm","pn","pnc","pohl","poker","politie","porn","post","pr","pramerica","praxi","press","prime","pro","prod","productions","prof","progressive","promo","properties","property","protection","pru","prudential","ps","pt","pub","pw","pwc","py","qa","qpon","quebec","quest","racing","radio","re","read","realestate","realtor","realty","recipes","red","redstone","redumbrella","rehab","reise","reisen","reit","reliance","ren","rent","rentals","repair","report","republican","rest","restaurant","review","reviews","rexroth","rich","richardli","ricoh","ril","rio","rip","ro","rocks","rodeo","rogers","room","rs","rsvp","ru","rugby","ruhr","run","rw","rwe","ryukyu","sa","saarland","safe","safety","sakura","sale","salon","samsclub","samsung","sandvik","sandvikcoromant","sanofi","sap","sarl","sas","save","saxo","sb","sbi","sbs","sc","scb","schaeffler","schmidt","scholarships","school","schule","schwarz","science","scot","sd","se","search","seat","secure","security","seek","select","sener","services","seven","sew","sex","sexy","sfr","sg","sh","shangrila","sharp","shell","shia","shiksha","shoes","shop","shopping","shouji","show","si","silk","sina","singles","site","sj","sk","ski","skin","sky","skype","sl","sling","sm","smart","smile","sn","sncf","so","soccer","social","softbank","software","sohu","solar","solutions","song","sony","soy","spa","space","sport","spot","sr","srl","ss","st","stada","staples","star","statebank","statefarm","stc","stcgroup","stockholm","storage","store","stream","studio","study","style","su","sucks","supplies","supply","support","surf","surgery","suzuki","sv","swatch","swiss","sx","sy","sydney","systems","sz","tab","taipei","talk","taobao","target","tatamotors","tatar","tattoo","tax","taxi","tc","tci","td","tdk","team","tech","technology","tel","temasek","tennis","teva","tf","tg","th","thd","theater","theatre","tiaa","tickets","tienda","tips","tires","tirol","tj","tjmaxx","tjx","tk","tkmaxx","tl","tm","tmall","tn","to","today","tokyo","tools","top","toray","toshiba","total","tours","town","toyota","toys","tr","trade","trading","training","travel","travelers","travelersinsurance","trust","trv","tt","tube","tui","tunes","tushu","tv","tvs","tw","tz","ua","ubank","ubs","ug","uk","unicom","university","uno","uol","ups","us","uy","uz","va","vacations","vana","vanguard","vc","ve","vegas","ventures","verisign","vermögensberater","vermögensberatung","versicherung","vet","vg","vi","viajes","video","vig","viking","villas","vin","vip","virgin","visa","vision","viva","vivo","vlaanderen","vn","vodka","volvo","vote","voting","voto","voyage","vu","wales","walmart","walter","wang","wanggou","watch","watches","weather","weatherchannel","webcam","weber","website","wed","wedding","weibo","weir","wf","whoswho","wien","wiki","williamhill","win","windows","wine","winners","wme","wolterskluwer","woodside","work","works","world","wow","ws","wtc","wtf","xbox","xerox","xihuan","xin","xxx","xyz","yachts","yahoo","yamaxun","yandex","ye","yodobashi","yoga","yokohama","you","youtube","yt","yun","za","zappos","zara","zero","zip","zm","zone","zuerich","zw","ελ","ευ","бг","бел","дети","ею","католик","ком","мкд","мон","москва","онлайн","орг","рус","рф","сайт","срб","укр","қаз","հայ","ישראל","קום","ابوظبي","ارامكو","الاردن","البحرين","الجزائر","السعودية","العليان","المغرب","امارات","ایران","بارت","بازار","بيتك","بھارت","تونس","سودان","سورية","شبكة","عراق","عرب","عمان","فلسطين","قطر","كاثوليك","كوم","مصر","مليسيا","موريتانيا","موقع","همراه","پاکستان","ڀارت","कॉम","नेट","भारत","भारतम्","भारोत","संगठन","বাংলা","ভারত","ভাৰত","ਭਾਰਤ","ભારત","ଭାରତ","இந்தியா","இலங்கை","சிங்கப்பூர்","భారత్","ಭಾರತ","ഭാരതം","ලංකා","คอม","ไทย","ລາວ","გე","みんな","アマゾン","クラウド","グーグル","コム","ストア","セール","ファッション","ポイント","世界","中信","中国","中國","中文网","亚马逊","企业","佛山","信息","健康","八卦","公司","公益","台湾","台灣","商城","商店","商标","嘉里","嘉里大酒店","在线","大拿","天主教","娱乐","家電","广东","微博","慈善","我爱你","手机","招聘","政务","政府","新加坡","新闻","时尚","書籍","机构","淡马锡","游戏","澳門","点看","移动","组织机构","网址","网店","网站","网络","联通","谷歌","购物","通販","集团","電訊盈科","飞利浦","食品","餐厅","香格里拉","香港","닷넷","닷컴","삼성","한국"]'))},736266,e=>{"use strict";var t=e.i(878420),n=e.i(64386),r=e.i(530658),i=e.i(932200),a=e.i(167626),o=e.i(886513),s=e.i(72746),l=e.i(674310),c=e.i(455971),u=e.i(949574),d=e.i(57555),f=e.i(483443),m=e.i(99906),p=e.i(389959),h=(0,p.createContext)(null),g=(0,p.forwardRef)(function(e,g){e=(z=(0,r._)((0,i.useContextProps)(e,g,h),2))[0],g=z[1];var v,y,b,x,w,_,k,j,S,C,T,D,A,E,I,N,F,P,z,R=e.href&&!e.isDisabled?"a":"span",M=(v=(0,n._)((0,t._)({},e),{elementType:R}),y=g,b=v.elementType,x=v.onPress,w=v.onPressStart,_=v.onPressEnd,k=v.onClick,j=v.isDisabled,S=(0,o._)(v,["elementType","onPress","onPressStart","onPressEnd","onClick","isDisabled"]),C={},"a"!==(void 0===b?"a":b)&&(C={role:"link",tabIndex:j?void 0:0}),T=(0,u.useFocusable)(v,y).focusableProps,A=(D=(0,d.usePress)({onPress:x,onPressStart:w,onPressEnd:_,isDisabled:j,ref:y})).pressProps,E=D.isPressed,I=(0,s.filterDOMProps)(S,{labelable:!0}),N=(0,l.mergeProps)(T,A),F=(0,c.useRouter)(),P=(0,c.useLinkProps)(v),{isPressed:E,linkProps:(0,l.mergeProps)(I,P,(0,n._)((0,t._)({},N,C),{"aria-disabled":j||void 0,"aria-current":v["aria-current"],onClick:function(e){var t;null==(t=A.onClick)||t.call(A,e),k&&(k(e),console.warn("onClick is deprecated, please use onPress")),!F.isNative&&(0,a._)(e.currentTarget,HTMLAnchorElement)&&e.currentTarget.href&&!e.isDefaultPrevented()&&(0,c.shouldClientNavigate)(e.currentTarget,e)&&v.href&&(e.preventDefault(),F.open(e.currentTarget,e,v.href,v.routerOptions))}}))}),L=M.linkProps,U=M.isPressed,V=(0,f.useHover)(e),O=V.hoverProps,B=V.isHovered,q=(0,m.useFocusRing)(),H=q.focusProps,W=q.isFocused,G=q.isFocusVisible,$=(0,i.useRenderProps)((0,n._)((0,t._)({},e),{defaultClassName:"react-aria-Link",values:{isCurrent:!!e["aria-current"],isDisabled:e.isDisabled||!1,isPressed:U,isHovered:B,isFocused:W,isFocusVisible:G}}));return p.default.createElement(R,(0,n._)((0,t._)({ref:g,slot:e.slot||void 0},(0,l.mergeProps)($,L,O,H)),{"data-focused":W||void 0,"data-hovered":B||void 0,"data-pressed":U||void 0,"data-focus-visible":G||void 0,"data-current":!!e["aria-current"]||void 0,"data-disabled":e.isDisabled||void 0}),$.children)});e.s(["Link",()=>g],736266)},47685,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){if((0,r.default)(e),!e||/[\s<>]/.test(e)||0===e.indexOf("mailto:")||(t=(0,o.default)(t,c)).validate_length&&e.length>=2083||!t.allow_fragments&&e.includes("#")||!t.allow_query_components&&(e.includes("?")||e.includes("&")))return!1;if((v=(e=(v=(e=(v=e.split("#")).shift()).split("?")).shift()).split("://")).length>1){if(s=v.shift().toLowerCase(),t.require_valid_protocol&&-1===t.protocols.indexOf(s))return!1}else if(t.require_protocol)return!1;else if("//"===e.substr(0,2)){if(!t.allow_protocol_relative_urls)return!1;v[0]=e.substr(2)}if(""===(e=v.join("://")))return!1;if(""===(e=(v=e.split("/")).shift())&&!t.require_host)return!0;if((v=e.split("@")).length>1){if(t.disallow_auth||""===v[0]||(f=v.shift()).indexOf(":")>=0&&f.split(":").length>2)return!1;var n,s,f,m,p,h,g,v,y,b=function(e){if(Array.isArray(e))return e}(n=f.split(":"))||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),2!==n.length);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}}(n,2)||function(e,t){if(e){if("string"==typeof e)return l(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,2)}}(n,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),x=b[0],w=b[1];if(""===x&&""===w)return!1}p=v.join("@"),g=null,y=null;var _=p.match(u);if(_?(m="",y=_[1],g=_[2]||null):(m=(v=p.split(":")).shift(),v.length&&(g=v.join(":"))),null!==g&&g.length>0){if(h=parseInt(g,10),!/^[0-9]+$/.test(g)||h<=0||h>65535)return!1}else if(t.require_port)return!1;return t.host_whitelist?d(m,t.host_whitelist):(!!(0,a.default)(m)||!!(0,i.default)(m,t)||!!y&&!!(0,a.default)(y,6))&&(m=m||y,!(t.host_blacklist&&d(m,t.host_blacklist)))};var r=s(e.r(691512)),i=s(e.r(904667)),a=s(e.r(109679)),o=s(e.r(546734));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var c={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,require_host:!0,require_port:!1,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1,allow_fragments:!0,allow_query_components:!0,validate_length:!0},u=/^\[([^\]]+)\](?::([0-9]+))?$/;function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];if(e===r||"[object RegExp]"===Object.prototype.toString.call(r)&&r.test(e))return!0}return!1}t.exports=n.default,t.exports.default=n.default},310158,e=>{"use strict";var t=e.i(969979);e.s(["isValid",()=>t.default])},760129,e=>{"use strict";var t=e.i(716499),n=e.i(529131),r=/[T ]/,i=/[Z ]/i,a=/([Z+-].*)$/,o=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,s=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,l=/^([+-])(\d{2})(?::?(\d{2}))?$/;function c(e,c){(0,n.default)(1,arguments);var p,h,g=c||{},v=null==g.additionalDigits?2:(0,t.default)(g.additionalDigits);if(2!==v&&1!==v&&0!==v)throw RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var y=function(e){var t,n={},o=e.split(r);if(o.length>2)return n;if(/:/.test(o[0])?(n.date=null,t=o[0]):(n.date=o[0],t=o[1],i.test(n.date)&&(n.date=e.split(i)[0],t=e.substr(n.date.length,e.length))),t){var s=a.exec(t);s?(n.time=t.replace(s[1],""),n.timezone=s[1]):n.time=t}return n}(e);if(y.date){var b=function(e,t){var n=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:null};var i=r[1]&&parseInt(r[1]),a=r[2]&&parseInt(r[2]);return{year:null==a?i:100*a,restDateString:e.slice((r[1]||r[2]).length)}}(y.date,v);p=function(e,t){if(null===t)return null;var n,r,i,a,s,l,c,d,p,h,g,v,y=e.match(o);if(!y)return null;var b=!!y[4],x=u(y[1]),w=u(y[2])-1,_=u(y[3]),k=u(y[4]),j=u(y[5])-1;if(b){return(n=k,r=j,n>=1&&n<=53&&r>=0&&r<=6)?(i=t,a=k,s=j,(l=new Date(0)).setUTCFullYear(i,0,4),c=l.getUTCDay()||7,l.setUTCDate(l.getUTCDate()+((a-1)*7+s+1-c)),l):new Date(NaN)}var S=new Date(0);return(d=t,p=w,h=_,p>=0&&p<=11&&h>=1&&h<=(f[p]||(m(d)?29:28))&&(g=t,(v=x)>=1&&v<=(m(g)?366:365)))?(S.setUTCFullYear(t,w,Math.max(x,_)),S):new Date(NaN)}(b.restDateString,b.year)}if(isNaN(p)||!p)return new Date(NaN);var x=p.getTime(),w=0;if(y.time&&(isNaN(w=function(e){var t,n,r,i=e.match(s);if(!i)return null;var a=d(i[1]),o=d(i[2]),l=d(i[3]);return(t=a,n=o,r=l,24===t?0===n&&0===r:r>=0&&r<60&&n>=0&&n<60&&t>=0&&t<25)?36e5*a+6e4*o+1e3*l:NaN}(y.time))||null===w))return new Date(NaN);if(y.timezone){if(isNaN(h=function(e){if("Z"===e)return 0;var t,n=e.match(l);if(!n)return 0;var r="+"===n[1]?-1:1,i=parseInt(n[2]),a=n[3]&&parseInt(n[3])||0;return(t=a)>=0&&t<=59?r*(36e5*i+6e4*a):NaN}(y.timezone)))return new Date(NaN)}else{var _=new Date(x+w),k=new Date(0);return k.setFullYear(_.getUTCFullYear(),_.getUTCMonth(),_.getUTCDate()),k.setHours(_.getUTCHours(),_.getUTCMinutes(),_.getUTCSeconds(),_.getUTCMilliseconds()),k}return new Date(x+w+h)}function u(e){return e?parseInt(e):1}function d(e){return e&&parseFloat(e.replace(",","."))||0}var f=[31,null,31,30,31,30,31,31,30,31,30,31];function m(e){return e%400==0||e%4==0&&e%100}e.s(["parseISO",()=>c],760129)},871318,e=>{"use strict";var t=e.i(276385),n=e.i(682070),r=e.i(529131),i=e.i(878420),a=e.i(569384),o=e.i(973245),s=e.i(304277);function l(){var e=(0,a._)(["\n  query AgentInputRequiresPaymentMethodInfo($orgId: String) {\n    currentUser {\n      id\n      usageInterval {\n        ... on UsageInterval {\n          endDate\n        }\n      }\n      org(orgId: $orgId) {\n        ... on Org {\n          id\n          planInfo {\n            ... on OrgPlanInfo {\n              planEndDate\n            }\n          }\n        }\n        ... on Error {\n          message\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}e.i(566901);var c={},u=(0,o.gql)(l()),d=e.i(629536),f=e.i(441329),m=e.i(341126),p=e.i(284325),h=e.i(446530),g=e.i(613355),v=e.i(140487),y=e.i(960178),b=e.i(625484),x=e.i(899323),w=(0,h.cssRecord)({root:[g.rcss.borderRadius(8)],infoText:[g.rcss.textAlign.center]});function _(e){var a,o,l,h,g,_=e.owner,k=e.orgId,j=(0,f.useDoesBonsaiWebviewSupportFeature)("stripePayment")&&(null==_?void 0:_.type)!=="org",S=(0,f.useIsInBonsaiWebview)(),C=(0,p.default)(),T=(a={variables:{orgId:k}},o=(0,i._)({},c,a),s.useQuery(u,o)).data,D=null,A="",E=null==T?void 0:T.currentUser;E&&(k&&(null==(l=E.org)?void 0:l.__typename)==="Org"?D=(null==(g=E.org.planInfo)?void 0:g.__typename)==="OrgPlanInfo"?E.org.planInfo.planEndDate:null:k||(null==(h=E.usageInterval)?void 0:h.__typename)!=="UsageInterval"||(D=E.usageInterval.endDate)),D&&(A=", resets in "+function(e,t){return(0,r.default)(1,arguments),(0,n.default)(e,Date.now(),t)}(new Date(D),{addSuffix:!1}));var I=(null==_?void 0:_.type)==="org"?"".concat((0,m.orgLinks)({slug:_.slug}).settings.href,"?tab=billing"):"/account#billing",N="Add payment method";return j?N="Add more usage":S&&(N="Add payment method on replit.com"),(0,t.jsxs)(b.View,{gap:8,align:"center",css:w.root,children:[(0,t.jsxs)(y.Text,{css:w.infoText,color:"dimmer",children:["No monthly ",d.AGENT_NAME," usage left",A,(0,t.jsx)("br",{}),"Get more usage now by adding a payment method"]}),(0,t.jsx)(v.Button,{onClick:function(){j?C.showPaymentFlow({type:"setup",source:"agent_input_requires_payment_method"}):window.open(I,"_blank")},disabled:S&&!j,stretch:!0,iconLeft:(0,t.jsx)(x.default,{}),variant:"outlined",text:N})]})}e.s(["default",()=>_],871318)},801704,e=>{e.v({bold:"slashCommand-module__9-6L-a__bold",emptyState:"slashCommand-module__9-6L-a__emptyState",footer:"slashCommand-module__9-6L-a__footer",limitText:"slashCommand-module__9-6L-a__limitText",listBox:"slashCommand-module__9-6L-a__listBox",listBoxItem:"slashCommand-module__9-6L-a__listBoxItem",popover:"slashCommand-module__9-6L-a__popover",popoverContent:"slashCommand-module__9-6L-a__popoverContent",removeButton:"slashCommand-module__9-6L-a__removeButton",searchInput:"slashCommand-module__9-6L-a__searchInput",searchInputWrapper:"slashCommand-module__9-6L-a__searchInputWrapper",selectedConnector:"slashCommand-module__9-6L-a__selectedConnector","slide-fade-in":"slashCommand-module__9-6L-a__slide-fade-in"})},112801,e=>{e.v({container:"FigmaUrlInput-module__dzOMQW__container",mediumFont:"FigmaUrlInput-module__dzOMQW__mediumFont"})},56641,e=>{e.v({animatedContainer:"FigmaUrlInputAnimated-module__1iGfba__animatedContainer","smooth-slide-down-and-fade-in":"FigmaUrlInputAnimated-module__1iGfba__smooth-slide-down-and-fade-in"})},656381,164410,825423,257378,564416,600572,e=>{"use strict";var t=e.i(399119),n=e.i(904851),r=e.i(90659),i=e.i(721281),a=e.i(445789),o=e.i(167626),s=e.i(878420),l=e.i(64386),c=e.i(530658),u=e.i(346715),d=e.i(276385),f=e.i(717215),m=e.i(389959),p=e.i(654647),h=e.i(415756),g=e.i(753950),v=e.i(179302),y=e.i(928353),b=e.i(815900),x=e.i(58261),w=e.i(993796),_=e.i(569384),k=e.i(973245),j=e.i(304277);e.i(566901);var S=e.i(755078);function C(){var e=(0,_._)(["\n  query IsModelfarmEnabled($orgId: String!) {\n    currentUser {\n      id\n      org(orgId: $orgId) {\n        ... on Org {\n          id\n          settings {\n            ... on OrgSettings {\n              ...OrgAppSettingsData\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return C=function(){return e},e}var T={},D=(0,k.gql)(C(),S.OrgAppSettingsDataFragmentDoc),A=e.i(968783);function E(){var e,t,n,r=(0,A.useCurrentUserStoredOrgContext)().orgId,i=(e={skip:!r,variables:{orgId:null!=r?r:""}},t=(0,s._)({},T,e),j.useQuery(D,t)),a=i.data,o=i.loading,l=i.error,c="on"===(0,w.useFlag)({controlName:"flag-modelfarm-openrouter-blueprint",type:"string",default:"off"}),u="on"===(0,w.useFlag)({controlName:"flag-modelfarm-openai-blueprint",type:"string",default:"on"}),d="on"===(0,w.useFlag)({controlName:"flag-modelfarm-gemini-blueprint",type:"string",default:"off"}),f="on"===(0,w.useFlag)({controlName:"flag-modelfarm-anthropic-blueprint",type:"string",default:"off"});if(o||l)return{modelfarm:!1,openrouter:!1,openai:!1,anthropic:!1,gemini:!1};if(!r)return{modelfarm:!0,openrouter:c,openai:u,anthropic:f,gemini:d};var m=null==a||null==(n=a.currentUser)?void 0:n.org,p=(null==m?void 0:m.__typename)==="Org"?m.settings:void 0,h=(null==p?void 0:p.__typename)==="OrgSettings"&&p.modelfarmDisabled,g=(null==p?void 0:p.__typename)==="OrgSettings"&&p.openrouterDisabled,v=(null==p?void 0:p.__typename)==="OrgSettings"&&p.openaiDisabled,y=(null==p?void 0:p.__typename)==="OrgSettings"&&p.anthropicDisabled,b=(null==p?void 0:p.__typename)==="OrgSettings"&&p.geminiDisabled;return{modelfarm:!h,openrouter:c&&!g,openai:u&&!v,anthropic:f&&!y,gemini:d&&!b}}e.s(["useIsModelfarmEnabled",()=>E],164410);var I=e.i(441329),N=e.i(858248),F=e.i(709485),P=e.i(140487),z=e.i(607278),R=e.i(604963),M=e.i(960178),L=e.i(625484),U=e.i(283110),V=e.i(84613),O=e.i(720315),B=e.i(357912),q=e.i(927171),H=e.i(793579),W=e.i(801704),G=[{id:"blueprint-openai",displayName:"OpenAI",type:"blueprint"},{id:"blueprint-gemini",displayName:"Google Gemini",type:"blueprint"},{id:"blueprint-anthropic",displayName:"Anthropic",type:"blueprint"},{id:"blueprint-openrouter",displayName:"OpenRouter",type:"blueprint"}],$=function(e,t){switch(e){case"blueprint-openai":return(0,d.jsx)(B.default,{size:t});case"blueprint-gemini":return(0,d.jsx)(O.default,{size:t});case"blueprint-anthropic":return(0,d.jsx)(V.default,{size:t});case"blueprint-openrouter":return(0,d.jsx)(q.default,{size:t});default:return null}},K=function(e,t){return"blueprint"===e.type?$(e.id,t):"iconPath"in e&&e.iconPath?(0,d.jsx)(f.default,{src:e.iconPath,alt:e.displayName,width:t,height:t}):null},Y=function(e,t){"blueprint"===e.type?(0,N.track)(F.events.SLASH_COMMAND,{type:"modelfarm",action:t,displayName:e.displayName}):"blueprint"!==e.type&&(0,N.track)(F.events.SLASH_COMMAND,{type:"integration",action:t,connectorName:e.connectorName,connectorType:e.connectorType,displayName:e.displayName})},Z=function(e){var t,n,r=e.onSelect,i=e.onCancel,a=e.onCancelWithSpace,o=e.isEditingExisting,s=void 0!==o&&o,l=(0,x.useConnectorContext)().slashCommandConnectorItems,f=(0,c._)((0,m.useState)(""),2),g=f[0],v=f[1],y=(0,m.useRef)(null),b=(0,m.useRef)(null),_=E(),k=(0,w.useFlag)({controlName:"flag-slash-ai",default:!1}),j=(0,m.useMemo)(function(){return _.modelfarm&&k?G.filter(function(e){switch(e.id){case"blueprint-openai":return _.openai;case"blueprint-gemini":return _.gemini;case"blueprint-anthropic":return _.anthropic;case"blueprint-openrouter":return _.openrouter;default:return!1}}):[]},[_,k]),S=(0,m.useMemo)(function(){return(0,u._)(j).concat((0,u._)(l)).sort(function(e,t){return e.displayName.localeCompare(t.displayName)})},[j,l]);(0,m.useEffect)(function(){y.current&&y.current.focus()},[]);var C=(0,m.useMemo)(function(){return new h.Fzf(S,{fuzzy:!1,selector:function(e){return e.displayName.toLowerCase()}})},[S]),T=(0,m.useMemo)(function(){return g?C.find(g.toLowerCase()).map(function(e){return e.item}):S},[C,g,S]),D=null!=(n=null==(t=T[0])?void 0:t.id)?n:"";return 0===S.length?null:(0,d.jsxs)(L.View,{className:W.default.popover,children:[(0,d.jsxs)(L.View,{className:W.default.popoverContent,children:[(0,d.jsx)(L.View,{p:8,children:(0,d.jsx)(z.DecoratedInput,{ref:y,placeholder:"Search…",value:g,onChange:function(e){return v(e.target.value)},onKeyDown:function(e){if("Escape"===e.key){e.preventDefault(),null==i||i(g);return}if(("Backspace"===e.key||"Delete"===e.key)&&""===g){null==i||i(g);return}if(" "===e.key&&""===g&&!s){e.preventDefault(),null==a||a();return}if("ArrowDown"===e.key){e.preventDefault();var t,n=null==(t=b.current)?void 0:t.querySelector('[role="option"]');n&&n.focus()}if("Enter"===e.key)if(e.preventDefault(),T.length>0){var o=T[0];Y(o,"selected"),r(o)}else g&&(null==i||i(g))},className:W.default.searchInputWrapper,inputClassName:W.default.searchInput,iconLeft:(0,d.jsx)(H.default,{size:12})})}),(0,d.jsx)(L.View,{py:2,pl:8,row:!0,align:"center",children:(0,d.jsx)(M.Text,{variant:"small",color:"dimmer",className:W.default.bold,children:"Integrations"})}),(0,d.jsx)("div",{ref:b,role:"presentation",onKeyDown:function(e){if("Escape"===e.key&&(e.preventDefault(),null==i||i(g)),"ArrowUp"===e.key){var t,n,r=null==(t=b.current)?void 0:t.querySelector('[role="option"]');if(r&&document.activeElement===r){e.preventDefault(),null==(n=y.current)||n.focus();return}}("ArrowUp"===e.key||"ArrowDown"===e.key)&&e.preventDefault()},children:(0,d.jsx)(p.ListBox,{"aria-label":"Integrations",className:W.default.listBox,items:T,selectionMode:"single",onSelectionChange:function(e){if("all"!==e){var t=Array.from(e)[0];if(t){var n=S.find(function(e){return e.id===t});n&&(Y(n,"selected"),r(n))}}},renderEmptyState:function(){return(0,d.jsx)("div",{className:W.default.emptyState,children:(0,d.jsx)(M.Text,{variant:"small",color:"dimmer",children:"No matching integrations"})})},children:function(e){return(0,d.jsxs)(p.ListBoxItem,{id:e.id,textValue:e.displayName,className:W.default.listBoxItem,children:[(0,d.jsxs)(L.View,{row:!0,gap:8,align:"center",children:[K(e,20),(0,d.jsx)(M.Text,{variant:"small",children:e.displayName})]}),e.id===D?(0,d.jsx)(M.Text,{variant:"small",color:"dimmest",children:"Enter"}):null]})}},D)})]}),(0,d.jsx)(L.View,{className:W.default.footer,onClick:function(){return null==i?void 0:i(g)},role:"button",tabIndex:0,onKeyDown:function(e){("Enter"===e.key||" "===e.key)&&(e.preventDefault(),null==i||i(g))},children:(0,d.jsxs)(L.View,{row:!0,gap:4,justify:"space-between",align:"center",children:[(0,d.jsx)(M.Text,{className:W.default.limitText,variant:"small",color:"dimmer",children:s?"Close":g?"Type '/".concat(g,"' on page"):"Type '/' on page"}),(0,d.jsx)(M.Text,{variant:"small",color:"dimmest",children:"esc"})]})})]})},Q=function(e){var t=e.item,n=e.onSelect,r=e.onRemove,i=(0,c._)((0,m.useState)(!1),2),a=i[0],o=i[1];return(0,d.jsxs)(R.PopoverTrigger,{isOpen:a,onOpenChange:o,label:"Select connector",children:[function(e){return(0,d.jsx)(P.BaseButton,(0,l._)((0,s._)({clsx:W.default.selectedConnector},e),{onPress:function(){e.onClick()},children:(0,d.jsxs)(L.View,{row:!0,gap:4,align:"center",children:[K(t,16),(0,d.jsx)(M.Text,{variant:"small",children:t.displayName}),(0,d.jsx)("span",{className:W.default.removeButton,onClick:function(e){e.stopPropagation(),r(),Y(t,"cancelled")},role:"button",tabIndex:0,"aria-label":"Remove",onKeyDown:function(e){("Enter"===e.key||" "===e.key)&&(e.preventDefault(),e.stopPropagation(),r(),Y(t,"cancelled"))},children:(0,d.jsx)(U.default,{size:12})})]})}))},(0,d.jsx)(L.View,{p:0,children:(0,d.jsx)(Z,{onSelect:function(e){o(!1),n(e)},onCancel:function(e){o(!1)},isEditingExisting:!0})})]})},J=function(e){var t=e.connectorId,n=e.onSelect,r=e.onRemove,i=(0,x.useConnectorContext)().slashCommandConnectorItems,a=E(),o=(0,m.useMemo)(function(){var e=a.modelfarm?G.filter(function(e){switch(e.id){case"blueprint-openai":return a.openai;case"blueprint-gemini":return a.gemini;case"blueprint-anthropic":return a.anthropic;case"blueprint-openrouter":return a.openrouter;default:return!1}}):[],n=(0,u._)(e).concat((0,u._)(i)).find(function(e){return e.id===t});return n||{id:t,displayName:"Select an integration",type:"blueprint"}},[t,a,i]);return(0,d.jsx)(Q,{item:o,onSelect:n,onRemove:r})},X=function(e){function s(e,r,a,o){var l;return(0,n._)(this,s),l=(0,t._)(this,s),(0,i._)(l,"connectorId",void 0),(0,i._)(l,"view",void 0),(0,i._)(l,"from",void 0),(0,i._)(l,"to",void 0),l.connectorId=e,l.view=r,l.from=a,l.to=o,l}return(0,a._)(s,e),(0,r._)(s,[{key:"eq",value:function(e){return(0,o._)(e,s)&&e.connectorId===this.connectorId&&e.from===this.from&&e.to===this.to}},{key:"toDOM",value:function(){var e=this,t=document.createElement("span");t.setAttribute("aria-hidden","true"),t.style.display="inline-flex",t.style.verticalAlign="middle",t.style.lineHeight="1",t.style.userSelect="none",t.style.pointerEvents="auto";var n=(0,y.createCodeMirrorElement)((0,d.jsx)(J,{connectorId:this.connectorId,onSelect:function(t){var n="blueprint"===t.type?'{{"replit-type": "blueprint", "name": "'.concat(t.displayName,'"}}'):'{{"replit-type": "connector", "id": "'.concat(t.id,'", "name": "').concat(t.displayName,'"}}');e.view.dispatch({changes:{from:e.from,to:e.to,insert:n},selection:g.EditorSelection.cursor(e.from+n.length)}),window.requestAnimationFrame(function(){e.view.focus()})},onRemove:function(){var t=e.to<e.view.state.doc.length&&" "===e.view.state.doc.sliceString(e.to,e.to+1)?e.to+1:e.to;e.view.dispatch({changes:{from:e.from,to:t,insert:""}}),window.requestAnimationFrame(function(){e.view.focus()})}}));return t.appendChild(n),t}},{key:"ignoreEvent",value:function(){return!1}}]),s}(v.WidgetType),ee=new v.MatchDecorator({regexp:/\{\{[^}]*"replit-type"\s*:\s*"(connector|blueprint)"[^}]*\}\}/g,decorate:function(e,t,n,r,i){try{var a,o=r[0],s=r[1];if("connector"===s){var l=o.match(b.connectorIdJsonRegex);if(!l)return;a=l[1]}else{var c=o.match(b.blueprintNameJsonRegex);if(!c)return;var u=c[1],d=G.find(function(e){return e.displayName===u});if(!d)return;a=d.id}e(t,n,v.Decoration.replace({widget:new X(a,i,t,n)}))}catch(e){}}}),et=g.StateEffect.define(),en=g.StateField.define({create:function(){return null},update:function(e,t){var n=!0,r=!1,i=void 0;try{for(var a,o=t.effects[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(s.is(et))return s.value}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return t.docChanged?null:e},provide:function(e){return v.showTooltip.from(e)}}),er=v.ViewPlugin.fromClass(function(){function e(t){(0,n._)(this,e),(0,i._)(this,"view",void 0),this.view=t}return(0,r._)(e,[{key:"update",value:function(e){var t=this;if(e.docChanged){var n=e.state,r=!1,i=-1;if(e.changes.iterChanges(function(e,t,n,a,o){1===o.length&&"/"===o.sliceString(0,1)&&(r=!0,i=n)}),r){var a=i>0?n.doc.sliceString(i-1,i):"";(0===i||" "===a||"\n"===a||"	"===a)&&Promise.resolve().then(function(){return t.showMenu()})}else Promise.resolve().then(function(){return t.removeMenu()})}e.selectionSet&&this.view.state.field(en)&&Promise.resolve().then(function(){return t.removeMenu()})}},{key:"showMenu",value:function(){var e=this,t=this.view.state.selection.main.head,n=(0,I.isInBonsaiWebviewWindow)();this.view.dispatch({effects:et.of({pos:t,above:n,strictSide:n,create:function(t){return{dom:(0,y.createCodeMirrorElement)((0,d.jsx)(Z,{onSelect:function(t){e.replaceSlashWithConnector(t),e.view.dispatch({effects:et.of(null)}),window.requestAnimationFrame(function(){e.view.focus()})},onCancel:function(t){t&&e.insertTextAtSlash(t),e.view.dispatch({effects:et.of(null)}),window.requestAnimationFrame(function(){e.view.focus()})},onCancelWithSpace:function(){e.addSpace(),e.view.dispatch({effects:et.of(null)}),window.requestAnimationFrame(function(){e.view.focus()})}}))}}})})}},{key:"replaceSlashWithConnector",value:function(e){var t=this.view,n=t.state,r=t.dispatch,i=n.selection.main.head,a="blueprint"===e.type?'{{"replit-type": "blueprint", "name": "'.concat(e.displayName,'"}}'):'{{"replit-type": "connector", "id": "'.concat(e.id,'", "name": "').concat(e.displayName,'"}}');r(n.update({changes:{from:i-1,to:i,insert:a+" "},selection:g.EditorSelection.cursor(i-1+a.length+1)}))}},{key:"insertTextAtSlash",value:function(e){var t=this.view,n=t.state,r=t.dispatch,i=n.selection.main.head;r(n.update({changes:{from:i,to:i,insert:e},selection:g.EditorSelection.cursor(i+e.length)}))}},{key:"addSpace",value:function(){var e=this.view,t=e.state,n=e.dispatch,r=t.selection.main.head;n(t.update({changes:{from:r,to:r,insert:" "},selection:g.EditorSelection.cursor(r+1)}))}},{key:"removeMenu",value:function(){(0,this.view.dispatch)({effects:et.of(null)})}}]),e}()),ei=v.ViewPlugin.fromClass(function(){function e(t){(0,n._)(this,e),(0,i._)(this,"decorations",void 0),this.decorations=ee.createDeco(t)}return(0,r._)(e,[{key:"update",value:function(e){this.decorations=ee.updateDeco(e,this.decorations)}}]),e}(),{decorations:function(e){return e.decorations},provide:function(e){return v.EditorView.atomicRanges.of(function(t){var n;return(null==(n=t.plugin(e))?void 0:n.decorations)||v.Decoration.none})}});function ea(e){var t=[],n=e.toString(),r=n.matchAll(b.connectorRegex),i=!0,a=!1,o=void 0;try{for(var s,l=r[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var c=s.value;void 0!==c.index&&t.push({from:c.index,to:c.index+c[0].length})}}catch(e){a=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}var u=n.matchAll(b.blueprintRegex),d=!0,f=!1,m=void 0;try{for(var p,h=u[Symbol.iterator]();!(d=(p=h.next()).done);d=!0){var g=p.value;void 0!==g.index&&t.push({from:g.index,to:g.index+g[0].length})}}catch(e){f=!0,m=e}finally{try{d||null==h.return||h.return()}finally{if(f)throw m}}return t.sort(function(e,t){return e.from-t.from}),t}var eo=v.keymap.of([{key:"Escape",run:function(e){return!!e.state.field(en)&&(e.dispatch({effects:[et.of(null)]}),!0)}},{key:"Backspace",run:function(e){var t=e.state,n=t.selection.main.head,r=ea(t.doc),i=!0,a=!1,o=void 0;try{for(var s,l=r[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var c=s.value;if(n===c.to)return e.dispatch({changes:{from:c.from,to:c.to,insert:""},selection:{anchor:c.from}}),!0}}catch(e){a=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}return!1}},{key:"Delete",run:function(e){var t=e.state,n=t.selection.main.head,r=ea(t.doc),i=!0,a=!1,o=void 0;try{for(var s,l=r[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var c=s.value;if(n===c.from)return e.dispatch({changes:{from:c.from,to:c.to,insert:""},selection:{anchor:c.from}}),!0}}catch(e){a=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}return!1}},{key:"Mod-Backspace",mac:"Alt-Backspace",run:function(e){var t=e.state,n=t.selection.main.head,r=ea(t.doc),i=null,a=!0,o=!1,s=void 0;try{for(var l,c=r[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var u=l.value;u.to<=n&&(!i||u.to>i.to)&&(i=u)}}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}if(i){var d=t.doc.sliceString(i.to,n);return!/\w/.test(d)&&(e.dispatch({changes:{from:i.from,to:n,insert:""},selection:{anchor:i.from}}),!0)}return!1}},{key:"Mod-Delete",mac:"Alt-Delete",run:function(e){var t=e.state,n=t.selection.main.head,r=ea(t.doc),i=null,a=!0,o=!1,s=void 0;try{for(var l,c=r[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var u=l.value;u.from>=n&&(!i||u.from<i.from)&&(i=u)}}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}if(i){var d=t.doc.sliceString(n,i.from);return!/\w/.test(d)&&(e.dispatch({changes:{from:n,to:i.to,insert:""},selection:{anchor:n}}),!0)}return!1}},{key:"ArrowLeft",run:function(e){var t=e.state,n=t.selection.main.head,r=ea(t.doc),i=!0,a=!1,o=void 0;try{for(var s,l=r[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var c=s.value;if(n===c.to)return e.dispatch({selection:{anchor:c.from}}),!0}}catch(e){a=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}return!1}},{key:"ArrowRight",run:function(e){var t=e.state,n=t.selection.main.head,r=ea(t.doc),i=!0,a=!1,o=void 0;try{for(var s,l=r[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var c=s.value;if(n===c.from)return e.dispatch({selection:{anchor:c.to}}),!0}}catch(e){a=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}return!1}}]),es=[en,er,ei,eo];e.s(["slashCommandExtension",()=>es],656381);var el=v.EditorView.contentAttributes.of({autocapitalize:"on"});e.s(["autocapitalizeExtension",()=>el],825423);var ec=v.EditorView.contentAttributes.of({autocorrect:"on"});e.s(["autocorrectExtension",()=>ec],257378);var eu=e.i(886513),ed=e.i(399528),ef=e.i(906368),em=e.i(72158),ep=e.i(488566),eh=e.i(266159),eg=e.i(893255),ev=e.i(210736),ey=e.i(555970),eb=e.i(738705),ex=e.i(684481),ew=e.i(221250),e_=e.i(248327),ek=e.i(966684),ej=e.i(945698),eS=e.i(442234),eC=e.i(342965),eT=e.i(703613),eD=e.i(786962),eA=e.i(650587),eE=e.i(98816),eI=e.i(343252),eN=e.i(703774),eF=v.keymap.of([{key:"Shift-Enter",run:ep.insertNewlineAndIndent,shift:ep.insertNewlineAndIndent},{key:"ArrowDown",run:(0,em.moveCompletionSelection)(!0)},{key:"ArrowUp",run:(0,em.moveCompletionSelection)(!1)},{key:"PageDown",run:(0,em.moveCompletionSelection)(!0,"page")},{key:"PageUp",run:(0,em.moveCompletionSelection)(!1,"page")},{key:"Enter",run:em.acceptCompletion},{key:"Mod-z",run:ep.undo,preventDefault:!0},{key:"Mod-y",run:ep.redo,preventDefault:!0},{key:"Mod-Shift-z",run:ep.redo,preventDefault:!0}]),eP=v.keymap.of([{key:"Enter",run:ep.insertNewlineAndIndent,shift:ep.insertNewlineAndIndent}]),ez=v.EditorView.domEventHandlers({drop:function(e){var t;return!!(null==(t=e.dataTransfer)?void 0:t.files.length)&&(e.preventDefault(),!0)}}),eR=(0,m.forwardRef)(function(e,t){var n,r,i,a,l,f,p,h,y,b,x,_,k,j,S,C,T,D=e.elementRef,A=e.initialDoc,E=e.fontSize,N=e.readOnly,F=e.extensions,P=e.initializing,z=e.loading,R=e.onException,M=(0,eu._)(e,["elementRef","initialDoc","fontSize","readOnly","extensions","initializing","loading","onException"]),L=(0,c._)((0,m.useState)(null),2),U=L[0],V=L[1],O=(0,c._)((0,m.useState)(null),2),B=O[0],q=O[1],H=(0,m.useRef)(A),W=(0,c._)((0,m.useState)(0),2),G=W[0],$=W[1],K=(0,m.useRef)(G),Y=(0,m.useCallback)(function(){$(function(e){if(e-K.current>=5)throw Error("CodeMirror error refresh loop detected");return e+1})},[]);(0,m.useEffect)(function(){var e=setTimeout(function(){K.current=G},1e3);return function(){return clearTimeout(e)}},[G]),(0,m.useImperativeHandle)(t,function(){return{view:U,dom:B}},[U,B]),(0,ew.assertClientSide)();var Z=(0,eE.default)(null!=R?R:ew.defaultOnException),Q=(r=(n={fontSize:E,readOnly:N,extensions:F,initializing:P,loading:z}).fontSize,i=n.readOnly,a=n.extensions,l=n.initializing,f=n.loading,p=(0,ed.useRouter)(),h=(0,eA.useIsMobile)(),y=(0,I.isInBonsaiWebview)(p),b=(0,I.useIsInMobileWorkspace)(),x=(0,w.useFlag)({controlName:"flag-editor-root-level-tooltips",logFlagToAnalytics:!1}),_=(0,ew.useMemoizedExtensions)(a),j=(k=(0,eN.useTheme)()).values,S=k.isDarkColorScheme,C=ej.ThemeCompartment.use(j,S,r),T=[e_.EditableCompartment.use(i,y,x,!1),ek.HistoryCompartment.use(i),ew.ExtensionsCompartment.use(_),C,eS.LineWrappingCompartment.use(!0),ey.InitializingCompartment.use(l),eb.LoadingCompartment.use(f),ex.IsMobileCompartment.use(b)],[g.Prec.highest(eD.EditorReactRoot),eT.StateListenerPlugin,eb.BindLoadingPlugin,eg.HasHadUserInput,eh.AnimatedRanges,h?eP:eF,eC.DisableGrammarly,ez].concat((0,u._)(T)));(0,m.useEffect)(function(){var e,t=function(e){if(Z.current(e),(0,ew.shouldRefreshForError)(e)){var t=(0,o._)(e,Error)?e.message:void 0;ef.addBreadcrumb({category:"codemirror",message:"Codemirror refresh called",data:{error:t},level:"error"}),Y()}};if(B){var n=null;try{n=new v.EditorView({doc:null!=(e=H.current)?e:void 0,parent:B,extensions:[v.EditorView.exceptionSink.of(t)].concat((0,u._)(Q))})}catch(e){t(e)}return n&&V(n),function(){if(n){V(null);try{n.destroy()}catch(e){t(e)}}}}},[B,G]),(0,ev.useObserveCodeMirrorResize)(U);var J=(0,eI.useMergeRefs)([q,D],{breadcrumb:"client/codemirror/react/ProseCodeMirror.tsx:353"});return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",(0,s._)({ref:J},M)),(0,d.jsx)(eD.EditorReactRootMount,{view:U})]})});e.s(["default",0,eR],564416);var eM=e.i(828043),eL=e.i(89078),eU=e.i(162914),eV=e.i(480028),eO=e.i(818503),eB=e.i(624782),eq=e.i(929872),eH=e.i(862615),eW=e.i(49304),eG=e.i(112801),e$="Invalid Figma URL. Please ensure link is a valid Figma frame for your connected account in the format https://www.figma.com/design/...";function eK(e){var t=e.source,n=e.onCancel,r=e.onSubmit,i=e.title,a=e.submitButtonText,o=e.showHelpText,s=e.className,l=e.autoFocus,u=void 0===l||l,f=(0,c._)((0,m.useState)(null),2),p=f[0],h=f[1],g=(0,c._)((0,m.useState)(""),2),v=g[0],y=g[1],b=(0,m.useRef)(null),x=(0,eU.default)(v,500),w="workspace"===t,_=w?F.events.AGENT_USED:F.events.START_WITH_AI_USED,k=(0,m.useCallback)(function(){(0,N.track)(_,{action:"attachment_import_from_figma_cancelled"}),n()},[n,_]);(0,m.useEffect)(function(){x?h((0,c._)((0,eM.isValidFigmaUrl)(x),1)[0]?null:e$):h(null)},[x]);var j=(0,m.useCallback)(function(){var e=v.trim();if(!e)return void h("Please enter a Figma URL");var t=(0,c._)((0,eM.isValidFigmaUrl)(e),2),n=t[0],i=t[1];n&&i?(h(null),(0,N.track)(_,{action:"attachment_import_from_figma_attached",figma_url:e}),r(e)):h(e$)},[v,r,_]),S=(0,m.useCallback)(function(e){"Enter"===e.key?(e.preventDefault(),j()):"Escape"===e.key&&(e.preventDefault(),k())},[j,k]);return(0,m.useEffect)(function(){if(u){var e;null==(e=b.current)||e.focus()}},[u]),(0,d.jsxs)(eq.Surface,{elevated:!0,clsx:[eG.default.container,s],children:[(0,d.jsxs)(L.View,{row:!0,gap:8,align:"center",children:[(0,d.jsx)(eH.default,{size:20}),(0,d.jsx)(M.Header,{variant:"subheadDefault",level:3,children:void 0===i?"Import Figma design":i}),w?(0,d.jsx)(eB.Pill,{text:"Beta",colorway:"primary",compact:!0}):null]}),(0,d.jsxs)(L.View,{gap:8,children:[(0,d.jsx)(eO.Label,{htmlFor:"figmaUrl",className:eG.default.mediumFont,children:"Figma frame URL"}),(0,d.jsx)(z.Input,{id:"figmaUrl",ref:b,placeholder:"https://www.figma.com/file/...",value:v,onChange:function(e){return y(e.target.value)},onKeyDown:S,autoFocus:u}),p?(0,d.jsx)(L.View,{pb:8,py:4,children:(0,d.jsx)(eL.default,{children:p})}):null,void 0===o||o?(0,d.jsxs)(L.View,{row:!0,gap:8,align:"center",children:[(0,d.jsx)(L.View,{shrink:!1,children:(0,d.jsx)(eW.default,{color:eV.tokens.foregroundDimmer})}),(0,d.jsx)(L.View,{grow:!0,shrink:!0,children:(0,d.jsxs)(M.Text,{color:"dimmer",variant:"small",multiline:!0,children:[(0,d.jsx)("span",{className:eG.default.mediumFont,children:"How to find your frame URL:"})," ",'In Figma Design, right click on the frame you want to import, then click "Copy/Paste as" and finally "Copy link to selection".']})})]}):null,(0,d.jsxs)(L.View,{row:!0,gap:8,justify:"end",children:[(0,d.jsx)(P.Button,{text:"Cancel",variant:"outlined",onClick:k}),(0,d.jsx)(P.Button,{variant:"outlined",colorway:!v.trim()||p?"grey":"primary",text:void 0===a?"Attach to prompt":a,disabled:!v.trim()||!!p,onClick:j})]})]})]})}var eY=e.i(56641);function eZ(e){return(0,d.jsx)(eK,(0,l._)((0,s._)({},e),{className:eY.default.animatedContainer}))}function eQ(e){var t=e.source,n=e.onCancel,r=e.onSubmit;return(0,d.jsx)(eZ,{source:t,onCancel:n,onSubmit:r,title:"Import Figma design"})}e.s(["FigmaUrlInput",()=>eQ],600572)},887616,e=>{"use strict";var t=e.i(968783),n=e.i(993796),r=e.i(325990);function i(){var e=(0,t.useCurrentUserStoredOrgContext)().orgId,i=(0,n.useFlag)({controlName:"flag-exponential-mobility"}),a=(0,r.useOrgFlag)({controlName:"flag-exponential-mobility"});return e?null!=a&&a:i}e.s(["default",()=>i])},934226,e=>{"use strict";var t=e.i(276385);function n(e){var n=e.uploadFiles,r=e.fileUploadInputRef,i=e.dirUploadInputRef;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("input",{style:{display:"none"},ref:r,type:"file",onChange:function(e){var t=e.target.files;t&&n({files:Array.from(t)})},onClick:function(e){e.currentTarget.value=""},multiple:!0,accept:"*"}),(0,t.jsx)("input",{style:{display:"none"},ref:i,type:"file",onChange:function(e){var t=e.target.files;t&&n({files:Array.from(t)})},onClick:function(e){e.currentTarget.value=""},webkitdirectory:"true",mozdirectory:"true",msdirectory:"true",odirectory:"true",directory:"true",accept:"*"})]})}e.s(["UploadInputs",()=>n])},956515,628576,624714,709696,777110,e=>{"use strict";var t=e.i(297083),n=e.i(817556),r=e.i(276385),i=e.i(389959),a=e.i(709485),o=e.i(441329),s=e.i(858248),l=e.i(934226),c=e.i(480028),u=e.i(446530),d=e.i(613355),f=e.i(136540),m=e.i(601059),p=e.i(625484),h=e.i(243914),g=e.i(862615),v=e.i(41803),y=e.i(108428),b=e.i(326863),x=(0,u.cssRecord)({button:[d.rcss.color.foregroundDimmer,{"&:hover:not([disabled], [aria-disabled])":d.rcss.color.foregroundDefault,"&:disabled":{cursor:"default",opacity:.5}}]});function w(e){var u=e.source,d=e.disabled,w=e.disabledReason,_=e.status,k=e.addAttachments,j=e.onInteract,S=e.onFigmaImportClick,C=(0,o.useIsInBonsaiWebview)(),T="workspace"===u,D=T?a.events.AGENT_USED:a.events.START_WITH_AI_USED,A=(0,i.useRef)(null),E=(0,i.useRef)(null),I=function(){(0,s.track)(D,{action:"attachment_import_from_figma_clicked"}),null==S||S()};return(0,r.jsxs)(p.View,{children:[(0,r.jsxs)(m.PopupMenu,{trigger:(0,r.jsx)(f.IconButton,{alt:"Attach file",size:24,disabled:d||"loading"===_,tooltipContents:w||"Add attachment",tooltipPlacement:"top-start",css:x.button,onClick:function(){(0,s.track)(D,{action:"attachment_button_clicked"})},children:(0,r.jsx)(y.default,{})}),isDisabled:d||"loading"===_,placement:"top start",children:[(0,r.jsx)(m.MenuHeader,{text:"Add attachments"}),(0,r.jsx)(m.MenuItem,{label:"Upload a file",icon:(0,r.jsx)(v.default,{}),onAction:function(){var e;(0,s.track)(D,{action:"attachment_upload_file_clicked"}),null==j||j(),null==(e=A.current)||e.click()}}),T?(0,r.jsx)(function(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.Separator,{}),(0,r.jsx)(m.MenuItem,{label:"Attach a Figma design",icon:(0,r.jsx)(g.default,{}),onAction:I})]})},{}):(0,r.jsx)(function(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.Separator,{}),(0,r.jsx)(m.MenuHeader,{text:"Add a starting point"}),(0,r.jsx)(m.MenuItem,{label:"Import a Figma design",icon:(0,r.jsx)(g.default,{}),onAction:I}),!C&&(0,r.jsx)(m.MenuItem,{label:"Import an existing project",icon:(0,r.jsx)(b.default,{}),iconRight:(0,r.jsx)(h.default,{color:c.tokens.foregroundDimmest}),href:"/import",target:"_blank",onAction:function(){(0,s.track)(D,{action:"attachment_import_from_existing_project_clicked"})}})]})},{})]}),(0,r.jsx)(l.UploadInputs,{fileUploadInputRef:A,dirUploadInputRef:E,uploadFiles:function(e){return(0,t._)(function(){return(0,n._)(this,function(t){switch(t.label){case 0:return[4,k(e.files.map(function(e){return{fileName:e.name,file:e}}))];case 1:return t.sent(),[2]}})})()}})]})}e.s(["AttachmentButton",()=>w],956515);var _=e.i(530658),k=e.i(346715),j=e.i(736266);e.i(877212);var S=e.i(924908),C=e.i(629536),T=e.i(828043),D=e.i(631936),A=e.i(200260),E=e.i(64256),I=e.i(445059),N=e.i(6338),F=e.i(140487),P=e.i(624782),z=e.i(929872),R=e.i(960178),M=e.i(751273),L=e.i(616278),U=e.i(51606),V=e.i(666860),O=e.i(987154),B=e.i(658975),q=e.i(363201),H=e.i(121817),W=e.i(488014),G=[d.rcss.border({color:c.tokens.outlineDimmer}),d.rcss.borderRadius("container"),d.rcss.overflow("hidden"),{cursor:"default",userSelect:"none"}],$=(0,u.cssRecord)({container:G,containerDisabled:(0,k._)(G).concat([{cursor:"default",userSelect:"none",pointerEvents:"none",opacity:.5}]),header:[d.rcss.width("100%"),{height:24}],faviconContainer:[{width:16,height:16,borderRadius:4,backgroundColor:c.tokens.interactiveBackground}],favicon:[{width:12,height:12}],urlText:[d.rcss.truncate,d.rcss.maxWidth(2*A.SMALL_FILE_ATTACHMENT_WIDTH-20),{fontSize:c.tokens.fontSizeSmall}],option:[d.rcss.reset.button,d.rcss.align.center,d.rcss.justify.center,d.rcss.colWithGap(4),d.rcss.p(4),d.rcss.borderRadius("container"),d.rcss.border({color:c.tokens.outlineDefault}),d.rcss.width(A.SMALL_FILE_ATTACHMENT_WIDTH),d.rcss.height(A.SMALL_ATTACHMENT_HEIGHT),d.rcss.cursor.pointer,{transition:"background-color 0.2s ease, color 0.2s ease",":not(:disabled):hover":{backgroundColor:c.tokens.interactiveBackgroundActive},":not(:disabled):hover .option-text":{color:c.tokens.foregroundDefault},":not(:disabled):hover .option-icon":{color:c.tokens.foregroundDefault},":disabled":{cursor:"default"}}],loadingOption:[d.rcss.align.center,d.rcss.justify.center,d.rcss.p(8),d.rcss.borderRadius("container"),d.rcss.width(A.SMALL_FILE_ATTACHMENT_WIDTH),d.rcss.height(A.SMALL_ATTACHMENT_HEIGHT),N.loadingStyle.backgroundPulse(c.tokens.backgroundHighest,c.tokens.backgroundHigher)],icon:[{color:c.tokens.foregroundDimmer,transition:"color 0.2s ease"}],errorIcon:[{color:c.tokens.accentNegativeDefault,transition:"color 0.2s ease"}],successIcon:[{color:c.tokens.accentPositiveDefault,transition:"color 0.2s ease"}],optionText:[d.rcss.textAlign.center,{lineHeight:"1.3"}]});function K(e){var a=e.source,o=e.url,s=e.addUrlAttachment,l=e.removeUrlAttachment,u=e.onError,d=e.isDisabled,f=o.replace(/^https?:\/\//,""),m=(0,S.useYapper)(),h=(0,_._)((0,i.useState)(!1),2),g=h[0],v=h[1],y=(0,_._)((0,i.useState)(!1),2),b=y[0],x=y[1],w=(0,_._)((0,i.useState)(null),2),k=w[0],j=w[1],D=(0,_._)((0,i.useState)(null),2),N=D[0],L=D[1],V=(0,_._)((0,i.useState)(null),2),W=V[0],G=V[1],K=(0,_._)((0,i.useState)(null),2),Y=K[0],Q=K[1],J=(0,_._)((0,i.useState)(!1),2),X=J[0],ee=J[1],et=(0,i.useRef)(null),en=(0,i.useMemo)(function(){try{var e=o.trim();return/^[a-zA-Z][a-zA-Z\d+\-.]*:\/\//.test(e)||(e="http://"+e),new URL(e).origin+"/"}catch(e){return null}},[o]),er=(0,i.useMemo)(function(){return(0,T.isValidFigmaUrl)(o)[0]},[o]),ei=function(e){G(e),u(e)},ea=function(e){Q(e),u(e)};return(0,i.useEffect)(function(){if(et.current){var e=et.current,t=e.offsetWidth;ee(e.scrollWidth>t)}},[f]),(0,r.jsxs)(z.Surface,{elevated:!0,css:d?$.containerDisabled:$.container,children:[(0,r.jsxs)(z.Surface,{row:!0,gap:8,align:"center",css:$.header,px:8,py:0,elevated:!0,children:[en?(0,r.jsx)(p.View,{css:$.faviconContainer,align:"center",justify:"center",children:(0,r.jsx)("img",{css:$.favicon,src:"https://www.google.com/s2/favicons?domain=".concat(en,"&sz=32"),alt:f})}):(0,r.jsx)(O.default,{color:c.tokens.foregroundDimmest,size:16}),er?(0,r.jsx)(p.View,{children:(0,r.jsxs)(p.View,{gap:4,row:!0,align:"center",children:[(0,r.jsx)(R.Text,{multiline:!1,ref:et,children:"Figma design"}),er&&"workspace"===a?(0,r.jsx)(P.Pill,{text:"Beta",colorway:"primary",compact:!0}):null]})}):(0,r.jsx)(M.Tooltip,{tooltip:o,isDisabled:!X,placement:"top",children:(0,r.jsx)(R.Text,{multiline:!1,css:$.urlText,ref:et,children:f})})]}),(0,r.jsxs)(p.View,{row:!0,gap:8,px:8,py:6,justify:"space-between",children:[er?null:(0,r.jsxs)(r.Fragment,{children:[k?(0,r.jsx)(A.FileAttachment,{attachment:k,getAttachmentTypeDisclaimer:(0,E.getAttachmentTypeDisclaimer)({aiName:(0,C.getAgentName)({capitalizeFirstChar:!0})}),removeAttachment:function(){l(k.path),j(null)},size:"small"},k.path):g?(0,r.jsx)(p.View,{css:$.loadingOption,children:(0,r.jsxs)(R.Text,{color:"dimmer",variant:"small",css:$.optionText,children:["Taking ",(0,r.jsx)("br",{})," screenshot..."]})}):(0,r.jsx)(M.Tooltip,{tooltip:W,isDisabled:!W,placement:"top",children:(0,r.jsxs)(F.BaseButton,{css:$.option,onPress:function(){return(0,t._)(function(){var e,t,r,i,a,l;return(0,n._)(this,function(n){switch(n.label){case 0:v(!0),G(null),e="screenshot-".concat(Date.now(),".png"),t=(0,I.getAttachedAssetsPath)(e),n.label=1;case 1:return n.trys.push([1,7,8,9]),s({url:o,file:{path:t,mimeType:"image/png",file:new File([],e,{type:"image/png"}),isLoading:!0}}),[4,m.getUrlScreenshot(o)];case 2:if(!(r=n.sent()).ok)return[3,5];return[4,fetch(r.payload)];case 3:if(!(i=n.sent()).ok)throw Error("Failed to fetch image: ".concat(i.status," ").concat(i.statusText));return[4,i.blob()];case 4:return a=new File([n.sent()],e,{type:"image/png"}),s({url:o,file:l={path:t,mimeType:"image/png",file:a,isLoading:!1}}),j(l),[3,6];case 5:ei("Failed to take screenshot. Check the URL or try again later."),n.label=6;case 6:return[3,9];case 7:return n.sent(),ei("Error taking screenshot. Please try again later."),[3,9];case 8:return v(!1),[7];case 9:return[2]}})})()},isDisabled:d,children:[W?(0,r.jsx)(H.default,{css:$.errorIcon,className:"option-icon",size:16}):(0,r.jsx)(B.default,{css:$.icon,className:"option-icon",size:16}),(0,r.jsx)(R.Text,{color:"dimmer",variant:"small",css:$.optionText,className:"option-text",children:"Take screenshot"})]})}),N?(0,r.jsx)(A.FileAttachment,{attachment:N,getAttachmentTypeDisclaimer:(0,E.getAttachmentTypeDisclaimer)({aiName:(0,C.getAgentName)({capitalizeFirstChar:!0})}),removeAttachment:function(){l(N.path),L(null)},size:"small"},N.path):b?(0,r.jsx)(p.View,{css:$.loadingOption,children:(0,r.jsxs)(R.Text,{color:"dimmer",variant:"small",css:$.optionText,children:["Getting ",(0,r.jsx)("br",{})," content..."]})}):(0,r.jsx)(M.Tooltip,{tooltip:Y,isDisabled:!Y,placement:"top",children:(0,r.jsxs)(F.BaseButton,{css:$.option,onPress:function(){return(0,t._)(function(){var e,t,r,i,a;return(0,n._)(this,function(n){switch(n.label){case 0:x(!0),Q(null),e="content-".concat(Date.now(),".md"),t=(0,I.getAttachedAssetsPath)(e),n.label=1;case 1:return n.trys.push([1,3,4,5]),s({url:o,file:{path:t,mimeType:"text/markdown",file:new File([],e,{type:"text/markdown"}),isLoading:!0}}),[4,m.getUrlScrapedContent(o)];case 2:return(r=n.sent()).ok?(i=new File([new Blob([r.payload],{type:"text/markdown"})],e,{type:"text/markdown"}),s({url:o,file:a={path:t,mimeType:"text/markdown",file:i,isLoading:!1}}),L(a)):ea("Failed to get content. Check the URL or try again later."),[3,5];case 3:return n.sent(),ea("Error getting text content. Please try again later."),[3,5];case 4:return x(!1),[7];case 5:return[2]}})})()},isDisabled:d,children:[Y?(0,r.jsx)(H.default,{css:$.errorIcon,className:"option-icon",size:16}):(0,r.jsx)(U.default,{css:$.icon,className:"option-icon",size:16}),(0,r.jsx)(R.Text,{color:"dimmer",variant:"small",css:$.optionText,className:"option-text",children:"Get text content"})]})})]}),(0,r.jsx)(Z,{url:o})]}),er&&"workspace"===a?(0,r.jsxs)(p.View,{row:!0,gap:2,px:8,align:"center",style:{marginTop:-4,marginBottom:2,opacity:.5},children:[(0,r.jsx)(q.default,{size:12,color:c.tokens.foregroundDimmer}),(0,r.jsx)(R.Text,{multiline:!1,style:{fontSize:10},children:"Available for Dev/Full Figma seats"})]}):null]})}var Y=[d.rcss.viewStyle,$.option];function Z(e){var t=e.url,n=(0,D.useAgentInputFigmaContext)(),i=n.showFigmaAuthModal,a=n.isFigmaAuthenticated,o=n.isLoadingFigmaAuthentication;if(!(0,_._)((0,T.isValidFigmaUrl)(t),1)[0])return null;var s={state:"unauthenticated",title:"Login with Figma",tooltip:"Login with Figma to import",icon:(0,r.jsx)(W.default,{css:$.icon,className:"option-icon",size:16}),isDisabled:!1,onPress:function(){i({surface:"figma_attachment_card",trigger:"login_button_clicked"})}};return a&&(s={state:"authenticated",title:"Connected",tooltip:"You are connected to Figma",icon:(0,r.jsx)(L.default,{css:$.successIcon,className:"option-icon",size:16}),isDisabled:!0}),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(M.Tooltip,{tooltip:o?"Checking if you are authenticated with Figma":s.tooltip,placement:"top",children:o?(0,r.jsx)(p.View,{css:$.loadingOption,children:(0,r.jsxs)(R.Text,{color:"dimmer",variant:"small",css:$.optionText,children:["Checking ",(0,r.jsx)("br",{})," connection..."]})}):(0,r.jsxs)(F.BaseButton,{css:Y,onPress:s.onPress,isDisabled:s.isDisabled,children:[s.icon,(0,r.jsx)(R.Text,{color:"dimmer",variant:"small",css:$.optionText,className:"option-text",children:s.title})]})}),(0,r.jsxs)(j.Link,{css:Y,href:t,target:"_blank",rel:"noopener noreferrer",children:[(0,r.jsx)(V.default,{css:$.icon,className:"option-icon",size:16}),(0,r.jsx)(R.Text,{color:"dimmer",variant:"small",css:$.optionText,className:"option-text",children:"View in Figma"})]})]})}e.s(["default",()=>K],628576);var Q=e.i(179302),J=e.i(700170),X=new J.ReactCompartment(function(e){var t=e.addAttachments,n=e.onAutoAttachedLargePaste;return Q.EditorView.domEventHandlers({paste:function(e){if(!e.clipboardData)return!1;var r=e.clipboardData.items,i=!1,a=!0,o=!1,s=void 0;try{for(var l,c=r[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var u=l.value;if(0===u.type.indexOf("image")){e.preventDefault();var d=u.getAsFile();if(d){var f={fileName:d.name,file:d};t([f]),i=!0;break}}}}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}if(i)return!0;var m=e.clipboardData.getData("text");if(m.length<2e3)return!1;e.preventDefault();var p="Pasted-".concat(m.slice(0,100).replace(/[^a-zA-Z0-9-]/g,"-").replace(/-+/g,"-"),"-").concat(Date.now(),".txt"),h=new File([m],p,{type:"text/plain"});return t([{fileName:p,file:h}]),null==n||n(h.size),!0}})});e.s(["HandlePasteCompartment",()=>X],624714);var ee=e.i(167626),et=e.i(131141),en=e.i(188507),er=e.i(753950),ei=e.i(47685),ea=e.i(676566),eo=["py","md"],es=ea.default.filter(function(e){return!eo.includes(e)}).map(function(e){return new RegExp("\\.".concat(e.replace(".",""),"$"))}),el=/(https?:\/\/)?[\w~@#$%&+=\-.]+\.[^\s]+/g,ec=new Set(["sh","md"]);function eu(e){for(var t,n=[];null!==(t=el.exec(e));){for(var r=t[0];r.length>0&&/[.,!?)]$/.test(r);)r=r.slice(0,-1);if(!/@/.test(r)||/^https?:\/\//.test(r)){var i=/^https?:\/\//.test(r);if(!i){var a=(function(e){var t,n;return null!=(n=(null!=(t=e.replace(/^https?:\/\//,"").split(/[/?#]/)[0])?t:"").split(":")[0])?n:""})(r).toLowerCase(),o=a.lastIndexOf("."),s=o>=0?a.slice(o+1):"";if(ec.has(s))continue}(i?(0,ei.default)(r,{host_whitelist:(0,k._)(es).concat((0,k._)(Array.from(ec).map(function(e){return new RegExp("\\.".concat(e,"$"))})))}):(0,ei.default)(r,{host_whitelist:es}))&&n.push({url:r,start:t.index,end:t.index+r.length})}}return n}en.UrlIntent.URL_SCREENSHOT,B.default,en.UrlIntent.URL_CRAWL_CONTENT,U.default;var ed=er.StateField.define({create:function(e){return[]},update:function(e,t){return(0,et.produce)(e,function(e){var n=!0,r=!1,i=void 0;try{for(var a,o=t.effects[Symbol.iterator]();!(n=(a=o.next()).done);n=!0)!function(){var t=a.value;if(t.is(ef)){var n=t.value;0>e.findIndex(function(e){return e===n})&&e.push(n)}t.is(em)&&e.splice(0,e.length)}()}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}})}}),ef=er.StateEffect.define(),em=er.StateEffect.define(),ep=er.StateField.define({create:function(){return Q.Decoration.none},update:function(e,t){var n=[],r=eu(t.state.doc.toString()),i=!0,a=!1,o=void 0;try{for(var s,l=r[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var c=s.value,u=c.start,d=c.end,f=c.url,m=f.startsWith("http://")||f.startsWith("https://")?f:"https://".concat(f),p=Q.Decoration.mark({class:"cm-url-underline",tagName:"a",attributes:{style:'--favicon-url: url("https://www.google.com/s2/favicons?domain='.concat(function(e){var t=eb.get(e);if(t)return t;var n=e;try{n=new URL(e).hostname}catch(t){n=e}return eb.set(e,n),n}(m),'&sz=32")'),href:m,target:"_blank",rel:"noreferrer noopener nofollow",title:"".concat(!function(){if(void 0===ey){var e;ey=null==(e=window)?void 0:e.navigator.userAgent.includes("Macintosh")}return ey}()?"CTRL":"CMD"," + Click to open in a new tab")}});n.push(p.range(u,d))}}catch(e){a=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}return Q.Decoration.set(n)},provide:function(e){return Q.EditorView.decorations.from(e)}}),eh=Q.EditorView.baseTheme({".cm-url-underline":{textDecoration:"underline 0.5px ".concat(c.tokens.blueDefault),textUnderlineOffset:"2px","--favicon-url":"none","--icon-size":"16px","--gap":"4px","--padding-h":"2px",position:"relative",backgroundColor:"color-mix(in srgb, ".concat(c.tokens.accentPrimaryDefault," 10%, ").concat(c.tokens.interactiveBackground,")"),padding:"2px var(--padding-h)",borderRadius:"4px",color:"".concat(c.tokens.accentPrimaryDefault),paddingLeft:"calc(var(--icon-size) + (var(--padding-h) * 2))",transition:"all 0.2s"},".cm-url-underline:hover":{backgroundColor:"color-mix(in srgb, ".concat(c.tokens.accentPrimaryDefault," 20%, ").concat(c.tokens.interactiveBackground,")")},".cm-url-underline::after":{content:"''",position:"absolute",top:"4px",left:"var(--padding-h)",width:"var(--icon-size)",height:"var(--icon-size)",backgroundImage:"var(--favicon-url)",backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat",borderRadius:"2px",pointerEvents:"none"},".cm-url-underline::selection":{color:"".concat(c.tokens.foregroundDimmer)}}),eg=Q.EditorView.updateListener.of(function(e){if(e.docChanged){var t=eu(e.state.doc.toString()),n=e.view,r=n.state.field(ed),i=t.map(function(e){return e.url});if(!function(e,t){if(e.length!==t.length)return!1;var n=new Set(e);return t.every(function(e){return n.has(e)})}(r,i)&&(n.dispatch({effects:em.of(null)}),i.length>0)){var a=!0,o=!1,s=void 0;try{for(var l,c=i[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var u=l.value;n.dispatch({effects:ef.of(u)})}}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}}}}),ev=Q.EditorView.domEventHandlers({click:function(e){var t=(0,ee._)(e.target,HTMLElement)&&e.target.closest("a.cm-url-underline");if(!t)return!1;if(!(e.metaKey||e.ctrlKey))return e.preventDefault(),!0;e.preventDefault();var n=t.getAttribute("href");return n&&window.open(n,"_blank","noopener,noreferrer"),!0}}),ey=void 0,eb=new Map,ex=[ep,eh,ed,eg,ev];e.s(["UrlAttachmentExtensions",()=>ex,"clearDetectedUrlsEffect",()=>em,"detectedUrlsState",()=>ed],709696);var ew=e.i(282453),e_=function(e,t){return(0,i.useEffect)(function(){if(e&&(null==t||!t.state.doc.toString())){var n=ew.default.get(e,"string");if(n){if(!t)return;t.dispatch({changes:{from:0,to:t.state.doc.length,insert:n}})}}},[e,t]),{persistPromptDraftCompartment:ek.use(e),clearPersistedPromptDraft:function(){e&&ew.default.remove(e)}}},ek=new J.ReactCompartment(function(e){return e?Q.EditorView.updateListener.of(function(t){if(t.docChanged){var n=t.state.doc.toString();ew.default.set(e,n)}}):[]});e.s(["usePersistPromptDraft",()=>e_],777110)},179549,e=>{"use strict";var t,n=e.i(721281),r=e.i(389959),i=e.i(753950),a=e.i(179302);e.i(508987);var o=e.i(457103),s=e.i(969932),l=e.i(480028),c="cm-placeholder-layer",u="cm-placeholder-dom",d=a.EditorView.theme((t={},(0,n._)(t,".".concat(c),{width:"100%",height:"100%",pointerEvents:"none"}),(0,n._)(t,".".concat(u),{position:"absolute",width:"100%",pointerEvents:"none",fontFamily:l.tokens.fontFamilyDefault,color:l.tokens.foregroundDimmest}),t)),f=function(e){return 0===e.doc.toString().trim().length},m=i.StateEffect.define(),p=i.StateField.define({create:f,update:function(e,t){return f(t.state)}});function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.text,n=void 0===t?"Type message…":t,i=e.disableAnimation,l=void 0!==i&&i;return(0,r.useMemo)(function(){var e;return[p,d,(0,a.layer)((e=Date.now(),{above:!1,class:c,update:function(t){var n=!1;return(0,s.forEachEffect)(t,m,function(){n=!0,e=Date.now()}),n||(0,o.hasChanged)(t,p)},markers:function(t){if(!t.state.field(p))return[];var r,i,a,o,s,c,d,f=t.coordsAtPos(0);if(!f)return[];var m=t.dom.getBoundingClientRect(),h=f.left-m.left;return[(i=(r={top:f.top-m.top,left:h,height:f.bottom-f.top,animateTimestamp:e,text:n,disableAnimation:l}).top,a=r.left,o=r.height,s=r.animateTimestamp,c=r.text,d=r.disableAnimation,{draw:function(){var e=document.createElement("div");e.className=u,e.style.width="100%",e.style.paddingTop=i+"px",e.style.paddingLeft=a+"px",e.style.height=o+"px";var t=c.length;return d?e.textContent=c:!function n(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;requestAnimationFrame(function(){e.textContent=c.slice(0,r),r<t&&n(r+1)})}(),e},animateTimestamp:s,eq:function(e){return this.animateTimestamp===e.animateTimestamp}})]}}))]},[n,l])}e.s(["animateTextEffect",()=>m,"isEmpty",()=>p,"usePlaceholder",()=>h])},16499,e=>{"use strict";var t=e.i(541793),n=e.i(852819),r=(0,t.atom)(null);function i(){return(0,n.useSet)(r)}function a(){return(0,n.useValue)(r)}e.s(["useAppKeyboardState",()=>a,"useSetAppKeyboardState",()=>i])},986212,e=>{e.v({"agent-input-glow":"index-module__VnT05G__agent-input-glow",attachments:"index-module__VnT05G__attachments",autoHeight:"index-module__VnT05G__autoHeight",codemirror:"index-module__VnT05G__codemirror",maxAutonomyPill:"index-module__VnT05G__maxAutonomyPill",outer:"index-module__VnT05G__outer",primaryButtonGroup:"index-module__VnT05G__primaryButtonGroup",surface:"index-module__VnT05G__surface",withDrawer:"index-module__VnT05G__withDrawer",wrapper:"index-module__VnT05G__wrapper"})},61511,245218,e=>{"use strict";var t=e.i(389959),n=e.i(179302),r=e.i(98816),i=e.i(441329),a=e.i(337761),o=e.i(179549),s=e.i(16499),l=e.i(480028),c=e.i(986212);function u(e){var u=e.view,d=e.setPromptEditor,f=(0,t.useRef)(null),m=(0,i.useIsInMobileWorkspace)(),p=function(){try{return(0,s.useAppKeyboardState)()}catch(e){return null}}(),h=(0,t.useRef)(!1);(0,t.useEffect)(function(){(null==p?void 0:p.isShown)&&(h.current=!0)},[null==p?void 0:p.isShown]);var g=(0,r.default)(d);return(0,t.useEffect)(function(){if(u&&g.current){var e=g.current;return e({setValue:function(e){u.state.doc.toString()!==e&&(u.dispatch({changes:{from:0,to:u.state.doc.length,insert:e}}),requestAnimationFrame(function(){var e=u.state.doc.lines,t=u.state.doc.line(e).from;u.dispatch({effects:n.EditorView.scrollIntoView(t,{y:"end"})})}))},getValue:function(){return u.state.doc.toString()},focus:function(){m&&h.current||(u.focus(),u.dispatch({selection:{anchor:u.state.doc.length}}))},animatePlaceholder:function(){u.dispatch({effects:o.animateTextEffect.of(!0)}),(0,a.styleSet)(f,"border-color",l.tokens.accentPrimaryDefault),setTimeout(function(){requestAnimationFrame(function(){var e;null==(e=f.current)||e.style.removeProperty("border-color")})},60)},animateBorder:function(){var e=f.current;e&&(e.style.setProperty("animation","".concat(c.default["agent-input-glow"]," 1.5s")),e.addEventListener("animationend",function(){return e.style.removeProperty("animation")},{once:!0}),m&&h.current||u.focus())}}),function(){e(null)}}},[u,g,m]),f}e.s(["useSetPromptEditor",()=>u],61511);var d=e.i(993796);function f(){return(0,d.useFlag)({controlName:"flag-url-context-feature-killswitch"})}e.s(["useUrlContextFeatureKillswitch",()=>f],245218)},741244,e=>{e.v({root:"SpeechToTextButton-module__U6Btgq__root"})},43986,66830,900433,559099,e=>{"use strict";var t=e.i(721281),n=e.i(276385),r=e.i(389959);e.i(925218);var i=e.i(267103),a=e.i(441329),o=e.i(337761),s=e.i(904851),l=e.i(90659),c=e.i(908410);e.i(242933);var u=e.i(424360),d=e.i(134628),f=e.i(479407),m=function(){function e(){var n=this,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(0,s._)(this,e),(0,t._)(this,"isSupported",void 0),(0,t._)(this,"events",void 0),(0,t._)(this,"transcript",void 0),(0,t._)(this,"isTranscribing",void 0),this.isSupported=r,this.events=new u.Multicast(function(e){if(n.isSupported){var t=function(t){return(0,f.speechToTextBridgeMessageHandler)(t,function(t){return e.next(t.result)})};return window.addEventListener("message",t),function(){window.removeEventListener("message",t)}}}),this.transcript=new u.Multicast(function(e){return n.events.subscribe(function(t){"update"===t.event&&e.next(t.transcript)})}),this.isTranscribing=new u.Multicast(function(e){return n.events.subscribe(function(t){switch(t.event){case"update":case"start":e.next(!0);break;default:e.next(!1)}})}),this.isSupported=r}return(0,l._)(e,[{key:"requestAction",value:function(e){if(this.isSupported){var t={messageType:d.BridgeMessageType.REQUEST_SPEECH_TO_TEXT_ACTION,action:e};(0,f.sendMessage)(t,(0,c.nanoid)())}}}]),e}(),p=e.i(480028),h=e.i(625484),g=e.i(35409),v=e.i(494158),y=e.i(741244),b=(0,p.cvarsFrom)("SpeechToTextButton.module.css",["--mic-color"]);function x(e){var s,l=e.disabled,c=e.getCurrentText,u=e.onUpdateText,d=(0,r.useRef)(null),f=(0,r.useRef)(""),x=(0,a.useDoesBonsaiWebviewSupportFeature)("speechRecognition"),w=(s=(0,a.useDoesBonsaiWebviewSupportFeature)("speechRecognition"),(0,r.useRef)(new m(s)).current),_=(0,i.useObservable)(w.isTranscribing);return((0,r.useEffect)(function(){return w.events.subscribe(function(e){switch(e.event){case"start":f.current=c();break;case"update":u(f.current+" "+e.transcript)}})}),(0,r.useEffect)(function(){(0,o.styleSet)(d,(0,t._)({},b.micColor,_?p.tokens.redDefault:p.tokens.foregroundDimmer))},[_]),!x||l)?null:(0,n.jsx)(h.View,{innerRef:d,clsx:y.default.root,onClick:function(){return w.requestAction(_?"stopTranscription":"startTranscription")},children:_?(0,n.jsx)(g.default,{}):(0,n.jsx)(v.default,{})})}e.s(["default",()=>x],43986);var w=e.i(445059),_=(0,r.createContext)(null);function k(e){var t=e.children,r=e.sessionId,i=e.uploadFiles,a=e.onError,o=(0,w.useAttachmentsImpl)({sessionId:r,uploadFiles:i,onError:a});return(0,n.jsx)(_.Provider,{value:o,children:t})}function j(){var e=(0,r.useContext)(_);if(!e)throw Error("useAiChatAttachments(must be used within an AiChatAttachmentsProvider");return e}e.s(["AiChatAttachmentsProvider",()=>k,"useAiChatAttachments",()=>j],66830);var S=e.i(530658),C=e.i(848415),T=e.i(288148);function D(e){var t=e.addAttachments,n=(0,S._)((0,C.useDrop)(function(){return{accept:[T.NativeTypes.FILE],drop:function(e){e.dirContent.then(function(e){t(e.filter(function(e){return".DS_Store"!==e.name}).map(function(e){return{fileName:e.name,file:e}}))})},collect:function(e){return{isOver:!0===e.isOver()}}}}),2);return{isDraggedOver:n[0].isOver,drop:n[1]}}e.s(["useDropTarget",()=>D],900433);var A=e.i(753950),E=e.i(179302);e.i(508987);var I=e.i(457103),N=e.i(703613),F=e.i(700170),P=e.i(446530),z=e.i(613355),R=e.i(960178),M=A.Facet.define({combine:function(e){var t;return null!=(t=e[0])?t:0}}),L=new F.ReactCompartment(function(e){return M.of(e)}),U="cm-empty-state-dom",V=E.EditorView.theme((0,t._)({},".".concat(U),{backgroundColor:p.tokens.redDefault,opacity:"0.2"})),O=A.StateField.define({create:function(e){return e.doc.length},update:function(e,t){return t.state.doc.length}}),B=function(e){return Math.max(e.doc.length-e.facet(M),0)},q=A.StateField.define({create:B,update:function(e,t){return(0,I.hasChanged)(t,"doc",M)?B(t.state):e},provide:function(e){return[O,V,(0,E.layer)({above:!1,update:function(t){return(0,I.hasChanged)(t,e)},markers:function(t){var n=t.state.field(e);if(0===n)return[];var r=t.state.doc.length;return E.RectangleMarker.forRange(t,U,A.EditorSelection.range(r-n,r))}})]}}),H=(0,P.cssRecord)({charLimit:[z.rcss.color.redDefault]});function W(e){var t=e.view,r=(0,N.useCodeMirrorValue)(t,q);return r?(0,n.jsx)(R.Text,{variant:"small",css:H.charLimit,children:r}):null}e.s(["MaxLength",()=>L,"OverCharacterLimit",()=>W,"characterLimit",()=>q],559099)}]);

//# debugId=3dbbe27f-1957-9a71-7f4e-8bac0a22e758
//# sourceMappingURL=d7cdc3712fb8662b.js.map