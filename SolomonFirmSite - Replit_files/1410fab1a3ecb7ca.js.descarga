;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="0010f730-13d5-924a-97ba-8ed57f1369fd")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,123111,e=>{"use strict";var n=e.i(441329),t=/iPad|iPhone|iPod/,r=/MacIntel/;function i(){var e=(0,n.useIsInBonsaiWebview)(),i=!!t.test(navigator.platform)||!!(navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&r.test(navigator.platform));return e||i}e.s(["default",()=>i])},170784,122965,534518,e=>{"use strict";var n=e.i(878420),t=e.i(389959),r=e.i(992785);function i(e){var n=e.repl,t=e.currentUser;return{asViewer:e.asViewer,repl:{__typename:"Repl",authorizations:n.authorizations,id:n.id,language:n.language},currentUser:t?{__typename:"CurrentUser",id:t.id,username:t.username,isSubscribed:t.isSubscribed}:void 0}}function a(e){var a=e?i((0,n._)({},e)):null,s=(0,t.useRef)(a);return(0,r.default)(a,s.current)||(s.current=a),s.current}e.s(["createConnectContext",()=>i,"useMemoizedConnectContext",()=>a],170784);var s=e.i(775973),o=e.i(98816);function l(){var e=(0,s.useLDClient)(),n=(0,o.default)(e);return(0,t.useCallback)(function(){var e,t;return!Number.isFinite(t=parseInt(null==(e=n.current)?void 0:e.variation("flag-container-retry-minimum-ms",0),10))||t<0?0:t},[n])}e.s(["useFlaggedRetrier",()=>l],122965);var u=e.i(629712),c=e.i(858248),p=e.i(297083),d=e.i(530658),f=e.i(119468),g=e.i(817556),m=e.i(469546),_=e.i(282453),v={};function h(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.info("ot client dataloss",(0,n._)({case:t,startTime:r.startTime,opsSinceFlush:r.opsSinceFlush,whileReconnecting:r.whileReconnecting,replid:r.replId,filePath:r.filePath},i))}var y={replsList:function(){return"dataLossRepls"},replFiles:function(e){return"dataLossReplFiles".concat(e)},latestOp:function(e,n){return"dataLossLatestOp--".concat(e,"--").concat(n)},latestFlushedOp:function(e,n){return"dataLossLatestFlushed--".concat(e,"--").concat(n)},latestOwnOp:function(e,n){return"dataLosslatestOwnOp--".concat(e,"--").concat(n)},opsSinceFlush:function(e,n){return"dataLossOpsSinceFlush--".concat(e,"--").concat(n)}};function I(){var e=_.default.get(y.replsList(),"array");return e||(e=[],_.default.set(y.replsList(),e)),e}function x(e){var n=_.default.get(y.replFiles(e),"array");return n||(n=[],_.default.set(y.replFiles(e),n)),n}function R(e){var n=x(e),t=!0,r=!1,i=void 0;try{for(var a,s=n[Symbol.iterator]();!(t=(a=s.next()).done);t=!0){var o=a.value;"string"==typeof o&&function(e,n){_.default.remove(y.latestOp(e,n)),_.default.remove(y.latestFlushedOp(e,n)),_.default.remove(y.latestOwnOp(e,n));var t=x(e).filter(function(e){return e!==n});_.default.set(y.replFiles(e),t)}(e,o)}}catch(e){r=!0,i=e}finally{try{t||null==s.return||s.return()}finally{if(r)throw i}}_.default.remove(y.replFiles(e));var l=I().filter(function(n){return n!==e});_.default.set(y.replsList(),l)}function b(e){var n,t=e.replId,r=e.filePath;(n=I()).includes(t)||(n.length>20?(R(n[0]),n[0]=t):n.push(t),_.default.set(y.replsList(),n));var i=x(t);i.includes(r)||(i.length>20?(R(i[0]),i[0]=r):i.push(r),_.default.set(y.replFiles(t),i))}function T(e){var n=e.filePath,t=e.replId,r=e.opType,i=e.op;!function(e){var n=e.filePath,t=e.replId,r=e.opType,i=e.logger,a=e.isReconnecting,s=h.bind(null,i),o="".concat(t,"--").concat(n);v[o]||(v[o]={replId:t,filePath:n,timer:null,startTime:null,whileReconnecting:0,opsSinceFlush:0});var l=v[o];if("latestFlushedOp"===r){delete v[o];var u=l.startTime;if(u){var c=Date.now()-u;c>6e4&&s("flush_delay_received",l,{elapsed:c})}var p=l.timer;p&&(clearTimeout(p),l.timer=null)}else{l.opsSinceFlush+=1,a&&(l.whileReconnecting+=1);var d,f=null!=(d=l.startTime)?d:Date.now();l.startTime=f,l.timer||(l.timer=setTimeout(function(){s("flush_delay_timeout",l)},6e4)),150===l.opsSinceFlush?s("flush_delay_small",l):1e3===l.opsSinceFlush&&s("flush_delay_large",l)}}({filePath:n,replId:t,opType:r,logger:e.logger,isReconnecting:e.isReconnecting}),_.default.set(y[r](t,n),i)}var S={};function k(e){return(0,p._)(function(e){var n,t,r,i,a,s,o,l;return(0,g._)(this,function(u){return n=e.filePath,t=e.replId,r=e.serverVersion,i=e.serverContent,a=e.fetchOps,s=e.logger,S[n+t]||(S[n+t]=!0,o=function(e,n){var t={latestOp:null,latestFlushedOp:null,latestOwnOp:null},r=Object.keys(t),i=!0,a=!1,s=void 0;try{for(var o,l=r[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var u=o.value,c=_.default.get(y[u](e,n),"object");c&&c&&(void 0===c?"undefined":(0,f._)(c))==="object"&&"number"==typeof c.crc32&&"number"==typeof c.version&&(t[u]=c)}}catch(e){a=!0,s=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw s}}return t}(t,n),l=m.str(i)>>>0,Object.keys(o).forEach(function(e){return(0,p._)(function(){var n,t,i;return(0,g._)(this,function(u){switch(u.label){case 0:if(!(n=o[e]))return[2];if(r<n.version)return s.info("ot client dataloss",{opType:e,case:"server_forgot"}),[2];if(r===n.version)return l!==n.crc32&&s.info("ot client dataloss",{opType:e,case:"crc32_mismatch"}),[2];u.label=1;case 1:return u.trys.push([1,3,,4]),[4,a(n.version,n.version)];case 2:return t=d._.apply(void 0,[u.sent(),1])[0],[3,4];case 3:return i=u.sent(),s.info("ot client dataloss",{opType:e,case:"error_fetching_op",originalError:String(i)}),[2];case 4:if(!t)return s.info("ot client dataloss",{opType:e,case:"op_not_found"}),[2];return t.crc32!==n.crc32&&s.info("ot client dataloss",{opType:e,case:"crc32_mismatch"}),[2]}})})()})),[2]})}).apply(this,arguments)}e.s(["checkAndTrack",()=>k,"ensureTrackedFile",()=>b,"storeOp",()=>T],518656);var w=e.i(518656);function O(e){var n=e.container;return(0,u.default)({container:n,dataloss:w,track:c.track})}e.s(["default",()=>O],534518)},377772,e=>{"use strict";var n=e.i(906368);function t(e,t){return n.withScope(function(r){r.setTag("start-with-ai",!0),t&&r.setExtras(t),n.captureException(e)}),e}e.s(["sendErrorToSentry",()=>t])},170710,e=>{"use strict";var n=e.i(276385),t=e.i(864558),r=e.i(389959),i=e.i(904851),a=e.i(90659),s=e.i(721281);e.i(242933);var o=e.i(790164),l=function(){function e(){var n=this;(0,i._)(this,e),(0,s._)(this,"state",new o.ObservableState(null)),(0,s._)(this,"timeoutId",null),(0,s._)(this,"start",function(e){n.clearTimeout(),n.state.set({prompt:e}),n.timeoutId=setTimeout(n.remove,2e4)}),(0,s._)(this,"update",function(e){var t,r=null==(t=n.state.current)?void 0:t.prompt;r&&n.state.set({prompt:r,repl:e})}),(0,s._)(this,"remove",function(){n.clearTimeout(),n.state.set(null)})}return(0,a._)(e,[{key:"clearTimeout",value:function(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}}]),e}(),u=(0,r.createContext)(null),c=(0,t.default)(function(){return e.A(556827)},{loadableGenerated:{modules:[148805]},ssr:!1});function p(e){var t=(0,r.useRef)();return t.current||(t.current=new l),(0,n.jsxs)(u.Provider,{value:t.current,children:[e.children,(0,n.jsx)(c,{state:t.current.state})]})}function d(){return(0,r.useContext)(u)}e.s(["WorkspaceLoadingProvider",()=>p,"useWorkspaceLoadingState",()=>d],170710)},445059,e=>{"use strict";var n=e.i(297083),t=e.i(878420),r=e.i(64386),i=e.i(530658),a=e.i(817556),s=e.i(389959),o=e.i(131141);e.i(242933);var l=e.i(279606);e.i(925218);var u=e.i(112077),c=e.i(399978),p=e.i(509908),d="attached_assets",f=function(e){return"".concat(d,"/").concat(e)};function g(e){var d=e.sessionId,g=e.uploadFiles,m=e.onError,_=(0,u.useCreateObservable)([]),v=(0,u.useCreateObservable)([]),h=(0,s.useMemo)(function(){return l.Observable.combine(l.Observable.from(_),l.Observable.from(v)).select(function(e){var n=(0,i._)(e,2),t=n[0],r=n[1];return t.some(function(e){return e.isLoading})||r.some(function(e){return e.file.isLoading})})},[_,v]),y=(0,s.useCallback)(function(e){_.update(function(n){return(0,o.produce)(n,function(n){var t=n.findIndex(function(n){return n.path===e});-1!==t&&n.splice(t,1)})})},[_]),I=(0,s.useCallback)(function(e){v.update(function(n){return(0,o.produce)(n,function(n){var t=n.findIndex(function(n){return n.file.path===e});-1!==t&&n.splice(t,1)})})},[v]),x=(0,s.useCallback)(function(e){return(0,n._)(function(){var n,i,s,l,u,v,h,I,x;return(0,a._)(this,function(a){switch(a.label){case 0:n=e.map(function(e){var n=function(e){if(e){var n=e.lastIndexOf("."),t=-1!==n?e.slice(0,n):e,r=-1!==n?e.slice(n):"";return"".concat(t,"_").concat(Date.now()).concat(r)}return"pasted_".concat(Date.now())}(e.fileName);return{path:f(n),mimeType:e.file.type,file:new File([e.file],n,{type:e.file.type,lastModified:e.file.lastModified}),isLoading:!0}}),i=!0,s=!1,l=void 0;try{for(u=n[Symbol.iterator]();!(i=(v=u.next()).done);i=!0){if((h=v.value).file.size>c.MAX_FILE_UPLOAD_SIZE_LIMIT_BYTES)return null==m||m("Attachment size exceeds ".concat(c.MAX_FILE_UPLOAD_SIZE_LIMIT_BYTES/1024/1024," MB limit.")),(0,p.trackAgentAnalyticsEvent)({action:"attempted_to_attach_file_exceeding_size_limit",fileType:h.file.type,fileSize:h.file.size,sessionId:d}),[2,[]];if("image/svg+xml"===h.file.type)return null==m||m("SVG images are not allowed"),(0,p.trackAgentAnalyticsEvent)({action:"attempted_to_attach_svg_image",sessionId:d}),[2,[]]}}catch(e){s=!0,l=e}finally{try{i||null==u.return||u.return()}finally{if(s)throw l}}return I=!1,[4,new Promise(function(e){_.update(function(e){return(0,o.produce)(e,function(e){var t=n.filter(function(n){return!e.some(function(e){return e.path===n.path})});if(e.length+t.length>20)return null==m||m("You can only attach up to ".concat(20," files.")),e;I=!0,n.forEach(function(n){var t=e.findIndex(function(e){return e.path===n.path});-1!==t?e[t]=n:e.push(n)})})}),e()})];case 1:if(a.sent(),!I)return[2,[]];if(n.forEach(function(e){(0,p.trackAgentAnalyticsEvent)({action:"attached_file",fileType:e.file.type,fileSize:e.file.size,sessionId:d})}),x=n.map(function(e){return e.file}),!g)return[3,5];a.label=2;case 2:return a.trys.push([2,4,,5]),[4,g({files:x,onError:function(e){n.forEach(function(e){return y(e.path)}),null==m||m("Error writing files: "+e)}})];case 3:return a.sent(),[3,5];case 4:return a.sent(),[2,[]];case 5:return _.update(function(e){return(0,o.produce)(e,function(e){n.forEach(function(n){var i=e.findIndex(function(e){return e.path===n.path});-1!==i&&(e[i]=(0,r._)((0,t._)({},e[i]),{isLoading:!1}))})})}),[2,n]}})})()},[g,y,m,d,_]),R=(0,s.useCallback)(function(e){var i=e.url,s=e.file;return(0,n._)(function(){var e;return(0,a._)(this,function(n){switch(n.label){case 0:return e=!1,[4,new Promise(function(n){v.update(function(n){return(0,o.produce)(n,function(n){var t=n.findIndex(function(e){return e.url===i&&e.file.path===s.path});if(-1===t&&n.length+_.current.length>=20)return null==m||m("You can only attach up to ".concat(20," files.")),n;e=!0,-1!==t?n[t]={url:i,file:s}:n.push({url:i,file:s})})}),n()})];case 1:if(n.sent(),!e)return[2,null];if((0,p.trackAgentAnalyticsEvent)({action:"attached_url_file",fileType:s.file.type,fileSize:s.file.size,sessionId:d}),!g)return[3,5];n.label=2;case 2:return n.trys.push([2,4,,5]),[4,g({files:[s.file],onError:function(e){I(s.path),null==m||m("Error writing URL file: "+e)}})];case 3:return n.sent(),v.update(function(e){return(0,o.produce)(e,function(e){var n=e.findIndex(function(e){return e.url===i});-1!==n&&(e[n].file=(0,r._)((0,t._)({},e[n].file),{isLoading:!1}))})}),[3,5];case 4:return n.sent(),[2,null];case 5:return[2,{url:i,file:s}]}})})()},[g,I,m,d,v,_]),b=(0,s.useCallback)(function(){_.set([]),v.set([])},[_,v]);return(0,s.useMemo)(function(){return{attachments:_,removeAttachment:y,removeUrlAttachment:I,clearAttachments:b,urlAttachments:v,addAttachments:x,addUrlAttachment:R,isLoading:h}},[_,y,I,b,v,x,R,h])}e.s(["ATTACHED_ASSETS_PATH",()=>d,"getAttachedAssetsPath",()=>f,"useAttachmentsImpl",()=>g],445059)},399978,e=>{"use strict";var n,t=e.i(297083),r=e.i(346715),i=e.i(817556),a=e.i(826771),s=e.i(903381),o=((n={}).AlreadyExists="ALREADY_EXIST",n.FileRead="FILE_READ",n.Network="NETWORK",n);function l(e){return(0,t._)(function(e){var n,o,l,u,c,p,d,f,g,m,_,v;return(0,i._)(this,function(h){switch(h.label){case 0:if(n=e.parentPath,o=e.overwrite,l=e.fs,u=e.files,c=e.onStart,p=e.onUpload,d=e.onError,f=e.onDone,g=e.envMigrationFlag,u.length>1e6)throw Error("Trying to upload too many files at once.");if(u.reduce(function(e,n){return n.size+e},0)>0xc800000)throw Error("Total file upload size exceeds maximum limit.");return m=function(e){var n=e.targetPath,r=e.file,a=e.progress;return(0,t._)(function(){var e,t;return(0,i._)(this,function(i){switch(i.label){case 0:if(o)return[3,2];return[4,l.stat(n)];case 1:if(i.sent().exists)return d(e={file:r,path:n,error:"ALREADY_EXIST"}),[2,e];i.label=2;case 2:return[4,l.transferFile(n,r,function(e,n){a.current=n/e},g)];case 3:if(i.sent().error===s.FsErrors.NotReadable)return d(t={file:r,path:n,error:"FILE_READ"}),[2,t];return null==p||p({file:r,path:n}),[2,{path:n,file:r}]}})})()},_=u.map(function(e){var t=e.dirPath||e.webkitRelativePath||e.name;return{targetPath:n?n+"/"+t:t,progress:(0,a.observableValue)(0),file:e}}),null==c||c(_),[4,Promise.all(_.map(m))];case 1:return v=h.sent(),null==f||f({parentPath:n,uploads:v.filter(function(e){return!("error"in e)}),errors:v.reduce(function(e,n){return"error"in n?(0,r._)(e).concat([n]):e},[])}),[2]}})}).apply(this,arguments)}e.s(["MAX_FILE_UPLOAD_SIZE_LIMIT_BYTES",()=>0xc800000,"MAX_NUM_FILES_UPLOAD_LIMIT",()=>1e6,"UploadErrors",()=>o,"uploadFiles",()=>l])},509908,597103,e=>{"use strict";var n,t=e.i(721281),r=e.i(878420),i=e.i(399528),a=e.i(169252),s=e.i(569384),o=e.i(973245),l=e.i(304277);function u(){var e=(0,s._)(["\n  query ReplConfigAgentStackPlatformType($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        config {\n          agentStackPlatformType\n        }\n      }\n    }\n  }\n"]);return u=function(){return e},e}e.i(566901);var c={},p=(0,o.gql)(u());function d(e){var n=(0,r._)({},c,e);return l.useQuery(p,n)}function f(){var e=(0,s._)(["\n  query TrackAgentAnalyticsEvent($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        origin {\n          ... on Repl {\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return f=function(){return e},e}e.s(["ReplConfigAgentStackPlatformTypeDocument",()=>p,"useReplConfigAgentStackPlatformTypeQuery",()=>d],597103);var g=(0,o.gql)(f()),m=e.i(188507),_=e.i(629536),v=e.i(173738),h=e.i(441329),y=e.i(858248),I=e.i(709485);function x(){var e,n,t,r,a=(0,h.isInMobileWorkspace)(i.default),s=(0,h.isInBonsaiWebview)(i.default);switch(i.default.pathname){case"/replEnvironmentDesktop":case"/replEnvironmentMobile":(e=i.default.query.replId?i.default.query.replId.toString():void 0)&&(n=(r=function(e){var n,t,r=null,i=null;try{r=null===v.apolloClient||void 0===v.apolloClient?void 0:v.apolloClient.readQuery({query:g,variables:{replId:e}}),i=null===v.apolloClient||void 0===v.apolloClient?void 0:v.apolloClient.readQuery({query:p,variables:{replId:e}})}catch(e){}var a=(null==r?void 0:r.getRepl.__typename)==="Repl"?r.getRepl:void 0,s=(null==i?void 0:i.getRepl.__typename)==="Repl"&&null!=(t=i.getRepl.config.agentStackPlatformType)?t:void 0;return{replId:null==a?void 0:a.id,originReplId:null==a||null==(n=a.origin)?void 0:n.id,agentStackPlatformType:s}}(e)).originReplId,t=r.agentStackPlatformType)}return{isMobile:a,isBonsai:s,replId:e,originReplId:n,agentStackPlatformType:t}}function R(e){var n=e.action,t=e.fileType,i=e.fileSize,a=e.messageText,s=e.feedbackText,o=e.sessionId,l=e.eventId,u=e.secretsRequested,c=e.freeCheckpoint,p=e.replOwnerPlanName,d=e.planApprovalState,f=e.blueprints,g=e.toolDataKind,m=e.hasUbbV2,_=e.checkpointPrice,v=e.isEnterprise,h=e.ctaLabel,R=e.agentChatMode,b=e.initialBuildMode,T=e.hasFigmaLinks,S=e.figmaLinksCount,k=e.figmaLinksCountUnique,w=e.autonomyLevel,O=e.integrationSearchQuery,A=e.integrationSearchNumResults,E=x(),F=E.isMobile,C=E.isBonsai,P=E.replId,U=E.originReplId,j=E.agentStackPlatformType;return(0,y.track)(I.events.AGENT_USED,(0,r._)({action:n,file_type:t,is_mobile:F,is_bonsai:C,repl_id:P,file_size:i,message_text:a,feedback_text:s,session_id:o,event_id:l,secrets_requested:u,free_checkpoint:c,origin_repl_id:U,repl_owner_plan_name:p,plan_approval_state:d,blueprints:f,tool_data_kind:g,hasUbbV2:m,checkpointPrice:_,is_enterprise:v,cta_label:h,agent_chat_mode:R,agent_stack_platform_type:j,initial_build_mode:b,autonomy_level:w,integration_search_query:O,integration_search_num_results:A},T?{has_figma_links:T,figma_links_count:S,figma_links_count_unique:k}:{}))}function b(e){var n,t,r=e.action,i=e.sessionId,a=e.messageText,s=e.planText,o=e.planId,l=e.isLatestPlanProposal,u=e.skipRapidBuild,c=e.planSupportsVisualPreview,p=e.didVisualPreviewComplete,d=e.numPlansProposed,f=e.stepsApproved,g=e.planBlueprints,v=e.stepBlueprints,h=e.stepId,R=e.stepName,b=e.initialBuildMode,S=e.isEnterprise,k=e.agentStackTriggerType,w=e.stackBlueprint,O=x(),A=O.isMobile,E=O.isBonsai,F=O.replId,C=O.originReplId,P=O.agentStackPlatformType;return(0,y.track)(I.events.AGENT_USED,{action:r,session_id:i,is_mobile:A,is_bonsai:E,repl_id:F,message_text:a,plan_text:s,plan_id:o,is_latest_plan_proposal:l,skip_rapid_build:u,plan_supports_visual_preview:c,did_visual_preview_complete:p,num_plans_proposed:d,origin_repl_id:C,steps_approved:f,plan_blueprints:g,step_blueprints:v,step_id:h,step_name:R,initial_build_mode:function(e){switch(e){case m.AgentInitialBuildMode.AGENT_INITIAL_BUILD_MODE_SYNC:return"design";case m.AgentInitialBuildMode.AGENT_INITIAL_BUILD_MODE_ASYNC:return"full_build";default:return"unknown"}}(b),is_enterprise:S,agent_stack_platform_type:null!=P?P:k?T[k]:void 0,stack_name:null==(n=w)||n===m.StackBlueprint.STACK_BLUEPRINT_NONE?"Unknown":null!=(t=_.stackBlueprintDetails[n].name)?t:"Unknown"})}var T=(n={},(0,t._)(n,m.AgentStackTriggerType.UNKNOWN_TRIGGER_TYPE,a.AgentStackPlatformType.TimeBased),(0,t._)(n,m.AgentStackTriggerType.SLACK_MESSAGE,a.AgentStackPlatformType.Slack),(0,t._)(n,m.AgentStackTriggerType.TELEGRAM_MESSAGE,a.AgentStackPlatformType.Telegram),(0,t._)(n,m.AgentStackTriggerType.TIME_BASED,a.AgentStackPlatformType.TimeBased),(0,t._)(n,m.AgentStackTriggerType.CONNECTOR_TRIGGER,a.AgentStackPlatformType.TimeBased),n);function S(e){var n=e.action,t=e.sessionId,r=e.messageText,i=e.isEnterprise,a=x(),s=a.isMobile,o=a.isBonsai,l=a.replId,u=a.originReplId,c=a.agentStackPlatformType;return(0,y.track)(I.events.AGENT_USED,{action:n,session_id:t,is_mobile:s,is_bonsai:o,repl_id:l,message_text:r,origin_repl_id:u,is_enterprise:i,agent_stack_platform_type:c})}e.s(["getAnalyticsMetadata",()=>x,"trackAgentAnalyticsEvent",()=>R,"trackAgentPlanningAnalyticsEvent",()=>b,"trackAgentQueueAnalyticsEvent",()=>S],509908)},306694,915598,e=>{"use strict";var n=e.i(878420),t=e.i(64386),r=e.i(530658),i=e.i(346715),a=e.i(276385),s=e.i(389959),o=e.i(888136),l=e.i(368964),u=e.i(569384),c=e.i(973245),p=e.i(304277);e.i(566901);var d=e.i(732947);function f(){var e=(0,u._)(["\n  fragment OrgGroupsOrg on Org {\n    ...OrgMetadata\n    authorizations {\n      createOrgGroup {\n        isAuthorized\n        message\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function g(){var e=(0,u._)(["\n  fragment OrgGroupsOrgGroup on OrgGroup {\n    id\n    slug\n    type\n    name\n    color\n    isMember\n    memberCount\n    individualMember {\n      user {\n        id\n        displayName\n        image\n      }\n      email\n    }\n    permissions {\n      editPermissions\n      viewPermissions\n    }\n  }\n"]);return g=function(){return e},e}function m(){var e=(0,u._)(["\n  query OrgGroups($orgId: String, $input: OrgGroupsInput) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          groups(input: $input) {\n            __typename\n            ... on OrgGroupConnection {\n              pageInfo {\n                hasNextPage\n                nextCursor\n              }\n              items {\n                ...OrgGroupsOrgGroup\n              }\n            }\n            ... on UserError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}var _={},v=(0,c.gql)(f(),d.OrgMetadataFragmentDoc),h=(0,c.gql)(g()),y=(0,c.gql)(m(),h);function I(e){var t=(0,n._)({},_,e);return p.useQuery(y,t)}function x(){var e=(0,u._)(["\n  query OrgGroupSearch($orgId: String, $input: OrgGroupsInput) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          groups(input: $input) {\n            __typename\n            ... on OrgGroupConnection {\n              pageInfo {\n                hasNextPage\n                nextCursor\n              }\n              items {\n                ...OrgGroupsOrgGroup\n              }\n            }\n            ... on UserError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return x=function(){return e},e}e.s(["OrgGroupsOrgFragmentDoc",()=>v,"OrgGroupsOrgGroupFragmentDoc",()=>h,"useOrgGroupsQuery",()=>I],915598);var R={},b=(0,c.gql)(x(),h),T=e.i(162914),S=e.i(480028),k=e.i(446530),w=e.i(613355),O=e.i(714165),A=e.i(136540),E=e.i(607278),F=e.i(396776),C=e.i(960178),P=e.i(625484),U=e.i(283110),j=e.i(940745),L=e.i(793579),M=e.i(652219),D=[w.rcss.p(8),w.rcss.cursor.pointer],B=(0,k.cssRecord)({container:[w.rcss.position.relative],rightIcon:[w.rcss.position.absolute,w.rcss.right(8),w.rcss.top("50%"),{transform:"translateY(-50%)"}],dropdownMenu:[w.rcss.width("100%"),w.rcss.position.absolute,w.rcss.zIndex(1),w.rcss.top("100%"),w.rcss.left(0),w.rcss.backgroundColor.backgroundDefault,w.rcss.maxHeight(300),w.rcss.overflow("auto"),w.rcss.borderRadius(4),w.rcss.border({color:S.tokens.foregroundDimmest}),{borderTop:"0 none"}],result:(0,i._)(D),activeResult:(0,i._)(D).concat([w.rcss.backgroundColor.accentPrimaryDimmer]),closeIconButton:[{"&:hover":{backgroundColor:"".concat(S.tokens.backgroundHighest," !important")}}],userMultiplayerIcon:[w.rcss.backgroundColor.outlineDimmest,w.rcss.borderRadius(4)],userDisplayName:[w.rcss.fontWeight.medium]}),N=function(e){var n,t=e.individualMember,r=null==t?void 0:t.user;return r?(0,a.jsxs)(P.View,{row:!0,gap:8,align:"center",children:[(0,a.jsx)(O.Avatar,{size:24,src:null==r?void 0:r.image,username:"".concat(null==r?void 0:r.displayName),fullName:"".concat(null==r?void 0:r.displayName)}),(0,a.jsxs)(C.Text,{children:[(0,a.jsx)(C.Text,{css:B.userDisplayName,children:null==t||null==(n=t.user)?void 0:n.displayName})," ","(",null==t?void 0:t.email,")"]})]}):null},V=function(e){if(!e)return"";if(e.type===l.OrgGroupType.SystemIndividual){var n;return(null==(n=e.individualMember)?void 0:n.email)||e.name}return e.name||""};e.s(["default",0,function(e){var i,u,c,d=e.inputId,f=e.orgId,g=e.types,m=e.selectedGroups,_=e.value,v=e.setValue,h=e.onSelect,y=e.onClear,I=e.placeholder,x=void 0===I?"Find an existing group...":I,S=(0,r._)((0,s.useState)([]),2),k=S[0],w=S[1],O=(0,T.default)(_.trim(),250),D=(i={variables:{orgId:f,input:{count:10,types:g,filters:{name:{search:O}}}},ssr:!1,skip:!O,fetchPolicy:"cache-and-network",onCompleted:function(e){if((null==e||null==(t=e.currentUser)||null==(n=t.org)?void 0:n.__typename)==="Org"&&(null==e||null==(a=e.currentUser)||null==(i=a.org)||null==(r=i.groups)?void 0:r.__typename)==="OrgGroupConnection"){var n,t,r,i,a;w(e.currentUser.org.groups.items.filter(function(e){return!m.some(function(n){return e.id===n.id})}))}}},u=(0,n._)({},R,i),p.useQuery(b,u)),G=D.data,q=D.loading,z=D.error,$=G&&G.currentUser&&"Org"!==G.currentUser.org.__typename?G.currentUser.org.message:void 0,W=G&&G.currentUser&&"Org"===G.currentUser.org.__typename&&"OrgGroupConnection"!==G.currentUser.org.groups.__typename?G.currentUser.org.groups.message:void 0,Q=null==z?void 0:z.message,Y=null!=(c=null!=$?$:W)?c:Q;return(0,s.useEffect)(function(){0===_.length&&0!==k.length&&w([])},[_.length,k.length]),(0,a.jsx)(P.View,{css:B.container,children:(0,a.jsx)(o.default,{onSelect:function(e){e&&(h(e),v(V(e)))},itemToString:function(e){return V(e)},initialHighlightedIndex:0,defaultHighlightedIndex:0,children:function(e){var r=e.getInputProps,i=e.getItemProps,s=e.getMenuProps,o=e.isOpen,u=e.highlightedIndex,c=e.getRootProps;return(0,a.jsxs)(P.View,(0,t._)((0,n._)({},c({refKey:"innerRef"})),{children:[(0,a.jsx)(E.Input,(0,n._)({},r({id:d,ref:null,value:_,onChange:function(e){v(e.currentTarget.value)},placeholder:x,autoComplete:"off"}))),q||0!==_.length?null:(0,a.jsx)(L.default,{css:B.rightIcon}),q?(0,a.jsx)(P.View,{css:B.rightIcon,children:(0,a.jsx)(j.default,{})}):null,!q&&_.length>0?(0,a.jsx)(P.View,{css:B.rightIcon,children:(0,a.jsx)(A.IconButton,{css:B.closeIconButton,alt:"Clear",tooltipBehavior:"hidden",onClick:function(){v(""),y&&y()},children:(0,a.jsx)(U.default,{})})}):null,(0,a.jsxs)(P.View,(0,t._)((0,n._)({tag:"ul"},s({refKey:"innerRef"})),{children:[Y?(0,a.jsx)(P.View,{tag:"ul",css:B.dropdownMenu,children:(0,a.jsx)(P.View,{tag:"li",css:B.result,children:(0,a.jsx)(F.StatusBanner,{colorway:"negative",text:Y})})}):null,o&&k&&k.length?(0,a.jsx)(P.View,{css:B.dropdownMenu,p:4,children:k.map(function(e,r){return(0,a.jsx)(P.View,(0,t._)((0,n._)({tag:"li"},i({item:e,index:r})),{css:r===u?B.activeResult:B.result,children:e.type===l.OrgGroupType.SystemIndividual?(0,a.jsx)(N,{individualMember:e.individualMember}):(0,a.jsxs)(P.View,{row:!0,gap:8,align:"center",children:[(0,a.jsx)(P.View,{css:B.userMultiplayerIcon,p:6,children:(0,a.jsx)(M.default,{size:12})}),(0,a.jsx)(C.Text,{height:"singleLine",multiline:!1,css:B.userDisplayName,children:e.name})]})}),e.id)})}):null,o&&!q&&O.length>0&&0===k.length?(0,a.jsx)(P.View,{tag:"ul",css:B.dropdownMenu,children:(0,a.jsx)(P.View,{tag:"li",css:B.result,children:(0,a.jsxs)(C.Text,{height:"singleLine",color:"dimmer",multiline:!1,children:['No results found for "',_,'"']})})}):null]}))]}))}})})}],306694)},773240,429190,e=>{"use strict";var n=e.i(530658),t=e.i(276385),r=e.i(878420),i=e.i(569384),a=e.i(973245);e.i(304277);var s=e.i(566901);function o(){var e=(0,i._)(["\n  fragment FeaturedReplCardRepl on Repl {\n    id\n    title\n    description\n    iconUrl\n    timeUpdated\n    imageUrl\n    url\n    templateInfo {\n      imageUrl\n    }\n    publicForkCount\n  }\n"]);return o=function(){return e},e}var l=(0,a.gql)(o());function u(){var e=(0,i._)(["\n  fragment FeaturedReplPreviewRepl on Repl {\n    id\n    ...FeaturedReplCardRepl\n  }\n  ","\n"]);return u=function(){return e},e}function c(){var e=(0,i._)(["\n  query FeaturedReplPreviewReplInfo($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        isFeaturedRepl\n      }\n    }\n  }\n"]);return c=function(){return e},e}var p={},d=(0,a.gql)(u(),l),f=(0,a.gql)(c());function g(e){var n=(0,r._)({},p,e);return s.useLazyQuery(f,n)}e.s(["FeaturedReplPreviewReplFragmentDoc",()=>d,"useFeaturedReplPreviewReplInfoLazyQuery",()=>g],429190);var m=e.i(140959),_=e.i(222342),v=e.i(220897),h=e.i(140487),y=e.i(960178),I=e.i(625484);e.s(["default",0,function(e){var r=e.isFeatured,i=e.repl,a=e.orgId,s=e.onCompleted,o=(0,_.default)(),l=o.showError,u=o.showConfirm,c=(0,n._)((0,m.useOrgFeaturedReplsUpdateMutation)({onError:function(){l("Something unexpected happened")},onCompleted:function(e){"Org"===e.updateOrgFeaturedRepl.__typename?(u("Profile updated successfully"),b()):l(e.updateOrgFeaturedRepl.message)}}),2),p=c[0],d=c[1].loading,f=(0,n._)((0,m.useOrgFeaturedReplsDeleteMutation)({onError:function(){l("Something unexpected happened")},onCompleted:function(e){"Org"===e.removeOrgFeaturedRepl.__typename?(u("Removed featured App"),b()):l(e.removeOrgFeaturedRepl.message)}}),2),x=f[0],R=f[1].loading,b=(0,n._)(g({variables:{replId:i.id},fetchPolicy:"network-only",ssr:!1}),1)[0];return a?(0,t.jsxs)(I.View,{justify:"center",gap:16,children:[(0,t.jsx)(y.Text,{variant:"headerDefault",children:r?"Remove from featured repls":"Feature App on your profile"}),(0,t.jsx)(y.Text,{variant:"text",children:r?"Do you want to remove this App from the Featured section?":"Display this App at the top of your organization's profile. Only public Apps can be featured."}),(0,t.jsx)(v.FeaturedReplCard,{repl:i,index:0,hideForkButton:!0}),(0,t.jsxs)(I.View,{row:!0,justify:"space-between",align:"center",children:[(0,t.jsx)(h.Button,{text:"Cancel",onClick:s}),(0,t.jsx)(h.Button,{colorway:"primary",text:r?"Remove":"Feature on profile",onClick:function(){r?x({variables:{input:{orgId:a,replId:i.id}}}):p({variables:{input:{orgId:a,replId:i.id}}}),s()},loading:d||R})]})]}):null}],773240)},957353,e=>{"use strict";var n=e.i(569384);function t(){var e=(0,n._)(["\n  fragment ReplListBoxItemRepl on Repl {\n    id\n    title\n    iconUrl\n    isFeaturedRepl\n    description(plainText: true)\n  }\n"]);return t=function(){return e},e}var r=(0,e.i(973245).gql)(t());e.s(["ReplListBoxItemReplFragmentDoc",()=>r])},140959,e=>{"use strict";var n=e.i(878420),t=e.i(569384),r=e.i(973245),i=e.i(951262),a=e.i(304277);e.i(566901);var s=e.i(957353);function o(){var e=(0,t._)(["\n  fragment OrgFeaturedReplsSearchReplItem on Repl {\n    __typename\n    id\n    ...ReplListBoxItemRepl\n    org {\n      id\n    }\n  }\n  ","\n"]);return o=function(){return e},e}function l(){var e=(0,t._)(["\n  fragment OrgFeaturedReplsSearchInputRepls on ReplConnection {\n    items {\n      ...OrgFeaturedReplsSearchReplItem\n    }\n    pageInfo {\n      hasNextPage\n      nextCursor\n    }\n  }\n  ","\n"]);return l=function(){return e},e}function u(){var e=(0,t._)(["\n  mutation OrgFeaturedReplsUpdate($input: UpdateOrgFeaturedReplInput!) {\n    updateOrgFeaturedRepl(input: $input) {\n      ... on Org {\n        id\n        __typename\n        featuredRepls {\n          __typename\n          ... on OrgFeaturedReplConnection {\n            items {\n              repl {\n                ...OrgFeaturedReplsSearchReplItem\n              }\n            }\n          }\n        }\n      }\n      ... on Error {\n        __typename\n        message\n      }\n    }\n  }\n  ","\n"]);return u=function(){return e},e}function c(){var e=(0,t._)(["\n  mutation OrgFeaturedReplsDelete($input: RemoveOrgFeaturedReplInput!) {\n    removeOrgFeaturedRepl(input: $input) {\n      ... on Org {\n        id\n        __typename\n        featuredRepls {\n          __typename\n          ... on OrgFeaturedReplConnection {\n            items {\n              repl {\n                ...OrgFeaturedReplsSearchReplItem\n              }\n            }\n          }\n        }\n      }\n      ... on Error {\n        __typename\n        message\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}function p(){var e=(0,t._)(["\n  query OrgFeaturedReplsSearchInputList(\n    $searchTerm: String!\n    $orgId: String!\n    $cursor: String\n  ) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          repls(\n            input: {\n              filters: { title: { search: $searchTerm }, visibility: public }\n              cursor: $cursor\n            }\n          ) {\n            __typename\n            ... on ReplConnection {\n              ...OrgFeaturedReplsSearchInputRepls\n            }\n            ... on UserError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return p=function(){return e},e}var d={},f=(0,r.gql)(o(),s.ReplListBoxItemReplFragmentDoc),g=(0,r.gql)(l(),f),m=(0,r.gql)(u(),f);function _(e){var t=(0,n._)({},d,e);return i.useMutation(m,t)}var v=(0,r.gql)(c(),f);function h(e){var t=(0,n._)({},d,e);return i.useMutation(v,t)}var y=(0,r.gql)(p(),g);function I(e){var t=(0,n._)({},d,e);return a.useQuery(y,t)}e.s(["useOrgFeaturedReplsDeleteMutation",()=>h,"useOrgFeaturedReplsSearchInputListQuery",()=>I,"useOrgFeaturedReplsUpdateMutation",()=>_])},220897,e=>{"use strict";var n=e.i(721281),t=e.i(276385),r=e.i(412160),i=e.i(46654),a=e.i(473497),s=e.i(967629),o=e.i(480028),l=e.i(446530),u=e.i(754873),c=e.i(613355),p=e.i(140487),d=e.i(929872),f=e.i(960178),g=e.i(625484),m=e.i(464092),_=e.i(418944),v=e.i(592877),h=function(e){var n,s,o=e.repl,l=e.hideForkButton,u=(0,m.useForkContext)(),c=o.title,h=o.description,I=o.iconUrl,b=o.timeUpdated,T=o.publicForkCount,S=o.url;return(0,t.jsxs)(d.Surface,{css:x.featureCardWrapper,tabIndex:-1,children:[(0,t.jsx)(g.View,{css:x.imageWrapper,children:(0,t.jsx)(a.default,{alt:o.title,imageUrl:null!=(s=o.imageUrl)?s:null==(n=o.templateInfo)?void 0:n.imageUrl,width:135,height:135,style:{borderRadius:"4px 0px 0px 4px"}})}),(0,t.jsxs)(g.View,{css:x.detailsColumn,grow:!0,shrink:!0,children:[(0,t.jsxs)(g.View,{grow:!0,pt:8,row:!0,align:"start",justify:"space-between",children:[(0,t.jsx)(r.default,{href:"".concat(S,"/view"),css:R.link,target:"_blank",children:(0,t.jsxs)(g.View,{css:x.titleWithIcon,grow:!0,shrink:!0,row:!0,gap:12,align:"center",children:[(0,t.jsx)(_.default,{surface:!0,alt:c,size:32,iconUrl:I}),(0,t.jsxs)(g.View,{css:y.titleTimeWrapper,children:[(0,t.jsx)(f.Text,{variant:"headerDefault",color:"default",multiline:!1,children:c}),(0,t.jsxs)(f.Text,{variant:"small",color:"dimmest",multiline:!1,children:["Updated ",(0,i.ago)(b)]})]})]})}),l?null:(0,t.jsxs)(g.View,{css:x.forkCount,pt:8,row:!0,gap:8,align:"center",children:[(0,t.jsx)(g.View,{children:T}),(0,t.jsx)(p.Button,{className:"forkButton",variant:"nofill",css:x.forkButton,text:u.isForking?"Remixing...":"Remix",isDisabled:u.isForking,onClick:function(){u.isForking||u.fork()},disabled:u.isForking,iconLeft:(0,t.jsx)(v.default,{})})]})]}),(0,t.jsx)(g.View,{grow:2,children:(0,t.jsx)(f.Text,{color:"dimmer",maxLines:2,children:h})})]})]})},y=(0,l.cssRecord)({titleTimeWrapper:[c.rcss.color.foregroundDefault,c.rcss.flex.column,c.rcss.flex.shrink(1),c.rcss.minWidth(0)]}),I=(0,s.css)({"::after":{borderRadius:o.tokens.space8,content:'""',position:"absolute",top:0,right:0,bottom:0,left:0,display:"block",zIndex:1}}),x=(0,l.cssRecord)({featureCardWrapper:[c.rcss.position.relative,c.rcss.rowWithGap(16),c.rcss.height(135),c.rcss.overflow("hidden"),u.interactive.filledAndOutlined,c.rcss.pr(16),{width:"100%"}],detailsColumn:[{width:"100%"}],titleWithIcon:[c.rcss.minWidth(0),c.rcss.mr(8)],forkCount:[c.rcss.color.foregroundDimmer],forkButton:[c.rcss.zIndex(2),c.rcss.hover({backgroundColor:o.tokens.interactiveBackgroundActive})],imageWrapper:[c.rcss.width(135),(0,n._)({},c.media.max(550),[c.rcss.width(110)])]}),R=(0,l.cssRecord)({link:[I,c.rcss.focusRingOnAfter,c.rcss.flex.growAndShrink(1),c.rcss.minWidth(0)]});e.s(["FeaturedReplCard",()=>h,"default",0,function(e){var n=e.featuredRepls;return n?(0,t.jsxs)(g.View,{gap:8,children:[(0,t.jsx)(f.Text,{variant:"subheadBig",color:"default",children:"Featured Apps"}),(0,t.jsx)(g.View,{gap:16,children:n.items.map(function(e,n){return(0,t.jsx)(m.ForkContextProvider,{forkParams:{trackingData:{forkSource:"orgFeaturedRepl"}},repl:e.repl,children:(0,t.jsx)(h,{repl:e.repl,index:n})},e.repl.id)})})]}):null}])},845411,927196,e=>{"use strict";var n=e.i(389959),t=e.i(992785),r=e.i(276385),i=e.i(878420),a=e.i(569384),s=e.i(973245),o=e.i(613141);function l(){var e=(0,a._)(["\n  subscription CurrentUserReplAgentStatuses {\n    currentUserReplAgentStatuses {\n      replId\n      statusV2\n      label\n      updatedAt\n      appImageUrl\n    }\n  }\n"]);return l=function(){return e},e}var u={},c=(0,s.gql)(l());e.i(242933);var p=e.i(279606);e.i(925218);var d=e.i(112077),f=(0,n.createContext)(null);function g(e){var t,a=e.children,s=(0,d.useCreateObservable)(new Map),l=function(e){if(null==e?void 0:e.currentUserReplAgentStatuses){var n=new Map(e.currentUserReplAgentStatuses.map(function(e){return[e.replId,{statusV2:e.statusV2,label:e.label,updatedAt:e.updatedAt,appImageUrl:e.appImageUrl}]}));s.set(n)}};t=(0,i._)({},u,{onData:function(e){l(e.data.data)}}),o.useSubscription(c,t);var g=(0,n.useMemo)(function(){return p.Observable.from(s)},[s]);return(0,r.jsx)(f.Provider,{value:g,children:a})}function m(){var e=(0,n.useContext)(f);if(null===e)throw Error("useCurrentUserAgentStatus must be used within an AgentStatusProvider");return e}function _(e){var r=m();return(0,n.useMemo)(function(){return r.select(function(n){var t=n.get(e.id);return t?{status:t.statusV2,label:t.label,appImageUrl:t.appImageUrl}:e.latestAgentStatus?{status:e.latestAgentStatus.statusV2,label:e.latestAgentStatus.label,appImageUrl:e.latestAgentStatus.appImageUrl}:null},t.default)},[r,e.id,e.latestAgentStatus])}e.s(["AgentStatusProvider",()=>g,"default",()=>m],927196),e.s(["useReplAgentStatus",()=>_],845411)},273929,e=>{"use strict";var n=e.i(495764).RECENT_REPLS_SIDEBAR_MENU_COUNT;e.s(["RECENT_REPLS_DISPLAY_COUNT",()=>3,"RECENT_REPLS_FETCH_COUNT",()=>n])}]);

//# debugId=0010f730-13d5-924a-97ba-8ed57f1369fd
//# sourceMappingURL=63935ba724812041.js.map