;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="1528ab1f-bff6-7801-6266-f1a887f9fe87")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,72158,t=>{"use strict";var e=t.i(399119),n=t.i(904851),r=t.i(90659),i=t.i(445789),o=t.i(167626),a=t.i(530658),s=t.i(346715),l=t.i(119468),c=t.i(753950),u=t.i(179302),f=t.i(486701),h=function(){function t(e,r,i,o){(0,n._)(this,t),this.state=e,this.pos=r,this.explicit=i,this.view=o,this.abortListeners=[],this.abortOnDocChange=!1}return(0,r._)(t,[{key:"tokenBefore",value:function(t){for(var e=(0,f.syntaxTree)(this.state).resolveInner(this.pos,-1);e&&0>t.indexOf(e.name);)e=e.parent;return e?{from:e.from,to:this.pos,text:this.state.sliceDoc(e.from,this.pos),type:e.type}:null}},{key:"matchBefore",value:function(t){var e=this.state.doc.lineAt(this.pos),n=Math.max(e.from,this.pos-250),r=e.text.slice(n-e.from,this.pos-e.from),i=r.search(y(t,!1));return i<0?null:{from:n+i,to:this.pos,text:r.slice(i)}}},{key:"aborted",get:function(){return null==this.abortListeners}},{key:"addEventListener",value:function(t,e,n){"abort"==t&&this.abortListeners&&(this.abortListeners.push(e),n&&n.onDocChange&&(this.abortOnDocChange=!0))}}]),t}();function d(t){var e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),"[".concat(n?"\\w":"").concat(e.replace(/[^\w\s]/g,"\\$&"),"]")}function p(t){var e=t.map(function(t){return"string"==typeof t?{label:t}:t}),n=(0,a._)(e.every(function(t){return/^\w+$/.test(t.label)})?[/\w*$/,/\w+$/]:function(t){var e=Object.create(null),n=Object.create(null),r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value.label;e[l[0]]=!0;for(var c=1;c<l.length;c++)n[l[c]]=!0}}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}var u=d(e)+d(n)+"*$";return[RegExp("^"+u),new RegExp(u)]}(e),2),r=n[0],i=n[1];return function(t){var n=t.matchBefore(i);return n||t.explicit?{from:n?n.from:t.pos,options:e,validFor:r}:null}}function m(t,e){return function(n){for(var r=(0,f.syntaxTree)(n.state).resolveInner(n.pos,-1);r;r=r.parent){if(t.indexOf(r.name)>-1)return null;if(r.type.isTop)break}return e(n)}}var v=function t(e,r,i,o){(0,n._)(this,t),this.completion=e,this.source=r,this.match=i,this.score=o};function g(t){return t.selection.main.from}function y(t,e){var n,r=t.source,i=e&&"^"!=r[0],o="$"!=r[r.length-1];return i||o?new RegExp("".concat(i?"^":"","(?:").concat(r,")").concat(o?"$":""),null!=(n=t.flags)?n:t.ignoreCase?"i":""):t}var b=c.Annotation.define(),w=new WeakMap;function x(t){if(!Array.isArray(t))return t;var e=w.get(t);return e||w.set(t,e=p(t)),e}var S=c.StateEffect.define(),k=c.StateEffect.define(),C=function(){function t(e){(0,n._)(this,t),this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(var r=0;r<e.length;){var i=(0,c.codePointAt)(e,r),o=(0,c.codePointSize)(i);this.chars.push(i);var a=e.slice(r,r+o),s=a.toUpperCase();this.folded.push((0,c.codePointAt)(s==a?a.toLowerCase():s,0)),r+=o}this.astral=e.length!=this.chars.length}return(0,r._)(t,[{key:"ret",value:function(t,e){return this.score=t,this.matched=e,this}},{key:"match",value:function(t){if(0==this.pattern.length)return this.ret(-100,[]);if(t.length<this.pattern.length)return null;var e=this.chars,n=this.folded,r=this.any,i=this.precise,o=this.byWord;if(1==e.length){var a=(0,c.codePointAt)(t,0),s=(0,c.codePointSize)(a),l=s==t.length?0:-100;if(a==e[0]);else{if(a!=n[0])return null;l+=-200}return this.ret(l,[0,s])}var u=t.indexOf(this.pattern);if(0==u)return this.ret(t.length==this.pattern.length?0:-100,[0,this.pattern.length]);var f=e.length,h=0;if(u<0){for(var d=0,p=Math.min(t.length,200);d<p&&h<f;){var m=(0,c.codePointAt)(t,d);(m==e[h]||m==n[h])&&(r[h++]=d),d+=(0,c.codePointSize)(m)}if(h<f)return null}for(var v=0,g=0,y=!1,b=0,w=-1,x=-1,S=/[a-z]/.test(t),k=!0,C=0,I=Math.min(t.length,200),E=0;C<I&&g<f;){var P=(0,c.codePointAt)(t,C);u<0&&(v<f&&P==e[v]&&(i[v++]=C),b<f&&(P==e[b]||P==n[b]?(0==b&&(w=C),x=C+1,b++):b=0));var O=void 0,T=P<255?P>=48&&P<=57||P>=97&&P<=122?2:+(P>=65&&P<=90):(O=(0,c.fromCodePoint)(P))!=O.toLowerCase()?1:2*(O!=O.toUpperCase());(!C||1==T&&S||0==E&&0!=T)&&(e[g]==P||n[g]==P&&(y=!0)?o[g++]=C:o.length&&(k=!1)),E=T,C+=(0,c.codePointSize)(P)}return g==f&&0==o[0]&&k?this.result(-100+(y?-200:0),o,t):b==f&&0==w?this.ret(-200-t.length+(x==t.length?0:-100),[0,x]):u>-1?this.ret(-700-t.length,[u,u+this.pattern.length]):b==f?this.ret(-900-t.length,[w,x]):g==f?this.result(-100+(y?-200:0)+-700+(k?0:-1100),o,t):2==e.length?null:this.result((r[0]?-700:0)+-200+-1100,r,t)}},{key:"result",value:function(t,e,n){var r=[],i=0,o=!0,a=!1,s=void 0;try{for(var l,u=e[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var f=l.value,h=f+(this.astral?(0,c.codePointSize)((0,c.codePointAt)(n,f)):1);i&&r[i-1]==f?r[i-1]=h:(r[i++]=f,r[i++]=h)}}catch(t){a=!0,s=t}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}return this.ret(t-n.length,r)}}]),t}(),I=function(){function t(e){(0,n._)(this,t),this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}return(0,r._)(t,[{key:"match",value:function(t){if(t.length<this.pattern.length)return null;var e=t.slice(0,this.pattern.length),n=e==this.pattern?0:e.toLowerCase()==this.folded?-200:null;return null==n?null:(this.matched=[0,e.length],this.score=n+(t.length==this.pattern.length?0:-100),this)}}]),t}(),E=c.Facet.define({combine:function(t){return(0,c.combineConfig)(t,{activateOnTyping:!0,activateOnCompletion:function(){return!1},activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:function(){return""},optionClass:function(){return""},aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:O,filterStrict:!1,compareCompletions:function(t,e){return t.label.localeCompare(e.label)},interactionDelay:75,updateSyncTime:100},{defaultKeymap:function(t,e){return t&&e},closeOnBlur:function(t,e){return t&&e},icons:function(t,e){return t&&e},tooltipClass:function(t,e){return function(n){return P(t(n),e(n))}},optionClass:function(t,e){return function(n){return P(t(n),e(n))}},addToOptions:function(t,e){return t.concat(e)},filterStrict:function(t,e){return t||e}})}});function P(t,e){return t?e?t+" "+e:t:e}function O(t,e,n,r,i,o){var a,s,l=t.textDirection==u.Direction.RTL,c=l,f=!1,h="top",d=e.left-i.left,p=i.right-e.right,m=r.right-r.left,v=r.bottom-r.top;if(c&&d<Math.min(m,p)?c=!1:!c&&p<Math.min(m,d)&&(c=!0),m<=(c?d:p))a=Math.max(i.top,Math.min(n.top,i.bottom-v))-e.top,s=Math.min(400,c?d:p);else{f=!0,s=Math.min(400,(l?e.right:i.right-e.left)-30);var g=i.bottom-e.bottom;g>=v||g>e.top?a=n.bottom-e.top:(h="bottom",a=e.bottom-n.top)}var y=(e.bottom-e.top)/o.offsetHeight,b=(e.right-e.left)/o.offsetWidth;return{style:"".concat(h,": ").concat(a/y,"px; max-width: ").concat(s/b,"px"),class:"cm-completionInfo-"+(f?l?"left-narrow":"right-narrow":c?"left":"right")}}function T(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){var r=Math.floor(e/n);return{from:r*n,to:(r+1)*n}}var i=Math.floor((t-e)/n);return{from:t-(i+1)*n,to:t-i*n}}var A=function(){function t(e,r,i){var o,a=this;(0,n._)(this,t),this.view=e,this.stateField=r,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:function(){return a.measureInfo()},write:function(t){return a.placeInfo(t)},key:this},this.space=null,this.currentClass="";var l=e.state.field(r),c=l.open,u=c.options,f=c.selected,h=e.state.facet(E);this.optionContent=(o=h.addToOptions.slice(),h.icons&&o.push({render:function(t){var e,n=document.createElement("div");return n.classList.add("cm-completionIcon"),t.type&&(e=n.classList).add.apply(e,(0,s._)(t.type.split(/\s+/g).map(function(t){return"cm-completionIcon-"+t}))),n.setAttribute("aria-hidden","true"),n},position:20}),o.push({render:function(t,e,n,r){var i=document.createElement("span");i.className="cm-completionLabel";for(var o=t.displayLabel||t.label,a=0,s=0;s<r.length;){var l=r[s++],c=r[s++];l>a&&i.appendChild(document.createTextNode(o.slice(a,l)));var u=i.appendChild(document.createElement("span"));u.appendChild(document.createTextNode(o.slice(l,c))),u.className="cm-completionMatchedText",a=c}return a<o.length&&i.appendChild(document.createTextNode(o.slice(a))),i},position:50},{render:function(t){if(!t.detail)return null;var e=document.createElement("span");return e.className="cm-completionDetail",e.textContent=t.detail,e},position:80}),o.sort(function(t,e){return t.position-e.position}).map(function(t){return t.render})),this.optionClass=h.optionClass,this.tooltipClass=h.tooltipClass,this.range=T(u.length,f,h.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",function(t){for(var n,i=e.state.field(r).open.options,o=t.target;o&&o!=a.dom;o=o.parentNode)if("LI"==o.nodeName&&(n=/-(\d+)$/.exec(o.id))&&+n[1]<i.length){a.applyCompletion(e,i[+n[1]]),t.preventDefault();return}}),this.dom.addEventListener("focusout",function(t){var n=e.state.field(a.stateField,!1);n&&n.tooltip&&e.state.facet(E).closeOnBlur&&t.relatedTarget!=e.contentDOM&&e.dispatch({effects:k.of(null)})}),this.showOptions(u,l.id)}return(0,r._)(t,[{key:"mount",value:function(){this.updateSel()}},{key:"showOptions",value:function(t,e){var n=this;this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(t,e,this.range)),this.list.addEventListener("scroll",function(){n.info&&n.view.requestMeasure(n.placeInfoReq)})}},{key:"update",value:function(t){var e,n=t.state.field(this.stateField),r=t.startState.field(this.stateField);if(this.updateTooltipClass(t.state),n!=r){var i=n.open,o=i.options,a=i.selected,s=i.disabled;r.open&&r.open.options==o||(this.range=T(o.length,a,t.state.facet(E).maxRenderedOptions),this.showOptions(o,n.id)),this.updateSel(),s!=(null==(e=r.open)?void 0:e.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!s)}}},{key:"updateTooltipClass",value:function(t){var e=this.tooltipClass(t);if(e!=this.currentClass){var n=!0,r=!1,i=void 0;try{for(var o,a=this.currentClass.split(" ")[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;s&&this.dom.classList.remove(s)}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}var l=!0,c=!1,u=void 0;try{for(var f,h=e.split(" ")[Symbol.iterator]();!(l=(f=h.next()).done);l=!0){var d=f.value;d&&this.dom.classList.add(d)}}catch(t){c=!0,u=t}finally{try{l||null==h.return||h.return()}finally{if(c)throw u}}this.currentClass=e}}},{key:"positioned",value:function(t){this.space=t,this.info&&this.view.requestMeasure(this.placeInfoReq)}},{key:"updateSel",value:function(){var t=this,e=this.view.state.field(this.stateField),n=e.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=T(n.options.length,n.selected,this.view.state.facet(E).maxRenderedOptions),this.showOptions(n.options,e.id)),this.updateSelectedOption(n.selected)){this.destroyInfo();var r=n.options[n.selected].completion,i=r.info;if(!i)return;var o="string"==typeof i?document.createTextNode(i):i(r);if(!o)return;"then"in o?o.then(function(n){n&&t.view.state.field(t.stateField,!1)==e&&t.addInfoPane(n,r)}).catch(function(e){return(0,u.logException)(t.view.state,e,"completion info")}):this.addInfoPane(o,r)}}},{key:"addInfoPane",value:function(t,e){this.destroyInfo();var n=this.info=document.createElement("div");if(n.className="cm-tooltip cm-completionInfo",null!=t.nodeType)n.appendChild(t),this.infoDestroy=null;else{var r=t.dom,i=t.destroy;n.appendChild(r),this.infoDestroy=i||null}this.dom.appendChild(n),this.view.requestMeasure(this.placeInfoReq)}},{key:"updateSelectedOption",value:function(t){for(var e,n,r,i,o,a=null,s=this.list.firstChild,l=this.range.from;s;s=s.nextSibling,l++)"LI"==s.nodeName&&s.id?l==t?s.hasAttribute("aria-selected")||(s.setAttribute("aria-selected","true"),a=s):s.hasAttribute("aria-selected")&&s.removeAttribute("aria-selected"):l--;return a&&(e=this.list,n=a,r=e.getBoundingClientRect(),i=n.getBoundingClientRect(),o=r.height/e.offsetHeight,i.top<r.top?e.scrollTop-=(r.top-i.top)/o:i.bottom>r.bottom&&(e.scrollTop+=(i.bottom-r.bottom)/o)),a}},{key:"measureInfo",value:function(){var t=this.dom.querySelector("[aria-selected]");if(!t||!this.info)return null;var e=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),r=t.getBoundingClientRect(),i=this.space;if(!i){var o=this.dom.ownerDocument.defaultView||window;i={left:0,top:0,right:o.innerWidth,bottom:o.innerHeight}}return r.top>Math.min(i.bottom,e.bottom)-10||r.bottom<Math.max(i.top,e.top)+10?null:this.view.state.facet(E).positionInfo(this.view,e,r,n,i,this.dom)}},{key:"placeInfo",value:function(t){this.info&&(t?(t.style&&(this.info.style.cssText=t.style),this.info.className="cm-tooltip cm-completionInfo "+(t.class||"")):this.info.style.cssText="top: -1e6px")}},{key:"createListBox",value:function(t,e,n){var r=document.createElement("ul");r.id=e,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions"));for(var i=null,o=n.from;o<n.to;o++){var a=t[o],s=a.completion,l=a.match,c=s.section;if(c){var u="string"==typeof c?c:c.name;u!=i&&(o>n.from||0==n.from)&&(i=u,"string"!=typeof c&&c.header?r.appendChild(c.header(c)):r.appendChild(document.createElement("completion-section")).textContent=u)}var f=r.appendChild(document.createElement("li"));f.id=e+"-"+o,f.setAttribute("role","option");var h=this.optionClass(s);h&&(f.className=h);var d=!0,p=!1,m=void 0;try{for(var v,g=this.optionContent[Symbol.iterator]();!(d=(v=g.next()).done);d=!0){var y=(0,v.value)(s,this.view.state,this.view,l);y&&f.appendChild(y)}}catch(t){p=!0,m=t}finally{try{d||null==g.return||g.return()}finally{if(p)throw m}}}return n.from&&r.classList.add("cm-completionListIncompleteTop"),n.to<t.length&&r.classList.add("cm-completionListIncompleteBottom"),r}},{key:"destroyInfo",value:function(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}},{key:"destroy",value:function(){this.destroyInfo()}}]),t}();function D(t){return 100*(t.boost||0)+10*!!t.apply+5*!!t.info+ +!!t.type}var _=function(){function t(e,r,i,o,a,s){(0,n._)(this,t),this.options=e,this.attrs=r,this.tooltip=i,this.timestamp=o,this.selected=a,this.disabled=s}return(0,r._)(t,[{key:"setSelected",value:function(e,n){return e==this.selected||e>=this.options.length?this:new t(this.options,B(n,e),this.tooltip,this.timestamp,e,this.disabled)}},{key:"map",value:function(e){return new t(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}],[{key:"build",value:function(e,n,r,i,o){var a=function(t,e){var n=[],r=null,i=function(t){n.push(t);var e=t.completion.section;if(e){r||(r=[]);var i="string"==typeof e?e:e.name;r.some(function(t){return t.name==i})||r.push("string"==typeof e?{name:i}:e)}},o=e.facet(E),a=!0,s=!1,l=void 0;try{for(var c,u=t[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var f=c.value;if(f.hasResult()){var h=f.result.getMatch;if(!1===f.result.filter){var d=!0,p=!1,m=void 0;try{for(var g,y=f.result.options[Symbol.iterator]();!(d=(g=y.next()).done);d=!0){var b=g.value;i(new v(b,f.source,h?h(b):[],1e9-n.length))}}catch(t){p=!0,m=t}finally{try{d||null==y.return||y.return()}finally{if(p)throw m}}}else{var w=e.sliceDoc(f.from,f.to),x=void 0,S=o.filterStrict?new I(w):new C(w),k=!0,P=!1,O=void 0;try{for(var T,A=f.result.options[Symbol.iterator]();!(k=(T=A.next()).done);k=!0){var _=T.value;if(x=S.match(_.label)){var R=_.displayLabel?h?h(_,x.matched):[]:x.matched;i(new v(_,f.source,R,x.score+(_.boost||0)))}}}catch(t){P=!0,O=t}finally{try{k||null==A.return||A.return()}finally{if(P)throw O}}}}}}catch(t){s=!0,l=t}finally{try{a||null==u.return||u.return()}finally{if(s)throw l}}if(r){var L=Object.create(null),M=0,B=!0,F=!1,U=void 0;try{for(var N,V=r.sort(function(t,e){var n,r;return(null!=(n=t.rank)?n:1e9)-(null!=(r=e.rank)?r:1e9)||(t.name<e.name?-1:1)})[Symbol.iterator]();!(B=(N=V.next()).done);B=!0){var j=N.value;M-=1e5,L[j.name]=M}}catch(t){F=!0,U=t}finally{try{B||null==V.return||V.return()}finally{if(F)throw U}}var z=!0,W=!1,q=void 0;try{for(var H,$=n[Symbol.iterator]();!(z=(H=$.next()).done);z=!0){var K=H.value,Q=K.completion.section;Q&&(K.score+=L["string"==typeof Q?Q:Q.name])}}catch(t){W=!0,q=t}finally{try{z||null==$.return||$.return()}finally{if(W)throw q}}}var X=[],Y=null,G=o.compareCompletions,J=!0,Z=!1,tt=void 0;try{for(var te,tn=n.sort(function(t,e){return e.score-t.score||G(t.completion,e.completion)})[Symbol.iterator]();!(J=(te=tn.next()).done);J=!0){var tr=te.value,ti=tr.completion;Y&&Y.label==ti.label&&Y.detail==ti.detail&&(null==Y.type||null==ti.type||Y.type==ti.type)&&Y.apply==ti.apply&&Y.boost==ti.boost?D(tr.completion)>D(Y)&&(X[X.length-1]=tr):X.push(tr),Y=tr.completion}}catch(t){Z=!0,tt=t}finally{try{J||null==tn.return||tn.return()}finally{if(Z)throw tt}}return X}(e,n);if(!a.length)return i&&e.some(function(t){return 1==t.state})?new t(i.options,i.attrs,i.tooltip,i.timestamp,i.selected,!0):null;var s=n.facet(E).selectOnOpen?0:-1;if(i&&i.selected!=s&&-1!=i.selected){for(var l=i.options[i.selected].completion,c=0;c<a.length;c++)if(a[c].completion==l){s=c;break}}return new t(a,B(r,s),{pos:e.reduce(function(t,e){return e.hasResult()?Math.min(t,e.from):t},1e8),create:H,above:o.aboveCursor},i?i.timestamp:Date.now(),s,!1)}}]),t}(),R=function(){function t(e,r,i){(0,n._)(this,t),this.active=e,this.id=r,this.open=i}return(0,r._)(t,[{key:"update",value:function(e){var n=this,r=e.state,i=r.facet(E),o=(i.override||r.languageDataAt("autocomplete",g(r)).map(x)).map(function(t){return(n.active.find(function(e){return e.source==t})||new N(t,+!!n.active.some(function(t){return 0!=t.state}))).update(e,i)});o.length==this.active.length&&o.every(function(t,e){return t==n.active[e]})&&(o=this.active);var a=this.open;a&&e.docChanged&&(a=a.map(e.changes)),e.selection||o.some(function(t){return t.hasResult()&&e.changes.touchesRange(t.from,t.to)})||!function(t,e){if(t==e)return!0;for(var n=0,r=0;;){for(;n<t.length&&!t[n].hasResult;)n++;for(;r<e.length&&!e[r].hasResult;)r++;var i=n==t.length,o=r==e.length;if(i||o)return i==o;if(t[n++].result!=e[r++].result)return!1}}(o,this.active)?a=_.build(o,r,this.id,a,i):a&&a.disabled&&!o.some(function(t){return 1==t.state})&&(a=null),!a&&o.every(function(t){return 1!=t.state})&&o.some(function(t){return t.hasResult()})&&(o=o.map(function(t){return t.hasResult()?new N(t.source,0):t}));var s=!0,l=!1,c=void 0;try{for(var u,f=e.effects[Symbol.iterator]();!(s=(u=f.next()).done);s=!0){var h=u.value;h.is(z)&&(a=a&&a.setSelected(h.value,this.id))}}catch(t){l=!0,c=t}finally{try{s||null==f.return||f.return()}finally{if(l)throw c}}return o==this.active&&a==this.open?this:new t(o,this.id,a)}},{key:"tooltip",get:function(){return this.open?this.open.tooltip:null}},{key:"attrs",get:function(){return this.open?this.open.attrs:this.active.length?L:M}}],[{key:"start",value:function(){return new t(F,"cm-ac-"+Math.floor(2e6*Math.random()).toString(36),null)}}]),t}(),L={"aria-autocomplete":"list"},M={};function B(t,e){var n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}var F=[];function U(t,e){if(t.isUserEvent("input.complete")){var n=t.annotation(b);if(n&&e.activateOnCompletion(n))return 12}var r=t.isUserEvent("input.type");return r&&e.activateOnTyping?5:r?1:t.isUserEvent("delete.backward")?2:t.selection?8:16*!!t.docChanged}var N=function(){function t(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;(0,n._)(this,t),this.source=e,this.state=r,this.explicitPos=i}return(0,r._)(t,[{key:"hasResult",value:function(){return!1}},{key:"update",value:function(e,n){var r=U(e,n),i=this;(8&r||16&r&&this.touches(e))&&(i=new t(i.source,0)),4&r&&0==i.state&&(i=new t(this.source,1)),i=i.updateFor(e,r);var o=!0,a=!1,s=void 0;try{for(var l,c=e.effects[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var u=l.value,f=!0,h=!1,d=void 0;if(u.is(S))i=new t(i.source,1,u.value?g(e.state):-1);else if(u.is(k))i=new t(i.source,0);else if(u.is(j))try{for(var p,m=u.value[Symbol.iterator]();!(f=(p=m.next()).done);f=!0){var v=p.value;v.source==i.source&&(i=v)}}catch(t){h=!0,d=t}finally{try{f||null==m.return||m.return()}finally{if(h)throw d}}}}catch(t){a=!0,s=t}finally{try{o||null==c.return||c.return()}finally{if(a)throw s}}return i}},{key:"updateFor",value:function(t,e){return this.map(t.changes)}},{key:"map",value:function(e){return e.empty||this.explicitPos<0?this:new t(this.source,this.state,e.mapPos(this.explicitPos))}},{key:"touches",value:function(t){return t.changes.touchesRange(g(t.state))}}]),t}(),V=function(t){function o(t,r,i,a,s){var l;return(0,n._)(this,o),(l=(0,e._)(this,o,[t,2,r])).result=i,l.from=a,l.to=s,l}return(0,i._)(o,t),(0,r._)(o,[{key:"hasResult",value:function(){return!0}},{key:"updateFor",value:function(t,e){if(!(3&e))return this.map(t.changes);var n,r=this.result;r.map&&!t.changes.empty&&(r=r.map(r,t.changes));var i=t.changes.mapPos(this.from),a=t.changes.mapPos(this.to,1),s=g(t.state);if((this.explicitPos<0?s<=i:s<this.from)||s>a||!r||2&e&&g(t.startState)==this.from)return new N(this.source,4&e?1:0);var l=this.explicitPos<0?-1:t.changes.mapPos(this.explicitPos);return!function(t,e,n,r){if(!t)return!1;var i=e.sliceDoc(n,r);return"function"==typeof t?t(i,n,r,e):y(t,!0).test(i)}(r.validFor,t.state,i,a)?r.update&&(r=r.update(r,i,a,new h(t.state,s,l>=0)))?new o(this.source,l,r,r.from,null!=(n=r.to)?n:g(t.state)):new N(this.source,1,l):new o(this.source,l,r,i,a)}},{key:"map",value:function(t){return t.empty?this:(this.result.map?this.result.map(this.result,t):this.result)?new o(this.source,this.explicitPos<0?-1:t.mapPos(this.explicitPos),this.result,t.mapPos(this.from),t.mapPos(this.to,1)):new N(this.source,0)}},{key:"touches",value:function(t){return t.changes.touchesRange(this.from,this.to)}}]),o}(N),j=c.StateEffect.define({map:function(t,e){return t.map(function(t){return t.map(e)})}}),z=c.StateEffect.define(),W=c.StateField.define({create:function(){return R.start()},update:function(t,e){return t.update(e)},provide:function(t){return[u.showTooltip.from(t,function(t){return t.tooltip}),u.EditorView.contentAttributes.from(t,function(t){return t.attrs})]}});function q(t,e){var n,r,i,a,s,l,u=e.completion.apply||e.completion.label,f=t.state.field(W).active.find(function(t){return t.source==e.source});return!!(0,o._)(f,V)&&("string"==typeof u?t.dispatch(Object.assign(Object.assign({},(n=t.state,r=f.from,i=f.to,s=r-(a=n.selection.main).from,l=i-a.from,Object.assign(Object.assign({},n.changeByRange(function(t){return t!=a&&r!=i&&n.sliceDoc(t.from+s,t.from+l)!=n.sliceDoc(r,i)?{range:t}:{changes:{from:t.from+s,to:i==a.from?t.to:t.from+l,insert:u},range:c.EditorSelection.cursor(t.from+s+u.length)}})),{scrollIntoView:!0,userEvent:"input.complete"}))),{annotations:b.of(e.completion)})):u(t,e.completion,f.from,f.to),!0)}var H=function(t){return new A(t,W,q)};function $(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"option";return function(n){var r=n.state.field(W,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<n.state.facet(E).interactionDelay)return!1;var i,o=1;"page"==e&&(i=(0,u.getTooltip)(n,r.open.tooltip))&&(o=Math.max(2,Math.floor(i.dom.offsetHeight/i.dom.querySelector("li").offsetHeight)-1));var a=r.open.options.length,s=r.open.selected>-1?r.open.selected+o*(t?1:-1):t?0:a-1;return s<0?s="page"==e?0:a-1:s>=a&&(s="page"==e?a-1:0),n.dispatch({effects:z.of(s)}),!0}}var K=function(t){var e=t.state.field(W,!1);return!(t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(E).interactionDelay)&&q(t,e.open.options[e.open.selected])},Q=function(t){return!!t.state.field(W,!1)&&(t.dispatch({effects:S.of(!0)}),!0)},X=function(t){var e=t.state.field(W,!1);return!!e&&!!e.active.some(function(t){return 0!=t.state})&&(t.dispatch({effects:k.of(null)}),!0)},Y=function t(e,r){(0,n._)(this,t),this.active=e,this.context=r,this.time=Date.now(),this.updates=[],this.done=void 0},G=u.ViewPlugin.fromClass(function(){function t(e){(0,n._)(this,t),this.view=e,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;var r=!0,i=!1,o=void 0;try{for(var a,s=e.state.field(W).active[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;1==l.state&&this.startQuery(l)}}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}}return(0,r._)(t,[{key:"update",value:function(t){var e=this,n=t.state.field(W),r=t.state.facet(E);if(t.selectionSet||t.docChanged||t.startState.field(W)!=n){for(var i=t.transactions.some(function(t){var e=U(t,r);return 8&e||(t.selection||t.docChanged)&&!(3&e)}),o=0;o<this.running.length;o++){var a,l=this.running[o];if(i||l.context.abortOnDocChange&&t.docChanged||l.updates.length+t.transactions.length>50&&Date.now()-l.time>1e3){var c=!0,f=!1,h=void 0;try{for(var d,p=l.context.abortListeners[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var m=d.value;try{m()}catch(t){(0,u.logException)(this.view.state,t)}}}catch(t){f=!0,h=t}finally{try{c||null==p.return||p.return()}finally{if(f)throw h}}l.context.abortListeners=null,this.running.splice(o--,1)}else(a=l.updates).push.apply(a,(0,s._)(t.transactions))}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),t.transactions.some(function(t){return t.effects.some(function(t){return t.is(S)})})&&(this.pendingStart=!0);var v=this.pendingStart?50:r.activateOnTypingDelay;this.debounceUpdate=n.active.some(function(t){return 1==t.state&&!e.running.some(function(e){return e.active.source==t.source})})?setTimeout(function(){return e.startUpdate()},v):-1;var g=!0,y=!1,b=void 0;if(0!=this.composing)try{for(var w,x=t.transactions[Symbol.iterator]();!(g=(w=x.next()).done);g=!0){var k=w.value;k.isUserEvent("input.type")?this.composing=2:2==this.composing&&k.selection&&(this.composing=3)}}catch(t){y=!0,b=t}finally{try{g||null==x.return||x.return()}finally{if(y)throw b}}}}},{key:"startUpdate",value:function(){this.debounceUpdate=-1,this.pendingStart=!1;var t=this.view.state.field(W),e=!0,n=!1,r=void 0;try{for(var i,o,a=t.active[Symbol.iterator]();!(e=(o=a.next()).done);e=!0)i=this,function(){var t=o.value;1!=t.state||i.running.some(function(e){return e.active.source==t.source})||i.startQuery(t)}()}catch(t){n=!0,r=t}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"startQuery",value:function(t){var e=this,n=this.view.state,r=g(n),i=new h(n,r,t.explicitPos==r,this.view),o=new Y(t,i);this.running.push(o),Promise.resolve(t.source(i)).then(function(t){o.context.aborted||(o.done=t||null,e.scheduleAccept())},function(t){e.view.dispatch({effects:k.of(null)}),(0,u.logException)(e.view.state,t)})}},{key:"scheduleAccept",value:function(){var t=this;this.running.every(function(t){return void 0!==t.done})?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(function(){return t.accept()},this.view.state.facet(E).updateSyncTime))}},{key:"accept",value:function(){this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;for(var t,e,n=[],r=this.view.state.facet(E),i=0;i<this.running.length;i++)e=this,function(o){var a=e.running[o];if(void 0===a.done)return i=o;if(e.running.splice(o--,1),a.done){var s=new V(a.active.source,a.active.explicitPos,a.done,a.done.from,null!=(t=a.done.to)?t:g(a.updates.length?a.updates[0].startState:e.view.state)),l=!0,c=!1,u=void 0;try{for(var f,h=a.updates[Symbol.iterator]();!(l=(f=h.next()).done);l=!0){var d=f.value;s=s.update(d,r)}}catch(t){c=!0,u=t}finally{try{l||null==h.return||h.return()}finally{if(c)throw u}}if(s.hasResult())return n.push(s),i=o}var p=e.view.state.field(W).active.find(function(t){return t.source==a.active.source});if(p&&1==p.state)if(null==a.done){var m=new N(a.active.source,0),v=!0,y=!1,b=void 0;try{for(var w,x=a.updates[Symbol.iterator]();!(v=(w=x.next()).done);v=!0){var S=w.value;m=m.update(S,r)}}catch(t){y=!0,b=t}finally{try{v||null==x.return||x.return()}finally{if(y)throw b}}1!=m.state&&n.push(m)}else e.startQuery(p);i=o}(i);n.length&&this.view.dispatch({effects:j.of(n)})}}]),t}(),{eventHandlers:{blur:function(t){var e=this,n=this.view.state.field(W,!1);if(n&&n.tooltip&&this.view.state.facet(E).closeOnBlur){var r=n.open&&(0,u.getTooltip)(this.view,n.open.tooltip);r&&r.dom.contains(t.relatedTarget)||setTimeout(function(){return e.view.dispatch({effects:k.of(null)})},10)}},compositionstart:function(){this.composing=1},compositionend:function(){var t=this;3==this.composing&&setTimeout(function(){return t.view.dispatch({effects:S.of(!1)})},20),this.composing=0}}}),J=("undefined"==typeof navigator?"undefined":(0,l._)(navigator))=="object"&&/Win/.test(navigator.platform),Z=c.Prec.highest(u.EditorView.domEventHandlers({keydown:function(t,e){var n=e.state.field(W,!1);if(!n||!n.open||n.open.disabled||n.open.selected<0||t.key.length>1||t.ctrlKey&&!(J&&t.altKey)||t.metaKey)return!1;var r=n.open.options[n.open.selected],i=n.active.find(function(t){return t.source==r.source}),o=r.completion.commitCharacters||i.result.commitCharacters;return o&&o.indexOf(t.key)>-1&&q(e,r),!1}})),tt=u.EditorView.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"¬∑¬∑¬∑"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"".concat(400,"px"),boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"".concat(30,"px")},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"".concat(30,"px")},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'∆í'"}},".cm-completionIcon-class":{"&:after":{content:"'‚óã'"}},".cm-completionIcon-interface":{"&:after":{content:"'‚óå'"}},".cm-completionIcon-variable":{"&:after":{content:"'ùë•'"}},".cm-completionIcon-constant":{"&:after":{content:"'ùê∂'"}},".cm-completionIcon-type":{"&:after":{content:"'ùë°'"}},".cm-completionIcon-enum":{"&:after":{content:"'‚à™'"}},".cm-completionIcon-property":{"&:after":{content:"'‚ñ°'"}},".cm-completionIcon-keyword":{"&:after":{content:"'üîëÔ∏é'"}},".cm-completionIcon-namespace":{"&:after":{content:"'‚ñ¢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),te=function t(e,r,i,o){(0,n._)(this,t),this.field=e,this.line=r,this.from=i,this.to=o},tn=function(){function t(e,r,i){(0,n._)(this,t),this.field=e,this.from=r,this.to=i}return(0,r._)(t,[{key:"map",value:function(e){var n=e.mapPos(this.from,-1,c.MapMode.TrackDel),r=e.mapPos(this.to,1,c.MapMode.TrackDel);return null==n||null==r?null:new t(this.field,n,r)}}]),t}(),tr=function(){function t(e,r){(0,n._)(this,t),this.lines=e,this.fieldPositions=r}return(0,r._)(t,[{key:"instantiate",value:function(t,e){var n=[],r=[e],i=t.doc.lineAt(e),o=/^\s*/.exec(i.text)[0],a=!0,s=!1,l=void 0;try{for(var c,u=this.lines[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var h=c.value;if(n.length){for(var d=o,p=/^\t*/.exec(h)[0].length,m=0;m<p;m++)d+=t.facet(f.indentUnit);r.push(e+d.length-p),h=d+h.slice(p)}n.push(h),e+=h.length+1}}catch(t){s=!0,l=t}finally{try{a||null==u.return||u.return()}finally{if(s)throw l}}return{text:n,ranges:this.fieldPositions.map(function(t){return new tn(t.field,r[t.line]+t.from,r[t.line]+t.to)})}}}],[{key:"parse",value:function(e){var n,r=[],i=[],o=[],a=!0,s=!1,l=void 0;try{for(var c,u=e.split(/\r\n?|\n/)[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){for(var f=c.value;n=/[#$]\{(?:(\d+)(?::([^}]*))?|((?:\\[{}]|[^}])*))\}/.exec(f);){for(var h=n[1]?+n[1]:null,d=n[2]||n[3]||"",p=-1,m=d.replace(/\\[{}]/g,function(t){return t[1]}),v=0;v<r.length;v++)(null!=h?r[v].seq==h:m&&r[v].name==m)&&(p=v);if(p<0){for(var g=0;g<r.length&&(null==h||null!=r[g].seq&&r[g].seq<h);)g++;r.splice(g,0,{seq:h,name:m}),p=g;var y=!0,b=!1,w=void 0;try{for(var x,S=o[Symbol.iterator]();!(y=(x=S.next()).done);y=!0){var k=x.value;k.field>=p&&k.field++}}catch(t){b=!0,w=t}finally{try{y||null==S.return||S.return()}finally{if(b)throw w}}}o.push(new te(p,i.length,n.index,n.index+m.length)),f=f.slice(0,n.index)+d+f.slice(n.index+n[0].length)}f=f.replace(/\\([{}])/g,function(t,e,n){var r=!0,a=!1,s=void 0;try{for(var l,c=o[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var u=l.value;u.line==i.length&&u.from>n&&(u.from--,u.to--)}}catch(t){a=!0,s=t}finally{try{r||null==c.return||c.return()}finally{if(a)throw s}}return e}),i.push(f)}}catch(t){s=!0,l=t}finally{try{a||null==u.return||u.return()}finally{if(s)throw l}}return new t(i,o)}}]),t}(),ti=u.Decoration.widget({widget:new(function(t){function o(){return(0,n._)(this,o),(0,e._)(this,o,arguments)}return(0,i._)(o,t),(0,r._)(o,[{key:"toDOM",value:function(){var t=document.createElement("span");return t.className="cm-snippetFieldPosition",t}},{key:"ignoreEvent",value:function(){return!1}}]),o}(u.WidgetType))}),to=u.Decoration.mark({class:"cm-snippetField"}),ta=function(){function t(e,r){(0,n._)(this,t),this.ranges=e,this.active=r,this.deco=u.Decoration.set(e.map(function(t){return(t.from==t.to?ti:to).range(t.from,t.to)}))}return(0,r._)(t,[{key:"map",value:function(e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=this.ranges[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value.map(e);if(!l)return null;n.push(l)}}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return new t(n,this.active)}},{key:"selectionInsideField",value:function(t){var e=this;return t.ranges.every(function(t){return e.ranges.some(function(n){return n.field==e.active&&n.from<=t.from&&n.to>=t.to})})}}]),t}(),ts=c.StateEffect.define({map:function(t,e){return t&&t.map(e)}}),tl=c.StateEffect.define(),tc=c.StateField.define({create:function(){return null},update:function(t,e){var n=!0,r=!1,i=void 0;try{for(var o,a=e.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;if(s.is(ts))return s.value;if(s.is(tl)&&t)return new ta(t.ranges,s.value)}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t&&e.docChanged&&(t=t.map(e.changes)),t&&e.selection&&!t.selectionInsideField(e.selection)&&(t=null),t},provide:function(t){return u.EditorView.decorations.from(t,function(t){return t?t.deco:u.Decoration.none})}});function tu(t,e){return c.EditorSelection.create(t.filter(function(t){return t.field==e}).map(function(t){return c.EditorSelection.range(t.from,t.to)}))}function tf(t){var e=tr.parse(t);return function(t,n,r,i){var o=e.instantiate(t.state,r),a=o.text,s=o.ranges,l={changes:{from:r,to:i,insert:c.Text.of(a)},scrollIntoView:!0,annotations:n?[b.of(n),c.Transaction.userEvent.of("input.complete")]:void 0};if(s.length&&(l.selection=tu(s,0)),s.some(function(t){return t.field>0})){var u=new ta(s,0),f=l.effects=[ts.of(u)];void 0===t.state.field(tc,!1)&&f.push(c.StateEffect.appendConfig.of([tc,tm,tg,tt]))}t.dispatch(t.state.update(l))}}function th(t){return function(e){var n=e.state,r=e.dispatch,i=n.field(tc,!1);if(!i||t<0&&0==i.active)return!1;var o=i.active+t,a=t>0&&!i.ranges.some(function(e){return e.field==o+t});return r(n.update({selection:tu(i.ranges,o),effects:ts.of(a?null:new ta(i.ranges,o)),scrollIntoView:!0})),!0}}var td=[{key:"Tab",run:th(1),shift:th(-1)},{key:"Escape",run:function(t){var e=t.state,n=t.dispatch;return!!e.field(tc,!1)&&(n(e.update({effects:ts.of(null)})),!0)}}],tp=c.Facet.define({combine:function(t){return t.length?t[0]:td}}),tm=c.Prec.highest(u.keymap.compute([tp],function(t){return t.facet(tp)}));function tv(t,e){return Object.assign(Object.assign({},e),{apply:tf(t)})}var tg=u.EditorView.domEventHandlers({mousedown:function(t,e){var n,r=e.state.field(tc,!1);if(!r||null==(n=e.posAtCoords({x:t.clientX,y:t.clientY})))return!1;var i=r.ranges.find(function(t){return t.from<=n&&t.to>=n});return!!i&&i.field!=r.active&&(e.dispatch({selection:tu(r.ranges,i.field),effects:ts.of(r.ranges.some(function(t){return t.field>i.field})?new ta(r.ranges,i.field):null),scrollIntoView:!0}),!0)}}),ty={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},tb=c.StateEffect.define({map:function(t,e){var n=e.mapPos(t,-1,c.MapMode.TrackAfter);return null==n?void 0:n}}),tw=new(function(t){function r(){return(0,n._)(this,r),(0,e._)(this,r,arguments)}return(0,i._)(r,t),r}(c.RangeValue));tw.startSide=1,tw.endSide=-1;var tx=c.StateField.define({create:function(){return c.RangeSet.empty},update:function(t,e){if(t=t.map(e.changes),e.selection){var n=e.state.doc.lineAt(e.selection.main.head);t=t.update({filter:function(t){return t>=n.from&&t<=n.to}})}var r=!0,i=!1,o=void 0;try{for(var a,s=e.effects[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;l.is(tb)&&(t=t.update({add:[tw.range(l.value,l.value+1)]}))}}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return t}});function tS(){return[tP,tx]}var tk="()[]{}<>";function tC(t){for(var e=0;e<tk.length;e+=2)if(tk.charCodeAt(e)==t)return tk.charAt(e+1);return(0,c.fromCodePoint)(t<128?t:t+1)}function tI(t,e){return t.languageDataAt("closeBrackets",e)[0]||ty}var tE=("undefined"==typeof navigator?"undefined":(0,l._)(navigator))=="object"&&/Android\b/.test(navigator.userAgent),tP=u.EditorView.inputHandler.of(function(t,e,n,r){if((tE?t.composing:t.compositionStarted)||t.state.readOnly)return!1;var i=t.state.selection.main;if(r.length>2||2==r.length&&1==(0,c.codePointSize)((0,c.codePointAt)(r,0))||e!=i.from||n!=i.to)return!1;var o=function(t,e){var n=tI(t,t.selection.main.head),r=n.brackets||ty.brackets,i=!0,o=!1,a=void 0;try{for(var s,l=r[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=s.value,h=tC((0,c.codePointAt)(u,0));if(e==u)return h==u?function(t,e,n,r){var i=r.stringPrefixes||ty.stringPrefixes,o=null,a=t.changeByRange(function(r){if(!r.empty)return{changes:[{insert:e,from:r.from},{insert:e,from:r.to}],effects:tb.of(r.to+e.length),range:c.EditorSelection.range(r.anchor+e.length,r.head+e.length)};var a,s=r.head,l=tA(t.doc,s);if(l==e){if(tD(t,s))return{changes:{insert:e+e,from:s},effects:tb.of(s+e.length),range:c.EditorSelection.cursor(s+e.length)};else if(tT(t,s)){var u=n&&t.sliceDoc(s,s+3*e.length)==e+e+e?e+e+e:e;return{changes:{from:s,to:s+u.length,insert:u},range:c.EditorSelection.cursor(s+u.length)}}}else if(n&&t.sliceDoc(s-2*e.length,s)==e+e&&(a=t_(t,s-2*e.length,i))>-1&&tD(t,a))return{changes:{insert:e+e+e+e,from:s},effects:tb.of(s+e.length),range:c.EditorSelection.cursor(s+e.length)};else if(t.charCategorizer(s)(l)!=c.CharCategory.Word&&t_(t,s,i)>-1&&!function(t,e,n,r){for(var i=(0,f.syntaxTree)(t).resolveInner(e,-1),o=r.reduce(function(t,e){return Math.max(t,e.length)},0),a=0;a<5;a++){var s=t.sliceDoc(i.from,Math.min(i.to,i.from+n.length+o)),l=s.indexOf(n);if(!l||l>-1&&r.indexOf(s.slice(0,l))>-1){for(var c=i.firstChild;c&&c.from==i.from&&c.to-c.from>n.length+l;){if(t.sliceDoc(c.to-n.length,c.to)==n)return!1;c=c.firstChild}return!0}var u=i.to==e&&i.parent;if(!u)break;i=u}return!1}(t,s,e,i))return{changes:{insert:e+e,from:s},effects:tb.of(s+e.length),range:c.EditorSelection.cursor(s+e.length)};return{range:o=r}});return o?null:t.update(a,{scrollIntoView:!0,userEvent:"input.type"})}(t,u,r.indexOf(u+u+u)>-1,n):function(t,e,n,r){var i=null,o=t.changeByRange(function(o){if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:n,from:o.to}],effects:tb.of(o.to+e.length),range:c.EditorSelection.range(o.anchor+e.length,o.head+e.length)};var a=tA(t.doc,o.head);return!a||/\s/.test(a)||r.indexOf(a)>-1?{changes:{insert:e+n,from:o.head},effects:tb.of(o.head+e.length),range:c.EditorSelection.cursor(o.head+e.length)}:{range:i=o}});return i?null:t.update(o,{scrollIntoView:!0,userEvent:"input.type"})}(t,u,h,n.before||ty.before);if(e==h&&tT(t,t.selection.main.from))return function(t,e,n){var r=null,i=t.changeByRange(function(e){return e.empty&&tA(t.doc,e.head)==n?{changes:{from:e.head,to:e.head+n.length,insert:n},range:c.EditorSelection.cursor(e.head+n.length)}:r={range:e}});return r?null:t.update(i,{scrollIntoView:!0,userEvent:"input.type"})}(t,0,h)}}catch(t){o=!0,a=t}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}return null}(t.state,r);return!!o&&(t.dispatch(o),!0)}),tO=function(t){var e=t.state,n=t.dispatch;if(e.readOnly)return!1;var r=tI(e,e.selection.main.head).brackets||ty.brackets,i=null,o=e.changeByRange(function(t){if(t.empty){var n=(l=e.doc,u=t.head,f=l.sliceString(u-2,u),(0,c.codePointSize)((0,c.codePointAt)(f,0))==f.length?f:f.slice(1)),o=!0,a=!1,s=void 0;try{for(var l,u,f,h,d=r[Symbol.iterator]();!(o=(h=d.next()).done);o=!0){var p=h.value;if(p==n&&tA(e.doc,t.head)==tC((0,c.codePointAt)(p,0)))return{changes:{from:t.head-p.length,to:t.head+p.length},range:c.EditorSelection.cursor(t.head-p.length)}}}catch(t){a=!0,s=t}finally{try{o||null==d.return||d.return()}finally{if(a)throw s}}}return{range:i=t}});return i||n(e.update(o,{scrollIntoView:!0,userEvent:"delete.backward"})),!i};function tT(t,e){var n=!1;return t.field(tx).between(0,t.doc.length,function(t){t==e&&(n=!0)}),n}function tA(t,e){var n=t.sliceString(e,e+2);return n.slice(0,(0,c.codePointSize)((0,c.codePointAt)(n,0)))}function tD(t,e){var n=(0,f.syntaxTree)(t).resolveInner(e+1);return n.parent&&n.from==e}function t_(t,e,n){var r=t.charCategorizer(e);if(r(t.sliceDoc(e-1,e))!=c.CharCategory.Word)return e;var i=!0,o=!1,a=void 0;try{for(var s,l=n[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=s.value,f=e-u.length;if(t.sliceDoc(f,e)==u&&r(t.sliceDoc(f-1,f))!=c.CharCategory.Word)return f}}catch(t){o=!0,a=t}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}return -1}function tR(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[Z,W,E.of(t),G,tM,tt]}var tL=[{key:"Ctrl-Space",run:Q},{key:"Escape",run:X},{key:"ArrowDown",run:$(!0)},{key:"ArrowUp",run:$(!1)},{key:"PageDown",run:$(!0,"page")},{key:"PageUp",run:$(!1,"page")},{key:"Enter",run:K}],tM=c.Prec.highest(u.keymap.computeN([E],function(t){return t.facet(E).defaultKeymap?[tL]:[]}));function tB(t){var e=t.field(W,!1);return e&&e.active.some(function(t){return 1==t.state})?"pending":e&&e.active.some(function(t){return 0!=t.state})?"active":null}var tF=new WeakMap;function tU(t){var e,n=null==(e=t.field(W,!1))?void 0:e.open;if(!n||n.disabled)return[];var r=tF.get(n.options);return r||tF.set(n.options,r=n.options.map(function(t){return t.completion})),r}t.s(["CompletionContext",()=>h,"acceptCompletion",()=>K,"autocompletion",()=>tR,"closeBrackets",()=>tS,"closeCompletion",()=>X,"completeFromList",()=>p,"completionStatus",()=>tB,"currentCompletions",()=>tU,"deleteBracketPair",()=>tO,"ifNotIn",()=>m,"moveCompletionSelection",()=>$,"pickedCompletion",()=>b,"snippet",()=>tf,"snippetCompletion",()=>tv,"startCompletion",()=>Q])}]);

//# debugId=1528ab1f-bff6-7801-6266-f1a887f9fe87
//# sourceMappingURL=2c33789ac9b30eac.js.map