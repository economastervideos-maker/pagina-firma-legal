;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="6ebc8df3-fdf3-24cc-f24c-1cbb3d194ab0")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,840838,e=>{"use strict";var t=e.i(119468);function n(){var e=arguments[0];"string"==typeof e&&(e=document.createElement(e));var n=1,r=arguments[1];if(r&&(void 0===r?"undefined":(0,t._)(r))=="object"&&null==r.nodeType&&!Array.isArray(r)){for(var o in r)if(Object.prototype.hasOwnProperty.call(r,o)){var i=r[o];"string"==typeof i?e.setAttribute(o,i):null!=i&&(e[o]=i)}n++}for(;n<arguments.length;n++)!function e(t,n){if("string"==typeof n)t.appendChild(document.createTextNode(n));else if(null==n);else if(null!=n.nodeType)t.appendChild(n);else if(Array.isArray(n))for(var r=0;r<n.length;r++)e(t,n[r]);else throw RangeError("Unsupported child node: "+n)}(e,arguments[n]);return e}e.s(["default",()=>n])},488566,e=>{"use strict";var t=e.i(904851),n=e.i(90659),r=e.i(167626),o=e.i(753950),i=e.i(179302),a=e.i(486701),c=e.i(873753),l=function(e){var t=e.state,n=t.doc.lineAt(t.selection.main.from),r=v(e.state,n.from);return r.line?u(e):!!r.block&&m(e)};function s(e,t){return function(n){var r=n.state,o=n.dispatch;if(r.readOnly)return!1;var i=e(t,r);return!!i&&(o(r.update(i)),!0)}}var u=s(p,0),f=s(p,1),h=s(p,2),d=s(g,0),m=s(function(e,t){return g(e,t,function(e){var t=[],n=!0,r=!1,o=void 0;try{for(var i,a=e.selection.ranges[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var c=i.value,l=e.doc.lineAt(c.from),s=c.to<=l.to?l:e.doc.lineAt(c.to),u=t.length-1;u>=0&&t[u].to>l.from?t[u].to=s.to:t.push({from:l.from+/^\s*/.exec(l.text)[0].length,to:s.to})}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return t}(t))},0);function v(e,t){var n=e.languageDataAt("commentTokens",t);return n.length?n[0]:{}}function g(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.selection.ranges,r=n.map(function(e){return v(t,e.from).block});if(!r.every(function(e){return e}))return null;var o=n.map(function(e,n){return function(e,t,n,r){var o,i,a=t.open,c=t.close,l=e.sliceDoc(n-50,n),s=e.sliceDoc(r,r+50),u=/\s*$/.exec(l)[0].length,f=/^\s*/.exec(s)[0].length,h=l.length-u;if(l.slice(h-a.length,h)==a&&s.slice(f,f+c.length)==c)return{open:{pos:n-u,margin:u&&1},close:{pos:r+f,margin:f&&1}};r-n<=100?o=i=e.sliceDoc(n,r):(o=e.sliceDoc(n,n+50),i=e.sliceDoc(r-50,r));var d=/^\s*/.exec(o)[0].length,m=/\s*$/.exec(i)[0].length,v=i.length-m-c.length;return o.slice(d,d+a.length)==a&&i.slice(v,v+c.length)==c?{open:{pos:n+d+a.length,margin:+!!/\s/.test(o.charAt(d+a.length))},close:{pos:r-m-c.length,margin:+!!/\s/.test(i.charAt(v-1))}}:null}(t,r[n],e.from,e.to)});if(2!=e&&!o.every(function(e){return e}))return{changes:t.changes(n.map(function(e,t){return o[t]?[]:[{from:e.from,insert:r[t].open+" "},{from:e.to,insert:" "+r[t].close}]}))};if(1!=e&&o.some(function(e){return e})){for(var i,a=[],c=0;c<o.length;c++)if(i=o[c]){var l=r[c],s=i.open,u=i.close;a.push({from:s.pos-l.open.length,to:s.pos+s.margin},{from:u.pos-u.margin,to:u.pos+l.close.length})}return{changes:a}}return null}function p(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.selection.ranges,r=[],o=-1,i=!0,a=!1,c=void 0;try{for(var l,s=n[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var u=l.value,f=u.from,h=u.to,d=r.length,m=1e9,g=v(t,f).line;if(g){for(var p=f;p<=h;){var y=t.doc.lineAt(p);if(y.from>o&&(f==h||h>y.from)){o=y.from;var S=/^\s*/.exec(y.text)[0].length,x=S==y.length,w=y.text.slice(S,S+g.length)==g?S:-1;S<y.text.length&&S<m&&(m=S),r.push({line:y,comment:w,token:g,indent:S,empty:x,single:!1})}p=y.to+1}if(m<1e9)for(var k=d;k<r.length;k++)r[k].indent<r[k].line.text.length&&(r[k].indent=m);r.length==d+1&&(r[d].single=!0)}}}catch(e){a=!0,c=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw c}}if(2!=e&&r.some(function(e){return e.comment<0&&(!e.empty||e.single)})){var b=[],C=!0,E=!1,A=void 0;try{for(var M,D=r[Symbol.iterator]();!(C=(M=D.next()).done);C=!0){var L=M.value,B=L.line,O=L.token,P=L.indent,T=L.empty;(L.single||!T)&&b.push({from:B.from+P,insert:O+" "})}}catch(e){E=!0,A=e}finally{try{C||null==D.return||D.return()}finally{if(E)throw A}}var q=t.changes(b);return{changes:q,selection:t.selection.map(q,1)}}if(1!=e&&r.some(function(e){return e.comment>=0})){var F=[],R=!0,I=!1,V=void 0;try{for(var _,W=r[Symbol.iterator]();!(R=(_=W.next()).done);R=!0){var N=_.value,U=N.line,z=N.comment,J=N.token;if(z>=0){var G=U.from+z,$=G+J.length;" "==U.text[$-U.from]&&$++,F.push({from:G,to:$})}}}catch(e){I=!0,V=e}finally{try{R||null==W.return||W.return()}finally{if(I)throw V}}return{changes:F}}return null}var y=o.Annotation.define(),S=o.Annotation.define(),x=o.Facet.define(),w=o.Facet.define({combine:function(e){return(0,o.combineConfig)(e,{minDepth:100,newGroupDelay:500,joinToEvent:function(e,t){return t}},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:function(e,t){return function(n,r){return e(n,r)||t(n,r)}}})}}),k=o.StateField.define({create:function(){return F.empty},update:function(e,t){var n=t.state.facet(w),r=t.annotation(y);if(r){var i=D.fromTransaction(t,r.selection),a=r.side,c=0==a?e.undone:e.done;return c=i?L(c,c.length,n.minDepth,i):P(c,t.startState.selection),new F(0==a?r.rest:c,0==a?c:r.rest)}var l=t.annotation(S);if(("full"==l||"before"==l)&&(e=e.isolate()),!1===t.annotation(o.Transaction.addToHistory))return t.changes.empty?e:e.addMapping(t.changes.desc);var s=D.fromTransaction(t),u=t.annotation(o.Transaction.time),f=t.annotation(o.Transaction.userEvent);return s?e=e.addChanges(s,u,f,n,t):t.selection&&(e=e.addSelection(t.startState.selection,u,f,n.newGroupDelay)),("full"==l||"after"==l)&&(e=e.isolate()),e},toJSON:function(e){return{done:e.done.map(function(e){return e.toJSON()}),undone:e.undone.map(function(e){return e.toJSON()})}},fromJSON:function(e){return new F(e.done.map(D.fromJSON),e.undone.map(D.fromJSON))}});function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[k,w.of(e),i.EditorView.domEventHandlers({beforeinput:function(e,t){var n="historyUndo"==e.inputType?E:"historyRedo"==e.inputType?A:null;return!!n&&(e.preventDefault(),n(t))}})]}function C(e,t){return function(n){var r=n.state,o=n.dispatch;if(!t&&r.readOnly)return!1;var i=r.field(k,!1);if(!i)return!1;var a=i.pop(e,r,t);return!!a&&(o(a),!0)}}var E=C(0,!1),A=C(1,!1),M=C(0,!0),D=function(){function e(n,r,o,i,a){(0,t._)(this,e),this.changes=n,this.effects=r,this.mapped=o,this.startSelection=i,this.selectionsAfter=a}return(0,n._)(e,[{key:"setSelAfter",value:function(t){return new e(this.changes,this.effects,this.mapped,this.startSelection,t)}},{key:"toJSON",value:function(){var e,t,n;return{changes:null==(e=this.changes)?void 0:e.toJSON(),mapped:null==(t=this.mapped)?void 0:t.toJSON(),startSelection:null==(n=this.startSelection)?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map(function(e){return e.toJSON()})}}}],[{key:"fromJSON",value:function(t){return new e(t.changes&&o.ChangeSet.fromJSON(t.changes),[],t.mapped&&o.ChangeDesc.fromJSON(t.mapped),t.startSelection&&o.EditorSelection.fromJSON(t.startSelection),t.selectionsAfter.map(o.EditorSelection.fromJSON))}},{key:"fromTransaction",value:function(t,n){var r=O,o=!0,i=!1,a=void 0;try{for(var c,l=t.startState.facet(x)[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var s=(0,c.value)(t);s.length&&(r=r.concat(s))}}catch(e){i=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}return!r.length&&t.changes.empty?null:new e(t.changes.invert(t.startState.doc),r,void 0,n||t.startState.selection,O)}},{key:"selection",value:function(t){return new e(void 0,O,void 0,void 0,t)}}]),e}();function L(e,t,n,r){var o=e.slice(t+1>n+20?t-n-1:0,t);return o.push(r),o}function B(e,t){return e.length?t.length?e.concat(t):e:t}var O=[];function P(e,t){if(!e.length)return[D.selection([t])];var n=e[e.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-200));return r.length&&r[r.length-1].eq(t)?e:(r.push(t),L(e,e.length-1,1e9,n.setSelAfter(r)))}function T(e,t){if(!e.length)return e;for(var n=e.length,r=O;n;){var i=function(e,t,n){var r=B(e.selectionsAfter.length?e.selectionsAfter.map(function(e){return e.map(t)}):O,n);if(!e.changes)return D.selection(r);var i=e.changes.map(t),a=t.mapDesc(e.changes,!0),c=e.mapped?e.mapped.composeDesc(a):a;return new D(i,o.StateEffect.mapEffects(e.effects,t),c,e.startSelection.map(a),r)}(e[n-1],t,r);if(i.changes&&!i.changes.empty||i.effects.length){var a=e.slice(0,n);return a[n-1]=i,a}t=i.mapped,n--,r=i.selectionsAfter}return r.length?[D.selection(r)]:O}var q=/^(input\.type|delete)($|\.)/,F=function(){function e(n,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;(0,t._)(this,e),this.done=n,this.undone=r,this.prevTime=o,this.prevUserEvent=i}return(0,n._)(e,[{key:"isolate",value:function(){return this.prevTime?new e(this.done,this.undone):this}},{key:"addChanges",value:function(t,n,r,o,i){var a,c,l,s,u=this.done,f=u[u.length-1];return new e(u=f&&f.changes&&!f.changes.empty&&t.changes&&(!r||q.test(r))&&(!f.selectionsAfter.length&&n-this.prevTime<o.newGroupDelay&&o.joinToEvent(i,(a=f.changes,c=t.changes,l=[],s=!1,a.iterChangedRanges(function(e,t){return l.push(e,t)}),c.iterChangedRanges(function(e,t,n,r){for(var o=0;o<l.length;){var i=l[o++],a=l[o++];r>=i&&n<=a&&(s=!0)}}),s))||"input.type.compose"==r)?L(u,u.length-1,o.minDepth,new D(t.changes.compose(f.changes),B(t.effects,f.effects),f.mapped,f.startSelection,O)):L(u,u.length,o.minDepth,t),O,n,r)}},{key:"addSelection",value:function(t,n,r,o){var i,a=this.done.length?this.done[this.done.length-1].selectionsAfter:O;return a.length>0&&n-this.prevTime<o&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&(i=a[a.length-1],i.ranges.length==t.ranges.length&&0===i.ranges.filter(function(e,n){return e.empty!=t.ranges[n].empty}).length)?this:new e(P(this.done,t),this.undone,n,r)}},{key:"addMapping",value:function(t){return new e(T(this.done,t),T(this.undone,t),this.prevTime,this.prevUserEvent)}},{key:"pop",value:function(e,t,n){var r,o,i=0==e?this.done:this.undone;if(0==i.length)return null;var a=i[i.length-1],c=a.selectionsAfter[0]||t.selection;if(n&&a.selectionsAfter.length)return t.update({selection:a.selectionsAfter[a.selectionsAfter.length-1],annotations:y.of({side:e,rest:(r=i[i.length-1],(o=i.slice())[i.length-1]=r.setSelAfter(r.selectionsAfter.slice(0,r.selectionsAfter.length-1)),o),selection:c}),userEvent:0==e?"select.undo":"select.redo",scrollIntoView:!0});if(!a.changes)return null;var l=1==i.length?O:i.slice(0,i.length-1);return a.mapped&&(l=T(l,a.mapped)),t.update({changes:a.changes,selection:a.startSelection,effects:a.effects,annotations:y.of({side:e,rest:l,selection:c}),filter:!1,userEvent:0==e?"undo":"redo",scrollIntoView:!0})}}]),e}();function R(e,t){return o.EditorSelection.create(e.ranges.map(t),e.mainIndex)}function I(e,t){return e.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function V(e,t){var n=e.state,r=e.dispatch,o=R(n.selection,t);return!o.eq(n.selection,!0)&&(r(I(n,o)),!0)}function _(e,t){return o.EditorSelection.cursor(t?e.to:e.from)}function W(e,t){return V(e,function(n){return n.empty?e.moveByChar(n,t):_(n,t)})}function N(e){return e.textDirectionAt(e.state.selection.main.head)==i.Direction.LTR}F.empty=new F(O,O);var U=function(e){return W(e,!N(e))},z=function(e){return W(e,N(e))},J=function(e){return W(e,!0)},G=function(e){return W(e,!1)};function $(e,t){return V(e,function(n){return n.empty?e.moveByGroup(n,t):_(n,t)})}var H=function(e){return $(e,!N(e))},j=function(e){return $(e,N(e))};"undefined"!=typeof Intl&&Intl.Segmenter;function Q(e,t){return V(e,function(n){if(!n.empty)return _(n,t);var r=e.moveVertically(n,t);return r.head!=n.head?r:e.moveToLineBoundary(n,t)})}var K=function(e){return Q(e,!1)},X=function(e){return Q(e,!0)};function Y(e){var t,n=e.scrollDOM.clientHeight<e.scrollDOM.scrollHeight-2,r=0,o=0;if(n){var a=!0,c=!1,l=void 0;try{for(var s,u=e.state.facet(i.EditorView.scrollMargins)[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var f=(0,s.value)(e);(null==f?void 0:f.top)&&(r=Math.max(null==f?void 0:f.top,r)),(null==f?void 0:f.bottom)&&(o=Math.max(null==f?void 0:f.bottom,o))}}catch(e){c=!0,l=e}finally{try{a||null==u.return||u.return()}finally{if(c)throw l}}t=e.scrollDOM.clientHeight-r-o}else t=(e.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:r,marginBottom:o,selfScroll:n,height:Math.max(e.defaultLineHeight,t-5)}}function Z(e,t){var n,r=Y(e),o=e.state,a=R(o.selection,function(n){return n.empty?e.moveVertically(n,t,r.height):_(n,t)});if(a.eq(o.selection))return!1;if(r.selfScroll){var c=e.coordsAtPos(o.selection.main.head),l=e.scrollDOM.getBoundingClientRect(),s=l.top+r.marginTop,u=l.bottom-r.marginBottom;c&&c.top>s&&c.bottom<u&&(n=i.EditorView.scrollIntoView(a.main.head,{y:"start",yMargin:c.top-s}))}return e.dispatch(I(o,a),{effects:n}),!0}var ee=function(e){return Z(e,!1)},et=function(e){return Z(e,!0)};function en(e,t,n){var r=e.lineBlockAt(t.head),i=e.moveToLineBoundary(t,n);if(i.head==t.head&&i.head!=(n?r.to:r.from)&&(i=e.moveToLineBoundary(t,n,!1)),!n&&i.head==r.from&&r.length){var a=/^\s*/.exec(e.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;a&&t.head!=r.from+a&&(i=o.EditorSelection.cursor(r.from+a))}return i}var er=function(e){return V(e,function(t){return en(e,t,!0)})},eo=function(e){return V(e,function(t){return en(e,t,!1)})},ei=function(e){return V(e,function(t){return o.EditorSelection.cursor(e.lineBlockAt(t.head).from,1)})},ea=function(e){return V(e,function(t){return o.EditorSelection.cursor(e.lineBlockAt(t.head).to,-1)})},ec=function(e){var t,n,r=e.state,i=e.dispatch;return t=!1,n=R(r.selection,function(e){var n=(0,a.matchBrackets)(r,e.head,-1)||(0,a.matchBrackets)(r,e.head,1)||e.head>0&&(0,a.matchBrackets)(r,e.head-1,1)||e.head<r.doc.length&&(0,a.matchBrackets)(r,e.head+1,-1);if(!n||!n.end)return e;t=!0;var i=n.start.from==e.head?n.end.to:n.end.from;return o.EditorSelection.cursor(i)}),!!t&&(i(I(r,n)),!0)};function el(e,t){var n=R(e.state.selection,function(e){var n=t(e);return o.EditorSelection.range(e.anchor,n.head,n.goalColumn,n.bidiLevel||void 0)});return!n.eq(e.state.selection)&&(e.dispatch(I(e.state,n)),!0)}function es(e,t){return el(e,function(n){return e.moveByChar(n,t)})}var eu=function(e){return es(e,!N(e))},ef=function(e){return es(e,N(e))},eh=function(e){return es(e,!0)},ed=function(e){return es(e,!1)};function em(e,t){return el(e,function(n){return e.moveByGroup(n,t)})}var ev=function(e){return em(e,!N(e))},eg=function(e){return em(e,N(e))},ep=function(e){return em(e,!0)},ey=function(e){return em(e,!1)};function eS(e,t){return el(e,function(n){return e.moveVertically(n,t)})}var ex=function(e){return eS(e,!1)},ew=function(e){return eS(e,!0)};function ek(e,t){return el(e,function(n){return e.moveVertically(n,t,Y(e).height)})}var eb=function(e){return ek(e,!1)},eC=function(e){return ek(e,!0)},eE=function(e){return el(e,function(t){return en(e,t,!0)})},eA=function(e){return el(e,function(t){return en(e,t,!1)})},eM=function(e){return el(e,function(t){return o.EditorSelection.cursor(e.lineBlockAt(t.head).from)})},eD=function(e){return el(e,function(t){return o.EditorSelection.cursor(e.lineBlockAt(t.head).to)})},eL=function(e){var t=e.state;return(0,e.dispatch)(I(t,{anchor:0})),!0},eB=function(e){var t=e.state;return(0,e.dispatch)(I(t,{anchor:t.doc.length})),!0},eO=function(e){var t=e.state;return(0,e.dispatch)(I(t,{anchor:t.selection.main.anchor,head:0})),!0},eP=function(e){var t=e.state;return(0,e.dispatch)(I(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0},eT=function(e){var t=e.state;return(0,e.dispatch)(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0},eq=function(e){var t=e.state,n=e.dispatch,r=ej(t).map(function(e){var n=e.from,r=e.to;return o.EditorSelection.range(n,Math.min(r+1,t.doc.length))});return n(t.update({selection:o.EditorSelection.create(r),userEvent:"select"})),!0},eF=function(e){var t=e.state,n=e.dispatch,r=t.selection,i=null;return r.ranges.length>1?i=o.EditorSelection.create([r.main]):r.main.empty||(i=o.EditorSelection.create([o.EditorSelection.cursor(r.main.head)])),!!i&&(n(I(t,i)),!0)};function eR(e,t){if(e.state.readOnly)return!1;var n="delete.selection",r=e.state,a=r.changeByRange(function(r){var i=r.from,a=r.to;if(i==a){var c=t(r);c<i?(n="delete.backward",c=eI(e,c,!1)):c>i&&(n="delete.forward",c=eI(e,c,!0)),i=Math.min(i,c),a=Math.max(a,c)}else i=eI(e,i,!1),a=eI(e,a,!0);return i==a?{range:r}:{changes:{from:i,to:a},range:o.EditorSelection.cursor(i,i<r.head?-1:1)}});return!a.changes.empty&&(e.dispatch(r.update(a,{scrollIntoView:!0,userEvent:n,effects:"delete.selection"==n?i.EditorView.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function eI(e,t,n){var o=!0,a=!1,c=void 0;if((0,r._)(e,i.EditorView))try{for(var l,s=e.state.facet(i.EditorView.atomicRanges).map(function(t){return t(e)})[Symbol.iterator]();!(o=(l=s.next()).done);o=!0)l.value.between(t,t,function(e,r){e<t&&r>t&&(t=n?r:e)})}catch(e){a=!0,c=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw c}}return t}var eV=function(e,t,n){return eR(e,function(r){var i,c,l=r.from,s=e.state,u=s.doc.lineAt(l);if(n&&!t&&l>u.from&&l<u.from+200&&!/[^ \t]/.test(i=u.text.slice(0,l-u.from))){if("	"==i[i.length-1])return l-1;for(var f=(0,o.countColumn)(i,s.tabSize)%(0,a.getIndentUnit)(s)||(0,a.getIndentUnit)(s),h=0;h<f&&" "==i[i.length-1-h];h++)l--;c=l}else(c=(0,o.findClusterBreak)(u.text,l-u.from,t,t)+u.from)==l&&u.number!=(t?s.doc.lines:1)?c+=t?1:-1:!t&&/[\ufe00-\ufe0f]/.test(u.text.slice(c-u.from,l-u.from))&&(c=(0,o.findClusterBreak)(u.text,c-u.from,!1,!1)+u.from);return c})},e_=function(e){return eV(e,!1,!0)},eW=function(e){return eV(e,!0,!1)},eN=function(e,t){return eR(e,function(n){for(var r=n.head,i=e.state,a=i.doc.lineAt(r),c=i.charCategorizer(r),l=null;;){if(r==(t?a.to:a.from)){r==n.head&&a.number!=(t?i.doc.lines:1)&&(r+=t?1:-1);break}var s=(0,o.findClusterBreak)(a.text,r-a.from,t)+a.from,u=a.text.slice(Math.min(r,s)-a.from,Math.max(r,s)-a.from),f=c(u);if(null!=l&&f!=l)break;(" "!=u||r!=n.head)&&(l=f),r=s}return r})},eU=function(e){return eN(e,!1)},ez=function(e){return eN(e,!0)},eJ=function(e){return eR(e,function(t){var n=e.lineBlockAt(t.head).to;return t.head<n?n:Math.min(e.state.doc.length,t.head+1)})},eG=function(e){return eR(e,function(t){var n=e.lineBlockAt(t.head).from;return t.head>n?n:Math.max(0,t.head-1)})},e$=function(e){var t=e.state,n=e.dispatch;if(t.readOnly)return!1;var r=t.changeByRange(function(e){return{changes:{from:e.from,to:e.to,insert:o.Text.of(["",""])},range:o.EditorSelection.cursor(e.from)}});return n(t.update(r,{scrollIntoView:!0,userEvent:"input"})),!0},eH=function(e){var t=e.state,n=e.dispatch;if(t.readOnly)return!1;var r=t.changeByRange(function(e){if(!e.empty||0==e.from||e.from==t.doc.length)return{range:e};var n=e.from,r=t.doc.lineAt(n),i=n==r.from?n-1:(0,o.findClusterBreak)(r.text,n-r.from,!1)+r.from,a=n==r.to?n+1:(0,o.findClusterBreak)(r.text,n-r.from,!0)+r.from;return{changes:{from:i,to:a,insert:t.doc.slice(n,a).append(t.doc.slice(i,n))},range:o.EditorSelection.cursor(a)}});return!r.changes.empty&&(n(t.update(r,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function ej(e){var t=[],n=-1,r=!0,o=!1,i=void 0;try{for(var a,c=e.selection.ranges[Symbol.iterator]();!(r=(a=c.next()).done);r=!0){var l=a.value,s=e.doc.lineAt(l.from),u=e.doc.lineAt(l.to);if(l.empty||l.to!=u.from||(u=e.doc.lineAt(l.to-1)),n>=s.number){var f=t[t.length-1];f.to=u.to,f.ranges.push(l)}else t.push({from:s.from,to:u.to,ranges:[l]});n=u.number+1}}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return t}function eQ(e,t,n){if(e.readOnly)return!1;var r=[],i=[],a=!0,c=!1,l=void 0;try{for(var s,u=ej(e)[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var f=s.value;if(n?f.to!=e.doc.length:0!=f.from){var h=e.doc.lineAt(n?f.to+1:f.from-1),d=h.length+1;if(n){r.push({from:f.to,to:h.to},{from:f.from,insert:h.text+e.lineBreak});var m=!0,v=!1,g=void 0;try{for(var p,y=f.ranges[Symbol.iterator]();!(m=(p=y.next()).done);m=!0){var S=p.value;i.push(o.EditorSelection.range(Math.min(e.doc.length,S.anchor+d),Math.min(e.doc.length,S.head+d)))}}catch(e){v=!0,g=e}finally{try{m||null==y.return||y.return()}finally{if(v)throw g}}}else{r.push({from:h.from,to:f.from},{from:f.to,insert:e.lineBreak+h.text});var x=!0,w=!1,k=void 0;try{for(var b,C=f.ranges[Symbol.iterator]();!(x=(b=C.next()).done);x=!0){var E=b.value;i.push(o.EditorSelection.range(E.anchor-d,E.head-d))}}catch(e){w=!0,k=e}finally{try{x||null==C.return||C.return()}finally{if(w)throw k}}}}}}catch(e){c=!0,l=e}finally{try{a||null==u.return||u.return()}finally{if(c)throw l}}return!!r.length&&(t(e.update({changes:r,scrollIntoView:!0,selection:o.EditorSelection.create(i,e.selection.mainIndex),userEvent:"move.line"})),!0)}var eK=function(e){return eQ(e.state,e.dispatch,!1)},eX=function(e){return eQ(e.state,e.dispatch,!0)};function eY(e,t,n){if(e.readOnly)return!1;var r=[],o=!0,i=!1,a=void 0;try{for(var c,l=ej(e)[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var s=c.value;n?r.push({from:s.from,insert:e.doc.slice(s.from,s.to)+e.lineBreak}):r.push({from:s.to,insert:e.lineBreak+e.doc.slice(s.from,s.to)})}}catch(e){i=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}return t(e.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}var eZ=function(e){return eY(e.state,e.dispatch,!1)},e0=function(e){return eY(e.state,e.dispatch,!0)},e1=function(e){if(e.state.readOnly)return!1;var t=e.state,n=t.changes(ej(t).map(function(e){var n=e.from,r=e.to;return n>0?n--:r<t.doc.length&&r++,{from:n,to:r}})),r=R(t.selection,function(t){var n=void 0;if(e.lineWrapping){var r=e.lineBlockAt(t.head),o=e.coordsAtPos(t.head,t.assoc||1);o&&(n=r.bottom+e.documentTop-o.bottom+e.defaultLineHeight/2)}return e.moveVertically(t,!0,n)}).map(n);return e.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0},e2=function(e){return function(t){var n=t.state,r=t.dispatch;if(n.readOnly)return!1;var i=n.changeByRange(function(t){var r=t.from,i=t.to,l=n.doc.lineAt(r),s=!e&&r==i&&function(e,t){if(/\(\)|\[\]|\{\}/.test(e.sliceDoc(t-1,t+1)))return{from:t,to:t};var n,r=(0,a.syntaxTree)(e).resolveInner(t),o=r.childBefore(t),i=r.childAfter(t);return o&&i&&o.to<=t&&i.from>=t&&(n=o.type.prop(c.NodeProp.closedBy))&&n.indexOf(i.name)>-1&&e.doc.lineAt(o.to).from==e.doc.lineAt(i.from).from&&!/\S/.test(e.sliceDoc(o.to,i.from))?{from:o.to,to:i.from}:null}(n,r);e&&(r=i=(i<=l.to?l:n.doc.lineAt(i)).to);var u=new a.IndentContext(n,{simulateBreak:r,simulateDoubleBreak:!!s}),f=(0,a.getIndentation)(u,r);for(null==f&&(f=(0,o.countColumn)(/^\s*/.exec(n.doc.lineAt(r).text)[0],n.tabSize));i<l.to&&/\s/.test(l.text[i-l.from]);)i++;s?(r=s.from,i=s.to):r>l.from&&r<l.from+100&&!/\S/.test(l.text.slice(0,r))&&(r=l.from);var h=["",(0,a.indentString)(n,f)];return s&&h.push((0,a.indentString)(n,u.lineIndent(l.from,-1))),{changes:{from:r,to:i,insert:o.Text.of(h)},range:o.EditorSelection.cursor(r+1+h[1].length)}});return r(n.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}(!1);function e3(e,t){var n=-1;return e.changeByRange(function(r){for(var i=[],a=r.from;a<=r.to;){var c=e.doc.lineAt(a);c.number>n&&(r.empty||r.to>c.from)&&(t(c,i,r),n=c.number),a=c.to+1}var l=e.changes(i);return{changes:i,range:o.EditorSelection.range(l.mapPos(r.anchor,1),l.mapPos(r.head,1))}})}var e5=function(e){var t=e.state,n=e.dispatch;if(t.readOnly)return!1;var r=Object.create(null),o=new a.IndentContext(t,{overrideIndentation:function(e){var t=r[e];return null==t?-1:t}}),i=e3(t,function(e,n,i){var c=(0,a.getIndentation)(o,e.from);if(null!=c){/\S/.test(e.text)||(c=0);var l=/^\s*/.exec(e.text)[0],s=(0,a.indentString)(t,c);(l!=s||i.from<e.from+l.length)&&(r[e.from]=c,n.push({from:e.from,to:e.from+l.length,insert:s}))}});return i.changes.empty||n(t.update(i,{userEvent:"indent"})),!0},e4=function(e){var t=e.state,n=e.dispatch;return!t.readOnly&&(n(t.update(e3(t,function(e,n){n.push({from:e.from,insert:t.facet(a.indentUnit)})}),{userEvent:"input.indent"})),!0)},e9=function(e){var t=e.state,n=e.dispatch;return!t.readOnly&&(n(t.update(e3(t,function(e,n){var r=/^\s*/.exec(e.text)[0];if(r){for(var i=(0,o.countColumn)(r,t.tabSize),c=0,l=(0,a.indentString)(t,Math.max(0,i-(0,a.getIndentUnit)(t)));c<r.length&&c<l.length&&r.charCodeAt(c)==l.charCodeAt(c);)c++;n.push({from:e.from+c,to:e.from+r.length,insert:l.slice(c)})}}),{userEvent:"delete.dedent"})),!0)};e.s(["copyLineDown",()=>e0,"copyLineUp",()=>eZ,"cursorCharBackward",()=>G,"cursorCharForward",()=>J,"cursorCharLeft",()=>U,"cursorCharRight",()=>z,"cursorDocEnd",()=>eB,"cursorDocStart",()=>eL,"cursorGroupLeft",()=>H,"cursorGroupRight",()=>j,"cursorLineBoundaryBackward",()=>eo,"cursorLineBoundaryForward",()=>er,"cursorLineDown",()=>X,"cursorLineEnd",()=>ea,"cursorLineStart",()=>ei,"cursorLineUp",()=>K,"cursorMatchingBracket",()=>ec,"cursorPageDown",()=>et,"cursorPageUp",()=>ee,"deleteCharBackward",()=>e_,"deleteCharForward",()=>eW,"deleteGroupBackward",()=>eU,"deleteGroupForward",()=>ez,"deleteLine",()=>e1,"deleteToLineEnd",()=>eJ,"deleteToLineStart",()=>eG,"history",()=>b,"historyField",()=>k,"indentLess",()=>e9,"indentMore",()=>e4,"indentSelection",()=>e5,"insertNewlineAndIndent",()=>e2,"invertedEffects",()=>x,"isolateHistory",()=>S,"lineComment",()=>f,"lineUncomment",()=>h,"moveLineDown",()=>eX,"moveLineUp",()=>eK,"redo",()=>A,"selectAll",()=>eT,"selectCharBackward",()=>ed,"selectCharForward",()=>eh,"selectCharLeft",()=>eu,"selectCharRight",()=>ef,"selectDocEnd",()=>eP,"selectDocStart",()=>eO,"selectGroupBackward",()=>ey,"selectGroupForward",()=>ep,"selectGroupLeft",()=>ev,"selectGroupRight",()=>eg,"selectLine",()=>eq,"selectLineBoundaryBackward",()=>eA,"selectLineBoundaryForward",()=>eE,"selectLineDown",()=>ew,"selectLineEnd",()=>eD,"selectLineStart",()=>eM,"selectLineUp",()=>ex,"selectPageDown",()=>eC,"selectPageUp",()=>eb,"simplifySelection",()=>eF,"splitLine",()=>e$,"toggleBlockComment",()=>d,"toggleComment",()=>l,"transposeChars",()=>eH,"undo",()=>E,"undoSelection",()=>M])},672199,e=>{"use strict";var t=e.i(399119),n=e.i(904851),r=e.i(90659),o=e.i(445789),i=e.i(530658),a=e.i(346715),c=e.i(119468),l=e.i(179302),s=e.i(753950),u=e.i(840838),f="function"==typeof String.prototype.normalize?function(e){return e.normalize("NFKD")}:function(e){return e},h=function(){function e(t,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length,a=arguments.length>4?arguments[4]:void 0,c=arguments.length>5?arguments[5]:void 0;(0,n._)(this,e),this.test=c,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=t.iterRange(o,i),this.bufferStart=o,this.normalize=a?function(e){return a(f(e))}:f,this.query=this.normalize(r)}return(0,r._)(e,[{key:"peek",value:function(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return -1;this.bufferPos=0,this.buffer=this.iter.value}return(0,s.codePointAt)(this.buffer,this.bufferPos)}},{key:"next",value:function(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}},{key:"nextOverlapping",value:function(){for(;;){var e=this.peek();if(e<0)return this.done=!0,this;var t=(0,s.fromCodePoint)(e),n=this.bufferStart+this.bufferPos;this.bufferPos+=(0,s.codePointSize)(e);for(var r=this.normalize(t),o=0,i=n;;o++){var a=r.charCodeAt(o),c=this.match(a,i,this.bufferPos+this.bufferStart);if(o==r.length-1){if(c)return this.value=c,this;break}i==n&&o<t.length&&t.charCodeAt(o)==a&&i++}}}},{key:"match",value:function(e,t,n){for(var r=null,o=0;o<this.matches.length;o+=2){var i=this.matches[o],a=!1;this.query.charCodeAt(i)==e&&(i==this.query.length-1?r={from:this.matches[o+1],to:n}:(this.matches[o]++,a=!0)),a||(this.matches.splice(o,2),o-=2)}return this.query.charCodeAt(0)==e&&(1==this.query.length?r={from:t,to:n}:this.matches.push(1,t)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferStart)&&(r=null),r}}]),e}();"undefined"!=typeof Symbol&&(h.prototype[Symbol.iterator]=function(){return this});var d={from:-1,to:-1,match:/.*/.exec("")},m="gm"+(null==/x/.unicode?"":"u"),v=function(){function e(t,r,o){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:t.length;if((0,n._)(this,e),this.text=t,this.to=a,this.curLine="",this.done=!1,this.value=d,/\\[sWDnr]|\n|\r|\[\^/.test(r))return new y(t,r,o,i,a);this.re=new RegExp(r,m+((null==o?void 0:o.ignoreCase)?"i":"")),this.test=null==o?void 0:o.test,this.iter=t.iter();var c=t.lineAt(i);this.curLineStart=c.from,this.matchPos=S(t,i),this.getLine(this.curLineStart)}return(0,r._)(e,[{key:"getLine",value:function(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}},{key:"nextLine",value:function(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}},{key:"next",value:function(){for(var e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;var t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){var n=this.curLineStart+t.index,r=n+t[0].length;if(this.matchPos=S(this.text,r+ +(n==r)),n==this.curLineStart+this.curLine.length&&this.nextLine(),(n<r||n>this.value.to)&&(!this.test||this.test(n,r,t)))return this.value={from:n,to:r,match:t},this;e=this.matchPos-this.curLineStart}else{if(!(this.curLineStart+this.curLine.length<this.to))return this.done=!0,this;this.nextLine(),e=0}}}}]),e}(),g=new WeakMap,p=function(){function e(t,r){(0,n._)(this,e),this.from=t,this.text=r}return(0,r._)(e,[{key:"to",get:function(){return this.from+this.text.length}}],[{key:"get",value:function(t,n,r){var o=g.get(t);if(!o||o.from>=r||o.to<=n){var i=new e(n,t.sliceString(n,r));return g.set(t,i),i}if(o.from==n&&o.to==r)return o;var a=o.text,c=o.from;return c>n&&(a=t.sliceString(n,c)+a,c=n),o.to<r&&(a+=t.sliceString(o.to,r)),g.set(t,new e(c,a)),new e(n,a.slice(n-c,r-c))}}]),e}(),y=function(){function e(t,r,o,i,a){(0,n._)(this,e),this.text=t,this.to=a,this.done=!1,this.value=d,this.matchPos=S(t,i),this.re=new RegExp(r,m+((null==o?void 0:o.ignoreCase)?"i":"")),this.test=null==o?void 0:o.test,this.flat=p.get(t,i,this.chunkEnd(i+5e3))}return(0,r._)(e,[{key:"chunkEnd",value:function(e){return e>=this.to?this.to:this.text.lineAt(e).to}},{key:"next",value:function(){for(;;){var e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){var n=this.flat.from+t.index,r=n+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(n,r,t)))return this.value={from:n,to:r,match:t},this.matchPos=S(this.text,r+ +(n==r)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=p.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+2*this.flat.text.length))}}}]),e}();function S(e,t){if(t>=e.length)return t;for(var n,r=e.lineAt(t);t<r.to&&(n=r.text.charCodeAt(t-r.from))>=56320&&n<57344;)t++;return t}function x(e){var t=String(e.state.doc.lineAt(e.state.selection.main.head).number),n=(0,u.default)("input",{class:"cm-textfield",name:"line",value:t});function r(){var t=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(t){var r=e.state,o=r.doc.lineAt(r.selection.main.head),a=(0,i._)(t,5),c=a[1],u=a[2],f=a[3],h=a[4],d=f?+f.slice(1):0,m=u?+u:o.number;if(u&&h){var v=m/100;c&&(v=v*("-"==c?-1:1)+o.number/r.doc.lines),m=Math.round(r.doc.lines*v)}else u&&c&&(m=m*("-"==c?-1:1)+o.number);var g=r.doc.line(Math.max(1,Math.min(r.doc.lines,m))),p=s.EditorSelection.cursor(g.from+Math.max(0,Math.min(d,g.length)));e.dispatch({effects:[w.of(!1),l.EditorView.scrollIntoView(p.from,{y:"center"})],selection:p}),e.focus()}}return{dom:(0,u.default)("form",{class:"cm-gotoLine",onkeydown:function(t){27==t.keyCode?(t.preventDefault(),e.dispatch({effects:w.of(!1)}),e.focus()):13==t.keyCode&&(t.preventDefault(),r())},onsubmit:function(e){e.preventDefault(),r()}},(0,u.default)("label",e.state.phrase("Go to line"),": ",n)," ",(0,u.default)("button",{class:"cm-button",type:"submit"},e.state.phrase("go")))}}"undefined"!=typeof Symbol&&(v.prototype[Symbol.iterator]=y.prototype[Symbol.iterator]=function(){return this});var w=s.StateEffect.define(),k=s.StateField.define({create:function(){return!0},update:function(e,t){var n=!0,r=!1,o=void 0;try{for(var i,a=t.effects[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var c=i.value;c.is(w)&&(e=c.value)}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return e},provide:function(e){return l.showPanel.from(e,function(e){return e?x:null})}}),b=function(e){var t=(0,l.getPanel)(e,x);if(!t){var n=[w.of(!0)];null==e.state.field(k,!1)&&n.push(s.StateEffect.appendConfig.of([k,C])),e.dispatch({effects:n}),t=(0,l.getPanel)(e,x)}return t&&t.dom.querySelector("input").select(),!0},C=l.EditorView.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),E={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},A=s.Facet.define({combine:function(e){return(0,s.combineConfig)(e,E,{highlightWordAroundCursor:function(e,t){return e||t},minSelectionLength:Math.min,maxMatches:Math.min})}});function M(e){var t=[P,O];return e&&t.push(A.of(e)),t}var D=l.Decoration.mark({class:"cm-selectionMatch"}),L=l.Decoration.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function B(e,t,n,r){return(0==n||e(t.sliceDoc(n-1,n))!=s.CharCategory.Word)&&(r==t.doc.length||e(t.sliceDoc(r,r+1))!=s.CharCategory.Word)}var O=l.ViewPlugin.fromClass(function(){function e(t){(0,n._)(this,e),this.decorations=this.getDeco(t)}return(0,r._)(e,[{key:"update",value:function(e){(e.selectionSet||e.docChanged||e.viewportChanged)&&(this.decorations=this.getDeco(e.view))}},{key:"getDeco",value:function(e){var t=e.state.facet(A),n=e.state,r=n.selection;if(r.ranges.length>1)return l.Decoration.none;var o,i=r.main,a=null;if(i.empty){if(!t.highlightWordAroundCursor)return l.Decoration.none;var c=n.wordAt(i.head);if(!c)return l.Decoration.none;a=n.charCategorizer(i.head),o=n.sliceDoc(c.from,c.to)}else{var u,f,d,m=i.to-i.from;if(m<t.minSelectionLength||m>200)return l.Decoration.none;if(t.wholeWords){if(o=n.sliceDoc(i.from,i.to),!(B(a=n.charCategorizer(i.head),n,i.from,i.to)&&(u=a,f=i.from,d=i.to,u(n.sliceDoc(f,f+1))==s.CharCategory.Word&&u(n.sliceDoc(d-1,d))==s.CharCategory.Word)))return l.Decoration.none}else if(!(o=n.sliceDoc(i.from,i.to)))return l.Decoration.none}var v=[],g=!0,p=!1,y=void 0;try{for(var S,x=e.visibleRanges[Symbol.iterator]();!(g=(S=x.next()).done);g=!0)for(var w=S.value,k=new h(n.doc,o,w.from,w.to);!k.next().done;){var b=k.value,C=b.from,E=b.to;if((!a||B(a,n,C,E))&&(i.empty&&C<=i.from&&E>=i.to?v.push(L.range(C,E)):(C>=i.to||E<=i.from)&&v.push(D.range(C,E)),v.length>t.maxMatches))return l.Decoration.none}}catch(e){p=!0,y=e}finally{try{g||null==x.return||x.return()}finally{if(p)throw y}}return l.Decoration.set(v)}}]),e}(),{decorations:function(e){return e.decorations}}),P=l.EditorView.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),T=function(e){var t=e.state,n=e.dispatch,r=t.selection,o=s.EditorSelection.create(r.ranges.map(function(e){return t.wordAt(e.head)||s.EditorSelection.cursor(e.head)}),r.mainIndex);return!o.eq(r)&&(n(t.update({selection:o})),!0)},q=function(e){var t=e.state,n=e.dispatch,r=t.selection.ranges;if(r.some(function(e){return e.from===e.to}))return T({state:t,dispatch:n});var o=t.sliceDoc(r[0].from,r[0].to);if(t.selection.ranges.some(function(e){return t.sliceDoc(e.from,e.to)!=o}))return!1;var i=function(e,t){for(var n=function(n,r){if(r.next(),r.done){if(n)return s=n,u=r,{v:null};r=new h(e.doc,t,0,Math.max(0,i[i.length-1].from-1)),n=!0}else{if(n&&i.some(function(e){return e.from==r.value.from}))return s=n,u=r,"continue";if(l){var o=e.wordAt(r.value.from);if(!o||o.from!=r.value.from||o.to!=r.value.to)return s=n,u=r,"continue"}return s=n,u=r,{v:r.value}}s=n,u=r},r=e.selection,o=r.main,i=r.ranges,a=e.wordAt(o.head),l=a&&a.from==o.from&&a.to==o.to,s=!1,u=new h(e.doc,t,i[i.length-1].to);;){var f=n(s,u);if("object"===(0,c._)(f))return f.v}}(t,o);return!!i&&(n(t.update({selection:t.selection.addRange(s.EditorSelection.range(i.from,i.to),!1),effects:l.EditorView.scrollIntoView(i.to)})),!0)},F=s.Facet.define({combine:function(e){return(0,s.combineConfig)(e,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:function(e){return new ed(e)},scrollToMatch:function(e){return l.EditorView.scrollIntoView(e)}})}});function R(e){return e?[F.of(e),ey]:ey}var I=function(){function e(t){(0,n._)(this,e),this.search=t.search,this.caseSensitive=!!t.caseSensitive,this.literal=!!t.literal,this.regexp=!!t.regexp,this.replace=t.replace||"",this.valid=!!this.search&&(!this.regexp||function(e){try{return new RegExp(e,m),!0}catch(e){return!1}}(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!t.wholeWord}return(0,r._)(e,[{key:"unquote",value:function(e){return this.literal?e:e.replace(/\\([nrt\\])/g,function(e,t){return"n"==t?"\n":"r"==t?"\r":"t"==t?"	":"\\"})}},{key:"eq",value:function(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}},{key:"create",value:function(){return this.regexp?new J(this):new W(this)}},{key:"getCursor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=e.doc?e:s.EditorState.create({doc:e});return null==n&&(n=r.doc.length),this.regexp?N(this,r,t,n):_(this,r,t,n)}}]),e}(),V=function e(t){(0,n._)(this,e),this.spec=t};function _(e,t,n,r){var o,i;return new h(t.doc,e.unquoted,n,r,e.caseSensitive?void 0:function(e){return e.toLowerCase()},e.wholeWord?(o=t.doc,i=t.charCategorizer(t.selection.main.head),function(e,t,n,r){return(r>e||r+n.length<t)&&(r=Math.max(0,e-2),n=o.sliceString(r,Math.min(o.length,t+2))),(i(U(n,e-r))!=s.CharCategory.Word||i(z(n,e-r))!=s.CharCategory.Word)&&(i(z(n,t-r))!=s.CharCategory.Word||i(U(n,t-r))!=s.CharCategory.Word)}):void 0)}var W=function(e){function i(e){return(0,n._)(this,i),(0,t._)(this,i,[e])}return(0,o._)(i,e),(0,r._)(i,[{key:"nextMatch",value:function(e,t,n){var r=_(this.spec,e,n,e.doc.length).nextOverlapping();return r.done&&(r=_(this.spec,e,0,t).nextOverlapping()),r.done?null:r.value}},{key:"prevMatchInRange",value:function(e,t,n){for(var r=n;;){for(var o=Math.max(t,r-1e4-this.spec.unquoted.length),i=_(this.spec,e,o,r),a=null;!i.nextOverlapping().done;)a=i.value;if(a)return a;if(o==t)return null;r-=1e4}}},{key:"prevMatch",value:function(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.doc.length)}},{key:"getReplacement",value:function(e){return this.spec.unquote(this.spec.replace)}},{key:"matchAll",value:function(e,t){for(var n=_(this.spec,e,0,e.doc.length),r=[];!n.next().done;){if(r.length>=t)return null;r.push(n.value)}return r}},{key:"highlight",value:function(e,t,n,r){for(var o=_(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(n+this.spec.unquoted.length,e.doc.length));!o.next().done;)r(o.value.from,o.value.to)}}]),i}(V);function N(e,t,n,r){var o;return new v(t.doc,e.search,{ignoreCase:!e.caseSensitive,test:e.wholeWord?(o=t.charCategorizer(t.selection.main.head),function(e,t,n){return!n[0].length||(o(U(n.input,n.index))!=s.CharCategory.Word||o(z(n.input,n.index))!=s.CharCategory.Word)&&(o(z(n.input,n.index+n[0].length))!=s.CharCategory.Word||o(U(n.input,n.index+n[0].length))!=s.CharCategory.Word)}):void 0},n,r)}function U(e,t){return e.slice((0,s.findClusterBreak)(e,t,!1),t)}function z(e,t){return e.slice(t,(0,s.findClusterBreak)(e,t))}var J=function(e){function i(){return(0,n._)(this,i),(0,t._)(this,i,arguments)}return(0,o._)(i,e),(0,r._)(i,[{key:"nextMatch",value:function(e,t,n){var r=N(this.spec,e,n,e.doc.length).next();return r.done&&(r=N(this.spec,e,0,t).next()),r.done?null:r.value}},{key:"prevMatchInRange",value:function(e,t,n){for(var r=1;;r++){for(var o=Math.max(t,n-1e4*r),i=N(this.spec,e,o,n),a=null;!i.next().done;)a=i.value;if(a&&(o==t||a.from>o+10))return a;if(o==t)return null}}},{key:"prevMatch",value:function(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.doc.length)}},{key:"getReplacement",value:function(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,function(t,n){return"$"==n?"$":"&"==n?e.match[0]:"0"!=n&&+n<e.match.length?e.match[n]:t})}},{key:"matchAll",value:function(e,t){for(var n=N(this.spec,e,0,e.doc.length),r=[];!n.next().done;){if(r.length>=t)return null;r.push(n.value)}return r}},{key:"highlight",value:function(e,t,n,r){for(var o=N(this.spec,e,Math.max(0,t-250),Math.min(n+250,e.doc.length));!o.next().done;)r(o.value.from,o.value.to)}}]),i}(V),G=s.StateEffect.define(),$=s.StateEffect.define(),H=s.StateField.define({create:function(e){return new K(el(e).create(),null)},update:function(e,t){var n=!0,r=!1,o=void 0;try{for(var i,a=t.effects[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var c=i.value;c.is(G)?e=new K(c.value.create(),e.panel):c.is($)&&(e=new K(e.query,c.value?ec:null))}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return e},provide:function(e){return l.showPanel.from(e,function(e){return e.panel})}});function j(e){var t=e.field(H,!1);return t?t.query.spec:el(e)}function Q(e){var t;return(null==(t=e.field(H,!1))?void 0:t.panel)!=null}var K=function e(t,r){(0,n._)(this,e),this.query=t,this.panel=r},X=l.Decoration.mark({class:"cm-searchMatch"}),Y=l.Decoration.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Z=l.ViewPlugin.fromClass(function(){function e(t){(0,n._)(this,e),this.view=t,this.decorations=this.highlight(t.state.field(H))}return(0,r._)(e,[{key:"update",value:function(e){var t=e.state.field(H);(t!=e.startState.field(H)||e.docChanged||e.selectionSet||e.viewportChanged)&&(this.decorations=this.highlight(t))}},{key:"highlight",value:function(e){var t=e.query;if(!e.panel||!t.spec.valid)return l.Decoration.none;for(var n=this.view,r=new s.RangeSetBuilder,o=0,i=n.visibleRanges,a=i.length;o<a;o++){for(var c=i[o],u=c.from,f=c.to;o<a-1&&f>i[o+1].from-500;)f=i[++o].to;t.highlight(n.state,u,f,function(e,t){var o=n.state.selection.ranges.some(function(n){return n.from==e&&n.to==t});r.add(e,t,o?Y:X)})}return r.finish()}}]),e}(),{decorations:function(e){return e.decorations}});function ee(e){return function(t){var n=t.state.field(H,!1);return n&&n.query.spec.valid?e(t,n):ef(t)}}var et=ee(function(e,t){var n=t.query,r=e.state.selection.main.to,o=n.nextMatch(e.state,r,r);if(!o)return!1;var i=s.EditorSelection.single(o.from,o.to),a=e.state.facet(F);return e.dispatch({selection:i,effects:[eg(e,o),a.scrollToMatch(i.main,e)],userEvent:"select.search"}),eu(e),!0}),en=ee(function(e,t){var n=t.query,r=e.state,o=r.selection.main.from,i=n.prevMatch(r,o,o);if(!i)return!1;var a=s.EditorSelection.single(i.from,i.to),c=e.state.facet(F);return e.dispatch({selection:a,effects:[eg(e,i),c.scrollToMatch(a.main,e)],userEvent:"select.search"}),eu(e),!0}),er=ee(function(e,t){var n=t.query.matchAll(e.state,1e3);return!!n&&!!n.length&&(e.dispatch({selection:s.EditorSelection.create(n.map(function(e){return s.EditorSelection.range(e.from,e.to)})),userEvent:"select.search.matches"}),!0)}),eo=function(e){var t=e.state,n=e.dispatch,r=t.selection;if(r.ranges.length>1||r.main.empty)return!1;for(var o=r.main,i=o.from,a=o.to,c=[],l=0,u=new h(t.doc,t.sliceDoc(i,a));!u.next().done;){if(c.length>1e3)return!1;u.value.from==i&&(l=c.length),c.push(s.EditorSelection.range(u.value.from,u.value.to))}return n(t.update({selection:s.EditorSelection.create(c,l),userEvent:"select.search.matches"})),!0},ei=ee(function(e,t){var n=t.query,r=e.state,o=r.selection.main,i=o.from,a=o.to;if(r.readOnly)return!1;var c=n.nextMatch(r,i,i);if(!c)return!1;var u,f,h=[],d=[];if(c.from==i&&c.to==a&&(f=r.toText(n.getReplacement(c)),h.push({from:c.from,to:c.to,insert:f}),c=n.nextMatch(r,c.from,c.to),d.push(l.EditorView.announce.of(r.phrase("replaced match on line $",r.doc.lineAt(i).number)+"."))),c){var m=0==h.length||h[0].from>=c.to?0:c.to-c.from-f.length;u=s.EditorSelection.single(c.from-m,c.to-m),d.push(eg(e,c)),d.push(r.facet(F).scrollToMatch(u.main,e))}return e.dispatch({changes:h,selection:u,effects:d,userEvent:"input.replace"}),!0}),ea=ee(function(e,t){var n=t.query;if(e.state.readOnly)return!1;var r=n.matchAll(e.state,1e9).map(function(e){return{from:e.from,to:e.to,insert:n.getReplacement(e)}});if(!r.length)return!1;var o=e.state.phrase("replaced $ matches",r.length)+".";return e.dispatch({changes:r,effects:l.EditorView.announce.of(o),userEvent:"input.replace.all"}),!0});function ec(e){return e.state.facet(F).createPanel(e)}function el(e,t){var n,r,o,i,a,c=e.selection.main,l=c.empty||c.to>c.from+100?"":e.sliceDoc(c.from,c.to);if(t&&!l)return t;var s=e.facet(F);return new I({search:(null!=(n=null==t?void 0:t.literal)?n:s.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:null!=(r=null==t?void 0:t.caseSensitive)?r:s.caseSensitive,literal:null!=(o=null==t?void 0:t.literal)?o:s.literal,regexp:null!=(i=null==t?void 0:t.regexp)?i:s.regexp,wholeWord:null!=(a=null==t?void 0:t.wholeWord)?a:s.wholeWord})}function es(e){var t=(0,l.getPanel)(e,ec);return t&&t.dom.querySelector("[main-field]")}function eu(e){var t=es(e);t&&t==e.root.activeElement&&t.select()}var ef=function(e){var t=e.state.field(H,!1);if(t&&t.panel){var n=es(e);if(n&&n!=e.root.activeElement){var r=el(e.state,t.query.spec);r.valid&&e.dispatch({effects:G.of(r)}),n.focus(),n.select()}}else e.dispatch({effects:[$.of(!0),t?G.of(el(e.state,t.query.spec)):s.StateEffect.appendConfig.of(ey)]});return!0},eh=function(e){var t=e.state.field(H,!1);if(!t||!t.panel)return!1;var n=(0,l.getPanel)(e,ec);return n&&n.dom.contains(e.root.activeElement)&&e.focus(),e.dispatch({effects:$.of(!1)}),!0},ed=function(){function e(t){var r=this;(0,n._)(this,e);var o=function(e,t,n){return(0,u.default)("button",{class:"cm-button",name:e,onclick:t,type:"button"},n)};this.view=t;var i=this.query=t.state.field(H).query.spec;this.commit=this.commit.bind(this),this.searchField=(0,u.default)("input",{value:i.search,placeholder:em(t,"Find"),"aria-label":em(t,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=(0,u.default)("input",{value:i.replace,placeholder:em(t,"Replace"),"aria-label":em(t,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=(0,u.default)("input",{type:"checkbox",name:"case",form:"",checked:i.caseSensitive,onchange:this.commit}),this.reField=(0,u.default)("input",{type:"checkbox",name:"re",form:"",checked:i.regexp,onchange:this.commit}),this.wordField=(0,u.default)("input",{type:"checkbox",name:"word",form:"",checked:i.wholeWord,onchange:this.commit}),this.dom=(0,u.default)("div",{onkeydown:function(e){return r.keydown(e)},class:"cm-search"},[this.searchField,o("next",function(){return et(t)},[em(t,"next")]),o("prev",function(){return en(t)},[em(t,"previous")]),o("select",function(){return er(t)},[em(t,"all")]),(0,u.default)("label",null,[this.caseField,em(t,"match case")]),(0,u.default)("label",null,[this.reField,em(t,"regexp")]),(0,u.default)("label",null,[this.wordField,em(t,"by word")])].concat((0,a._)(t.state.readOnly?[]:[(0,u.default)("br"),this.replaceField,o("replace",function(){return ei(t)},[em(t,"replace")]),o("replaceAll",function(){return ea(t)},[em(t,"replace all")])]),[(0,u.default)("button",{name:"close",onclick:function(){return eh(t)},"aria-label":em(t,"close"),type:"button"},["Ã—"])]))}return(0,r._)(e,[{key:"commit",value:function(){var e=new I({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:G.of(e)}))}},{key:"keydown",value:function(e){(0,l.runScopeHandlers)(this.view,e,"search-panel")?e.preventDefault():13==e.keyCode&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?en:et)(this.view)):13==e.keyCode&&e.target==this.replaceField&&(e.preventDefault(),ei(this.view))}},{key:"update",value:function(e){var t=!0,n=!1,r=void 0,o=!0,i=!1,a=void 0;try{for(var c,l=e.transactions[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var s=c.value;try{for(var u,f=s.effects[Symbol.iterator]();!(t=(u=f.next()).done);t=!0){var h=u.value;h.is(G)&&!h.value.eq(this.query)&&this.setQuery(h.value)}}catch(e){n=!0,r=e}finally{try{t||null==f.return||f.return()}finally{if(n)throw r}}}}catch(e){i=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}}},{key:"setQuery",value:function(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}},{key:"mount",value:function(){this.searchField.select()}},{key:"pos",get:function(){return 80}},{key:"top",get:function(){return this.view.state.facet(F).top}}]),e}();function em(e,t){return e.state.phrase(t)}var ev=/[\s\.,:;?!]/;function eg(e,t){var n=t.from,r=t.to,o=e.state.doc.lineAt(n),i=e.state.doc.lineAt(r).to,a=Math.max(o.from,n-30),c=Math.min(i,r+30),s=e.state.sliceDoc(a,c);if(a!=o.from){for(var u=0;u<30;u++)if(!ev.test(s[u+1])&&ev.test(s[u])){s=s.slice(u);break}}if(c!=i){for(var f=s.length-1;f>s.length-30;f--)if(!ev.test(s[f-1])&&ev.test(s[f])){s=s.slice(0,f);break}}return l.EditorView.announce.of("".concat(e.state.phrase("current match"),". ").concat(s," ").concat(e.state.phrase("on line")," ").concat(o.number,"."))}var ep=l.EditorView.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),ey=[H,s.Prec.low(Z),ep];e.s(["RegExpCursor",()=>v,"SearchQuery",()=>I,"closeSearchPanel",()=>eh,"findNext",()=>et,"findPrevious",()=>en,"getSearchQuery",()=>j,"gotoLine",()=>b,"highlightSelectionMatches",()=>M,"openSearchPanel",()=>ef,"replaceAll",()=>ea,"replaceNext",()=>ei,"search",()=>R,"searchPanelOpen",()=>Q,"selectMatches",()=>er,"selectNextOccurrence",()=>q,"selectSelectionMatches",()=>eo,"setSearchQuery",()=>G])}]);

//# debugId=6ebc8df3-fdf3-24cc-f24c-1cbb3d194ab0
//# sourceMappingURL=9d5f03f19d20e318.js.map