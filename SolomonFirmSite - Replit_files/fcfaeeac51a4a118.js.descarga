;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="e7bc7048-ce96-2fd4-48f7-7350da45bf1a")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,957296,e=>{"use strict";var r,n,t,i,l,o=e.i(721281),s=e.i(276385),a=e.i(399528),d=e.i(781230),c=e.i(709485),u=e.i(566949),p=e.i(968783),m=e.i(858248),f=e.i(532130),h=e.i(87092),x=e.i(878420),g=e.i(64386),v=e.i(530658),j=e.i(346715),y=e.i(389959),b=e.i(833579),w=e.i(222342),k=e.i(412160),R=e.i(766205),_=e.i(967629),D=e.i(480028),C=e.i(341577),I=(0,_.css)({".icon":{color:D.tokens.foregroundDimmest,padding:"0 8px"},"&":{minHeight:"64px",display:"grid",gridColumnGap:"20px",gridTemplateColumns:"40px auto",alignItems:"center",marginBottom:D.tokens.space24,padding:D.tokens.space8,borderRadius:D.tokens.borderRadius8,color:D.tokens.foregroundDimmer,fontSize:D.tokens.fontSizeSubheadDefault,textDecoration:"none",border:"1px solid transparent"},"a:hover":{backgroundColor:D.tokens.backgroundDefault},"a:active":{backgroundColor:D.tokens.backgroundHigher,borderColor:D.tokens.accentPrimaryDefault}});let M=function(e){var r=e.pathnames;return(0,s.jsxs)(k.default,(0,g._)((0,x._)({},(0,R.folderLinkProps)({pathnames:r})),{css:I,children:[(0,s.jsx)("div",{className:"icon",children:(0,s.jsx)(C.default,{size:24,css:{transform:"scaleX(-1)"}})}),(0,s.jsx)("div",{children:"(up 1 level)"})]}))};var S=e.i(945821),F=e.i(822243),T=((r={}).Repl="REPL",r.Folder="FOLDER",r),E=(0,_.css)({"header, .sidebar-layout-header":{pointerEvents:"none"}});let A=function(e){var r=e.folder,n=e.onMove,t=e.children,i=(0,v._)((0,F.useDrag)({type:T.Folder,item:function(){return{id:r.id,type:T.Folder}},collect:function(e){return{isDragging:e.isDragging()}},end:function(e,t){if(t.didDrop()){var i=t.getDropResult();i&&i.id!==r.id&&n({to:i,folder:r})}}}),2),l=i[0].isDragging,o=i[1];return(0,s.jsxs)("div",{ref:o,style:{opacity:l?.5:1},children:[l?(0,s.jsx)(_.Global,{styles:[E]}):null,t]})};var P=(0,_.css)({"header, .sidebar-layout-header":{pointerEvents:"none"}});let V=function(e){var r=e.repl,n=e.onMove,t=e.children,i=(0,v._)((0,F.useDrag)({type:T.Repl,item:function(){return{id:r.id,type:T.Repl}},collect:function(e){return{isDragging:e.isDragging()}},end:function(e,t){if(t.didDrop()){var i=t.getDropResult();i&&n({to:i,repl:r})}}}),2),l=i[0].isDragging,o=i[1];return(0,s.jsxs)("div",{ref:o,style:{opacity:l?.5:1},children:[l?(0,s.jsx)(_.Global,{styles:[P]}):null,t]})};var B=e.i(848415),L=(0,_.css)({".is-active":{outline:"2px solid ".concat(D.tokens.accentPrimaryDefault)}});let O=function(e){var r=e.folder,n=e.children,t=(0,v._)((0,B.useDrop)({accept:[T.Folder,T.Repl],drop:function(){return r},collect:function(e){var n=e.getItem()||!1;return{isActive:e.isOver()&&e.canDrop()&&n&&n.id!==r.id}}}),2),i=t[0].isActive,l=t[1];return(0,s.jsx)("div",{ref:l,clsx:[{"is-active":i}],css:L,children:n})};var N=e.i(368964),U=e.i(569384),z=e.i(973245),W=e.i(951262);function H(){var e=(0,U._)(["\n  mutation ReplsDashboardFolderItemUpdate($folderId: String!, $name: String!) {\n    updateReplFolder(folderId: $folderId, name: $name) {\n      id\n      name\n      pathnames\n    }\n  }\n"]);return H=function(){return e},e}var q={},Q=(0,z.gql)(H()),$=e.i(490931),G=e.i(446530),X=e.i(613355),K=e.i(428596),Y=e.i(140487),J=e.i(607278),Z=e.i(960178),ee=e.i(625484),er=e.i(940745),en=e.i(703505),et=ee.SpecializedView.form,ei=(0,G.cssRecord)({root:[X.rcss.colWithGap(24)]});function el(e){var r=e.folder,n=e.onDelete,t=e.onCancel,i=(0,K.useIdSeed)()("confirmInput"),l=(0,v._)((0,y.useState)(""),2),o=l[0],a=l[1],d=(0,w.default)(),c=d.showConfirm,u=d.showError,p=(0,v._)((0,$.useDeleteFolderDialogDeleteFolderMutation)({variables:{folderId:r.id},onCompleted:function(){c("Folder deleted"),n()},onError:function(e){u(e.message)}}),2),m=p[0],f=p[1].loading,h=r.pathnames.slice(1).join("/"),x=f||o!==h;return(0,s.jsxs)(et,{css:ei.root,onSubmit:function(e){e.preventDefault(),x||m()},children:[(0,s.jsx)(Z.Header,{variant:"headerDefault",level:2,children:"Delete folder"}),(0,s.jsxs)(ee.View,{gap:24,children:[(0,s.jsx)(Z.Text,{children:"Are you sure you want to delete this folder? This will remove all Apps and folders within. This cannot be undone."}),(0,s.jsxs)(ee.View,{gap:4,children:[(0,s.jsx)("label",{htmlFor:i,children:(0,s.jsxs)(Z.Text,{color:"dimmer",variant:"small",children:["Type the folder path (",h,") to delete"]})}),(0,s.jsx)(J.Input,{id:i,disabled:f,autoFocus:!0,value:o,onChange:function(e){return a(e.currentTarget.value)}})]}),(0,s.jsxs)(ee.View,{row:!0,gap:12,justify:"end",children:[(0,s.jsx)(Y.Button,{type:"button",onClick:t,text:"Cancel"}),(0,s.jsx)(Y.Button,{type:"submit",disabled:x,iconLeft:f?(0,s.jsx)(er.default,{}):(0,s.jsx)(en.default,{}),colorway:"negative",text:"Yes, delete this folder"})]})]})]})}var eo=e.i(47503),es=e.i(136540),ea=e.i(601059),ed=e.i(739521),ec=e.i(185591),eu=e.i(972777),ep=e.i(559482),em=e.i(759905),ef=e.i(283023),eh=e.i(841691),ex=e.i(243074),eg=e.i(196353),ev=e.i(592877),ej=e.i(14868),ey=(0,_.css)([{"&&:hover button":[X.rcss.backgroundColor.backgroundHigher]}]);function eb(e){var r,n=e.repl,t=e.editRepl,i=e.deleteRepl,l=e.forkRepl,o=e.moveItem,a=e.removeMultiplayerRepl,d=e.selectRepl,c=(0,v._)((0,y.useState)(!1),2),u=c[0],p=c[1],m=(0,eo.useCurrentUserId)(),f=n.authorizations,h=!n.org||"Org"!==n.org.__typename,g=(null==(r=n.owner)?void 0:r.id)===m,j=[];return f.editMetadata.isAuthorized&&j.push({label:"Edit",id:"edit",icon:(0,s.jsx)(ef.default,{})}),j.push((0,x._)({label:"Cover page",id:"coverpage",icon:(0,s.jsx)(eh.default,{})},(0,ec.replViewLinkProps)(n))),f.fork.isAuthorized&&j.push({label:"Remix",id:"fork",icon:(0,s.jsx)(ev.default,{})}),h&&g&&j.push({label:"Transfer To Organization",id:"transferToOrg",icon:(0,s.jsx)(ej.default,{})}),f.editFolder.isAuthorized&&j.push({label:"Move",id:"move",icon:(0,s.jsx)(ex.default,{})}),d&&j.push({label:"Select",id:"select",icon:(0,s.jsx)(ep.default,{})}),f.deleteRepl.isAuthorized&&j.push({label:"Delete",id:"delete",isDestructive:!0,icon:(0,s.jsx)(en.default,{})}),f.removeSelf.isAuthorized&&j.push({label:"Remove",id:"remove",isDestructive:!0,icon:(0,s.jsx)(em.default,{})}),(0,s.jsxs)(ee.View,{css:ey,children:[(0,s.jsx)(ea.PopupMenu,{placement:"bottom right",trigger:(0,s.jsx)(es.IconButton,{tooltipBehavior:"hidden",size:24,alt:"App Actions",children:(0,s.jsx)(eg.default,{})}),elevated:!0,"aria-label":"App Actions",onAction:function(e){switch(e){case"edit":t();break;case"coverpage":break;case"fork":l();break;case"transferToOrg":p(!0);break;case"move":o();break;case"remove":a();break;case"select":null==d||d();break;case"delete":i()}},children:j.map(function(e){return(0,s.jsx)(ea.MenuItem,{id:e.id,label:e.label,icon:e.icon,isDestructive:e.isDestructive,href:e.href,as:e.as,shallow:e.shallow},e.id)})}),(0,s.jsx)(ed.Modal,{isOpen:u,onRequestClose:function(){return p(!1)},children:(0,s.jsx)(eu.TransferReplToOrgDialog,{repl:n,onDone:function(){return p(!1)}})})]})}function ew(e){var r=e.renameFolder,n=e.moveItem,t=e.deleteFolder,i=[{id:"rename",label:"Rename",icon:(0,s.jsx)(ef.default,{})},{id:"move",label:"Move",icon:(0,s.jsx)(ex.default,{})},{id:"delete",label:"Delete",isDestructive:!0,icon:(0,s.jsx)(en.default,{})}];return(0,s.jsx)(ee.View,{css:ey,children:(0,s.jsx)(ea.PopupMenu,{trigger:(0,s.jsx)(es.IconButton,{tooltipBehavior:"hidden",size:24,alt:"App Actions",children:(0,s.jsx)(eg.default,{})}),elevated:!0,"aria-label":"Folder Actions",onAction:function(e){switch(e){case"rename":r();break;case"move":n();break;case"delete":t()}},children:i.map(function(e){return(0,s.jsx)(ea.MenuItem,{id:e.id,label:e.label,icon:e.icon,isDestructive:e.isDestructive},e.id)})})})}var ek=e.i(297083),eR=e.i(817556),e_=e.i(304277);function eD(){var e=(0,U._)(["\n  fragment ReplsDashboardMoveItemReplFolder on ReplFolder {\n    id\n    pathnames\n    folderType\n    name\n    parentId\n    timeCreated\n  }\n"]);return eD=function(){return e},e}function eC(){var e=(0,U._)(["\n  query ReplsDashboardMoveItemModalFolder($id: String!, $teamId: Int) {\n    currentUser {\n      id\n      replFolder(id: $id, teamId: $teamId) {\n        id\n        folders {\n          id\n          ...ReplsDashboardMoveItemReplFolder\n        }\n      }\n    }\n  }\n  ","\n"]);return eC=function(){return e},e}e.i(566901);var eI={},eM=(0,z.gql)(eD()),eS=(0,z.gql)(eC(),eM),eF=e.i(46654),eT=e.i(644826),eE={__typename:"ReplFolder",id:"__ROOT_ID__",name:"(home)/",pathnames:["(home)/"],canEdit:!1,timeCreated:null},eA=(0,G.cssRecord)({folderPicker:[X.rcss.height(250),X.rcss.overflow("auto"),X.rcss.borderRadius(4),X.rcss.border({color:D.tokens.outlineDimmest})]}),eP=(0,_.css)({"&":{height:"40px",display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0 10px"},"&:hover":{cursor:"pointer",backgroundColor:D.tokens.backgroundRoot},".small-folder-icon-container":{height:"20px",width:"20px",display:"flex",justifyContent:"center",alignItems:"center"},".small-back-folder-icon":{transform:"rotate(90deg)",width:"17px"},".small-folder-icon":{width:"20px"},".small-folder-title":{display:"flex",alignItems:"center"},".small-folder-title a":{marginLeft:"20px",borderBottom:"none",color:"inherit"},".small-folder-time":{fontSize:"12px",color:D.tokens.foregroundDimmer},"&.is-selected:hover,.is-selected":{backgroundColor:D.tokens.accentPrimaryDefault,color:D.tokens.backgroundHigher},".is-selected .small-folder-time":{color:"inherit"}}),eV=function(e){var r=e.folder,n=e.onSelect,t=e.onNavigate,i=e.isSelected,l=e.isBack;return(0,s.jsxs)("div",{clsx:[{"is-selected":i}],onClick:function(){n&&n(r)},css:eP,children:[(0,s.jsxs)("div",{className:"small-folder-title",children:[(0,s.jsx)("div",{className:"small-folder-icon-container",children:void 0!==l&&l?(0,s.jsx)("div",{className:"small-back-folder-icon",children:(0,s.jsx)(eT.default,{})}):(0,s.jsx)("div",{className:"small-folder-icon",children:(0,s.jsx)(ex.default,{})})}),(0,s.jsx)("a",{onClick:function(e){return t?t(r,e):function(){}},children:r.name})]}),(0,s.jsx)("div",{className:"small-folder-time",children:r.timeCreated?(0,eF.ago)(r.timeCreated):""})]})};let eB=function(e){var r,n,t,i,l=e.item,o=e.isRepl,d=e.teamId,c=e.hideModal,u=/\/@([^/]*)/.exec(a.default.asPath||""),p=u?u[1]:null,m=d&&p?{__typename:"ReplFolder",id:"__TEAM__".concat(d,"__"),name:"@".concat(p),pathnames:["@".concat(p)],canEdit:!1,timeCreated:null}:eE,f=(0,v._)((0,y.useState)(null),2),h=f[0],j=f[1],b=(0,v._)((0,y.useState)(m),2),w=b[0],k=b[1],R=(0,v._)((0,y.useState)([]),2),_=R[0],D=R[1],I=(r={fetchPolicy:"cache-and-network",variables:{id:w.id,teamId:d},ssr:!1,notifyOnNetworkStatusChange:!0},n=(0,x._)({},eI,r),e_.useQuery(eS,n)),M=I.data,S=I.loading,F=function(e){e===h?j(null):j(e)},T=function(e,r){r.stopPropagation(),e.pathnames.length>w.pathnames.length?_.push(w):_.pop(),k(e),j(e),D(_)},E=((null==M||null==(i=M.currentUser)||null==(t=i.replFolder)?void 0:t.folders)||[]).filter(function(e){return("Unnamed"!==e.name||null!==e.parentId)&&e.folderType===N.ReplFolderTypes.Default&&(!!o||e.id!==l.id)}).map(function(e){return(0,g._)((0,x._)({},e),{pathnames:e.pathnames.slice(1)})}),A=_[_.length-1]||m,P=h?h.id:"",V="name"in l?l.name:l.title;return(0,s.jsxs)(ee.View,{gap:8,tag:"form",onSubmit:function(r){r.preventDefault(),(0,ek._)(function(){var r,n;return(0,eR._)(this,function(t){return r=[],n=[],o?r.push(l.id):n.push(l.id),e.onSubmit({variables:{destFolderId:h?h.id:"",replIds:r,folderIds:n,teamId:d}}),c(),[2]})})()},children:[(0,s.jsxs)(Z.Text,{children:["Move ",V," to:"]}),(0,s.jsxs)(ee.View,{css:eA.folderPicker,children:[w.pathnames&&w.pathnames.join()!==m.pathnames.join()?(0,s.jsx)(eV,{folder:(0,g._)((0,x._)({},A),{name:"(up one level)"}),isBack:!0,onNavigate:T,isSelected:P===A.id}):null,E?E.map(function(e){return(0,s.jsx)(eV,{folder:e,onSelect:F,onNavigate:T,isSelected:e.id===P},"move-folder-".concat(e.id))}):null]}),(0,s.jsxs)(Z.Text,{children:["Moving to:"," ",h?h.pathnames[h.pathnames.length-1]:w.pathnames[w.pathnames.length-1]||"(home)/"]}),(0,s.jsxs)(ee.View,{row:!0,gap:8,justify:"end",children:[S?null:(0,s.jsx)(Y.Button,{text:"Cancel",onClick:function(){return c()}}),(0,s.jsx)(Y.Button,{colorway:"primary",iconLeft:S?(0,s.jsx)(er.default,{}):(0,s.jsx)(C.default,{}),disabled:S,text:o?"Move App":"Move folder",type:"submit"})]})]})};var eL=e.i(842435),eO=(0,G.cssRecord)({header:[X.rcss.maxWidth("100%")]});let eN=function(e){var r=e.onSubmit,n=e.hideModal,t=e.defaultValue,i=e.loading,l=e.errorMessage,o=e.mode,a=(0,v._)((0,y.useState)(t||""),2),d=a[0],c=a[1],u=(0,y.useRef)(null);(0,y.useEffect)(function(){(null==u?void 0:u.current)&&u.current.select()},[]);var p=function(){if(!l)return r(d);(null==u?void 0:u.current)&&u.current.select()},m=(0,K.useIdSeed)();return(0,s.jsxs)(ee.View,{gap:24,children:[(0,s.jsxs)(Z.Header,{variant:"headerDefault",level:2,css:eO.header,children:["create"===o?"Create":"Rename"," folder"]}),(0,s.jsxs)(ee.View,{gap:4,children:[(0,s.jsx)("label",{htmlFor:m("title"),children:(0,s.jsx)(Z.Text,{color:"dimmer",variant:"small",multiline:!1,children:"Title"})}),(0,s.jsx)(J.Input,{disabled:i,value:d,placeholder:"Name your folder",onChange:function(e){c(e.currentTarget.value)},name:"folderName",ref:u,onKeyDown:function(e){"Enter"===e.key&&p()},id:m("title")})]}),(0,s.jsxs)(ee.View,{row:!0,gap:12,justify:"end",children:[(0,s.jsx)(Y.Button,{text:"Cancel",onClick:n}),(0,s.jsx)(Y.Button,{iconLeft:(0,s.jsx)(eL.default,{}),disabled:i,loading:i,onClick:p,text:"".concat("create"===o?"Create":"Rename"," folder"),colorway:"primary"})]})]})};var eU=e.i(754873),ez=e.i(714165),eW=e.i(929872),eH=e.i(702762),eq=e.i(652219),eQ=((n=eQ||{})[n.RenameFolder=0]="RenameFolder",n[n.DeleteFolder=1]="DeleteFolder",n[n.MoveItem=2]="MoveItem",n),e$=function(e){var r,n=e.folder;return n.folderType===N.ReplFolderTypes.Multiplayer?(0,s.jsx)(eq.default,{size:16}):n.folderType===N.ReplFolderTypes.Team?(0,s.jsx)(ez.Avatar,{src:null!=(r=n.image)?r:null,username:"Team"}):n.folderType===N.ReplFolderTypes.AllTeams?(0,s.jsx)(eq.default,{size:16}):(0,s.jsx)(ex.default,{size:16})};let eG=function(e){var r,n=e.folder,t=e.teamId,i=e.onDelete,l=e.onMove,a=(0,v._)((0,y.useState)(null),2),d=a[0],c=a[1],u=(0,w.default)(),p=u.showConfirm,m=u.showError,f=(0,v._)((r=(0,x._)({},q,void 0),W.useMutation(Q,r)),2),h=f[0],j=f[1],_=(0,v._)((0,b.useReplsDashboardMoveItemsToFolderMutation)(),2),D=_[0],C=_[1],I=[j.error,C.error];(0,y.useEffect)(function(){var e=!0,r=!1,n=void 0;try{for(var t,i=I[Symbol.iterator]();!(e=(t=i.next()).done);e=!0){var l=t.value;l&&(l.graphQLErrors[0]&&l.graphQLErrors[0].message?m(l.graphQLErrors[0].message):m("Something went wrong when updating this folder"))}}catch(e){r=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(r)throw n}}},I),(0,y.useEffect)(function(){j.data&&p("Folder renamed")},[j.data]),(0,y.useEffect)(function(){C.data&&(p("Folder moved"),l())},[C.data]);var M=function(e){j.loading||h({variables:{folderId:n.id,name:e}})};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(ee.View,{css:[X.rcss.position.relative,X.rcss.flex.growAndShrink(1)],children:[(0,s.jsx)(k.default,(0,g._)((0,x._)({passHref:!0},(0,R.folderLinkProps)({pathnames:n.pathnames})),{children:(0,s.jsx)(eW.Surface,{elevated:!0,clsx:["folder-item",{team:n.folderType===N.ReplFolderTypes.Team}],css:[X.rcss.color.foregroundDefault,X.rcss.flex.growAndShrink(1),eU.interactive.listItem,(0,o._)({},(0,eH.screenMediaForMinWidth)("mobileMax"),X.rcss.borderRadius())],p:8,row:!0,gap:32,justify:"space-between",align:"center",children:(0,s.jsxs)(ee.View,{css:[n.canEdit?X.rcss.pr(32):null],grow:!0,shrink:!0,row:!0,gap:8,align:"center",children:[(0,s.jsx)(ee.View,{p:2,children:(0,s.jsx)(e$,{folder:n})}),(0,s.jsxs)(Z.Text,{css:[X.rcss.flex.growAndShrink(1),X.rcss.fontWeight.medium],multiline:!1,children:[n.name,n.replsCount?" (".concat(n.replsCount,")"):null]})]})})})),n.canEdit?(0,s.jsx)(ee.View,{css:{position:"absolute",right:12,top:"50%",transform:"translateY(-50%)"},children:(0,s.jsx)(ew,{renameFolder:function(){return c(0)},deleteFolder:function(){return c(1)},moveItem:function(){return c(2)}})}):null]}),(0,s.jsxs)(ed.Modal,{isOpen:null!==d,onRequestClose:function(){c(null)},children:[0===d?(0,s.jsx)(eN,{mode:"rename",defaultValue:n.name,hideModal:function(){return c(null)},onSubmit:function(e){M(e),c(null)},loading:j.loading}):null,1===d?(0,s.jsx)(el,{folder:n,onDelete:function(){i(),c(null)},onCancel:function(){c(null)}}):null,2===d?(0,s.jsx)(eB,{item:n,teamId:t,isRepl:!1,onSubmit:function(e){C.loading||D(e)},hideModal:function(){return c(null)}}):null]})]})};var eX=e.i(223808),eK=function(e){var r=e.getBoundingClientRect();return r.top>=0&&r.left>=0&&r.bottom<=(window.innerHeight||document.documentElement.clientHeight)};let eY=function(e){var r=e.loadMore,n=(0,y.useRef)(null);return(0,y.useEffect)(function(){var e=(0,eX.default)(function(){n.current&&eK(n.current)&&r()},200);return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}},[r]),(0,s.jsx)("div",{ref:n})},eJ=function(e){var r,n=e.onCreate,t=e.parentId,i=e.teamId,l=(0,v._)((0,y.useState)(!1),2),o=l[0],a=l[1],d=(0,w.default)(),c=d.showConfirm,u=d.showError,p=(0,v._)((0,b.useReplsDashboardCreateReplFolderMutation)(),2),m=p[0],f=p[1];return(0,y.useEffect)(function(){f.data?(c("Folder created"),a(!1),n()):f.error&&u(f.error.graphQLErrors[0].message||"Something went wrong when creating this folder")},[f.data,f.error,n,c,u]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ed.Modal,{isOpen:o,onRequestClose:function(){a(!1)},children:(0,s.jsx)(eN,{mode:"create",onSubmit:function(e){f.loading||m({variables:{name:e,parentId:t,teamId:i}})},hideModal:function(){a(!1)},loading:f.loading,errorMessage:null==(r=f.error)?void 0:r.message})}),(0,s.jsx)(Y.Button,{iconLeft:(0,s.jsx)(eL.default,{}),text:"New folder",onClick:function(){return a(!0)}})]})};var eZ=e.i(703774),e0=e.i(431601),e1=e.i(498710),e2=function(e){var r=e.enabled,n=e.onClick,t=(0,eZ.useTheme)().isDarkColorScheme,i=t?D.tokens.yellowStrongest:D.tokens.yellowDimmest,l=t?D.tokens.yellowDefault:D.tokens.yellowStronger;return(0,s.jsx)(ee.View,{css:[X.rcss.transition.snappy,{height:28,width:44,backgroundColor:r?D.tokens.yellowDimmest:D.tokens.backgroundDefault,borderRadius:14,border:r?"1px solid "+D.tokens.yellowDimmer:"1px solid "+D.tokens.outlineDimmest}],onClick:n,title:"Toggle starred Apps",children:(0,s.jsx)(ee.View,{css:[X.rcss.center,X.rcss.transition.snappy,{margin:1,height:24,width:24,borderRadius:"100%",backgroundColor:r?l:D.tokens.backgroundHigher,color:r?i:D.tokens.foregroundDimmer,transform:r?"translateX(16px)":"translateX(0px)"}],children:r?(0,s.jsx)(e1.default,{size:16}):(0,s.jsx)(e0.default,{size:16})})})},e4=function(e){var r=e.starred,n=(0,a.useRouter)();return(0,s.jsx)(k.default,{href:{pathname:n.pathname,query:(0,x._)({},r?{}:{starred:!0})},as:{pathname:"/repls",query:(0,x._)({},r?{}:{starred:!0})},scroll:!1,shallow:!0,children:(0,s.jsx)(e2,{enabled:r,onClick:void 0})})},e5=e.i(167626),e8=e.i(587876),e6=e.i(483443),e7=e.i(115217),e9=e.i(481700),e3=e.i(26124),re=e.i(236379),rr=e.i(17009),rn=e.i(452412);function rt(e){var r=e.repl,n=e.onLeave,t=e.onCancel,i=(0,w.default)(),l=i.showConfirm,o=i.showError,a=(0,v._)((0,rr.useLeaveMultiplayerReplDialogRemoveMutation)({variables:{id:r.id},onCompleted:function(){l("App removed"),n()},onError:function(e){o(e.message)}}),2),d=a[0],c=a[1].loading;return(0,s.jsx)(rn.default,{title:"Leave multiplayer App",confirmLabel:"Yes, leave this App",isDestructive:!0,loading:c,confirmIcon:(0,s.jsx)(em.default,{}),onCancel:t,onConfirm:function(){c||d()},children:(0,s.jsxs)(Z.Text,{children:["Are you sure you want to leave this multiplayer App (",r.title,")? You will no longer be able to access its content."]})})}var ri=e.i(811842),rl=e.i(127227),ro=e.i(751273),rs=e.i(464092),ra=e.i(418944),rd=e.i(987154),rc=e.i(530310),ru=e.i(452814),rp=((t=rp||{}).EditRepl="EditRepl",t.DeleteRepl="DeleteRepl",t.RemoveRepl="RemoveRepl",t.MoveItem="MoveItem",t),rm=function(e){var r=e.selected,n=e.onClick,t=e.isDarkColorScheme?D.tokens.yellowStrongest:D.tokens.yellowDimmest;return(0,s.jsx)(es.IconButton,{className:"replStar",onClick:n,css:[X.rcss.color.foregroundDimmer,{":hover":{color:t}}],alt:r?"Unstar":"Star",children:r?(0,s.jsx)(e1.default,{color:t}):(0,s.jsx)(e0.default,{})})},rf=function(e){var r=e.isPrivate;return(0,s.jsx)(ro.Tooltip,{tooltip:r?"Only you and invited multiplayers can see this App":"Anyone can see this App",children:(0,s.jsxs)(ee.View,{row:!0,gap:4,align:"center",children:[r?(0,s.jsx)(rc.default,{size:16,color:D.tokens.foregroundDimmest}):(0,s.jsx)(rd.default,{size:16,color:D.tokens.foregroundDimmest}),(0,s.jsx)(Z.Text,{color:"dimmest",multiline:!1,children:r?"Private":"Public"})]})})},rh=(0,G.cssRecord)({wrapper:[X.rcss.height(20),X.rcss.width(20),{"& > div > input":[{":not([disabled])":{borderColor:D.tokens.interactiveBorderHover}}]}]}),rx=function(e){var r=e.replId,n=e.isSelected,t=e.onSelection;return(0,s.jsx)(ee.View,{onClick:function(e){e.preventDefault(),e.stopPropagation(),(0,e5._)(document.activeElement,HTMLElement)&&document.activeElement.blur()},css:rh.wrapper,onKeyDownCapture:function(e){"Enter"===e.key&&t()},children:(0,s.jsx)(rl.Checkbox,{name:"Select app",id:r,checked:n,onChange:t})})},rg=function(e){var r=e.children,n=e.repl,t=e.disabled,i=e.onInactiveClick;return t?(0,s.jsx)(ee.View,{onClick:i,children:r}):(0,s.jsx)(k.default,(0,g._)((0,x._)({},(0,ec.replLinkProps)(n)),{passHref:!0,children:r}))},rv=function(e){var r,n,t=e.repl,i=e.position,l=e.onDelete,a=e.onMove,d=e.teamId,c=(0,eZ.useTheme)().isDarkColorScheme,u=(0,rs.useForkContext)(),p=(0,w.default)(),m=p.showConfirm,f=p.showError,h=(0,e6.useHover)({}),j=h.hoverProps,k=h.isHovered,R=(0,v._)((0,y.useState)(!1),2),_=R[0],C=R[1],I=(0,e8.useFocusWithin)({onFocusWithinChange:function(e){C(e)}}).focusWithinProps,M=(0,v._)((0,y.useState)(null),2),S=M[0],F=M[1],T=(0,ri.useSelectedRepls)(),E=T.selectedRepls,A=T.isReplSelected,P=T.selectRepl,V=T.deselectRepl,B=t.isOwner&&(k||_||E.length>0),L=A(t.id),O=function(){L?V(t.id):P(t)},N=(0,v._)((0,e7.useReplsDashboardUpdateReplMutation)(),2),U=N[0],z=N[1],W=(0,v._)((0,b.useReplsDashboardMoveItemsToFolderMutation)({onCompleted:function(e){e.moveItemsToFolder.every(function(e){return"Repl"===e.__typename||"ReplFolder"===e.__typename})?(m("App moved"),a()):f("Something went wrong")},onError:function(e){f(e.message)}}),2),H=W[0],q=W[1],Q=t.authorizations.star.isAuthorized;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(ee.View,(0,g._)((0,x._)({},j,I),{css:(n={position:"relative"," .replStar":{opacity:1}},(0,o._)(n,(0,eH.screenMediaForMinWidth)("mobileMax"),{" .replStar":{opacity:+!!t.isStarred}}),(0,o._)(n,":hover .replStar",{opacity:1}),(0,o._)(n,":focus-within .replStar",{opacity:1}),n),children:[(0,s.jsx)(rg,{repl:t,disabled:E.length>0,onInactiveClick:O,children:(0,s.jsxs)(eW.Surface,{elevated:!0,css:[eU.interactive.listItem,X.rcss.colWithGap(8),X.rcss.color.foregroundDefault,X.rcss.p(8),(0,o._)({},(0,eH.screenMediaForMinWidth)("mobileMax"),[0===i?X.rcss.borderRadius(4,4,0,0):null,1===i?X.rcss.borderRadius(0,0,4,4):null,-1===i?X.rcss.borderRadius():null]),L?{backgroundColor:D.tokens.interactiveBackground}:null],children:[(0,s.jsxs)(ee.View,{css:[Q?X.rcss.pr(64):X.rcss.pr(40),{gap:8}],grow:!0,shrink:!0,row:!0,align:"center",children:[B?(0,s.jsx)(rx,{replId:t.id,isSelected:L,onSelection:O}):(0,s.jsx)(ra.default,{size:20,iconUrl:t.iconUrl,alt:""}),(0,s.jsxs)(ee.View,{css:[X.rcss.align.baseline,X.rcss.flex.growAndShrink(1),{gap:12}],row:!0,children:[(0,s.jsx)(Z.Text,{multiline:!1,css:[X.rcss.fontWeight.medium,X.rcss.flex.growAndShrink(1),X.rcss.maxWidth("max-content")],children:t.title}),(0,s.jsxs)(ee.View,{css:[X.rcss.display.none,(0,o._)({},(0,eH.screenMediaForMinWidth)("mobileMax"),X.rcss.display.flex)],row:!0,gap:12,children:[!t.isOwner&&t.user?(0,s.jsxs)(Z.Text,{color:"dimmer",multiline:!1,children:["@",t.user.username]}):null,(0,s.jsx)(Z.Text,{color:"dimmer",multiline:!1,children:(0,eF.ago)(new Date(t.timeCreated))})]})]})]}),(0,s.jsxs)(ee.View,{css:[X.rcss.display.flex,(0,o._)({},(0,eH.screenMediaForMinWidth)("mobileMax"),X.rcss.display.none)],px:2,row:!0,gap:12,children:[!t.isOwner&&t.user?(0,s.jsxs)(Z.Text,{color:"dimmer",multiline:!1,children:["@",t.user.username]}):null,(0,s.jsx)(Z.Text,{color:"dimmer",multiline:!1,children:(0,eF.ago)(new Date(t.timeCreated))})]}),(0,s.jsxs)(ee.View,{css:[(0,o._)({},(0,eH.screenMediaForMinWidth)("mobileMax"),X.rcss.px(2))],row:!0,gap:12,children:["Template"===t.publishedAs?(0,s.jsx)(s.Fragment,{}):null,(0,s.jsx)(rf,{isPrivate:t.isPrivate}),(null==(r=t.hostingDeployment)?void 0:r.__typename)==="HostingDeployment"?(0,s.jsx)(e9.BuildStatusesBadge,{deployment:t.hostingDeployment}):null,t.publishedAs?(0,s.jsxs)(ee.View,{row:!0,gap:4,align:"center",children:[(0,s.jsx)(ru.default,{size:16,color:D.tokens.foregroundDimmest}),(0,s.jsx)(Z.Text,{color:"dimmest",multiline:!1,children:"Published"})]}):null]})]})}),(0,s.jsxs)(eW.Surface,{background:k||L?"higher":"default",elevated:!0,css:[X.rcss.position.absolute,X.rcss.top(12),X.rcss.right(12),{backgroundColor:"transparent"}],row:!0,gap:2,children:[Q?(0,s.jsx)(rm,{selected:t.isStarred,onClick:function(){if(!z.loading){var e=!t.isStarred;U({variables:{input:{id:t.id,isStarred:e}},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:(0,g._)((0,x._)({},t),{isStarred:e})}}}).then(function(r){r.errors?f(r.errors[0].message):m(e?"App starred":"App unstarred")})}},isDarkColorScheme:c}):null,(0,s.jsx)(eb,{editRepl:function(){return F("EditRepl")},deleteRepl:function(){return F("DeleteRepl")},removeMultiplayerRepl:function(){return F("RemoveRepl")},moveItem:function(){return F("MoveItem")},forkRepl:function(){u.isForking||u.fork()},repl:t,selectRepl:t.isOwner?O:void 0})]})]})),(0,s.jsx)(ed.Modal,{isOpen:"EditRepl"===S,onRequestClose:function(){return F(null)},children:(0,s.jsx)(re.EditReplForm,{repl:t,onDone:function(){return F(null)}})}),(0,s.jsx)(ed.Modal,{isOpen:"DeleteRepl"===S,onRequestClose:function(){return F(null)},children:(0,s.jsx)(e3.DeleteReplDialog,{repl:t,onDone:function(){return F(null)}})}),(0,s.jsx)(ed.Modal,{isOpen:"MoveItem"===S,onRequestClose:function(){return F(null)},children:(0,s.jsx)(eB,{item:t,teamId:d,isRepl:!0,onSubmit:function(e){q.loading||H(e)},hideModal:function(){return F(null)}})}),(0,s.jsx)(ed.Modal,{isOpen:"RemoveRepl"===S,onRequestClose:function(){return F(null)},children:(0,s.jsx)(rt,{repl:t,onCancel:function(){return F(null)},onLeave:function(){F(null),l()}})})]})};let rj=function(e){return(0,s.jsx)(rs.ForkContextProvider,{forkParams:{trackingData:{forkSource:"replsDashboard"}},repl:e.repl,children:(0,s.jsx)(rv,(0,x._)({},e))})};var ry=e.i(91720),rb=e.i(788124),rw=e.i(952030),rk=(i={display:"grid",gridTemplateColumns:"minmax(0, 1fr)",gap:4,paddingBottom:4},(0,o._)(i,(0,eH.screenMediaForMinWidth)("mobileMax"),{gridTemplateColumns:"repeat(2, minmax(0, 1fr))",gap:12,paddingBottom:24}),(0,o._)(i,(0,eH.screenMediaForMinWidth)("tabletMin"),{gridTemplateColumns:"repeat(3, minmax(0, 1fr))"}),i),rR=(0,_.css)({"&":{display:"flex",justifyContent:"center",alignItems:"center",padding:"20px",width:"100%",height:"100%"}}),r_=(0,_.css)((l={".cta-box":{padding:"20px 25px 30px 25px",borderStyle:"dashed",borderColor:D.tokens.outlineDimmer,borderRadius:"15px",borderWidth:"thin",textAlign:"center",maxWidth:"500px",display:"flex",flexDirection:"column",gap:"8px",alignItems:"center"},".empty-state":{margin:"40px auto",width:"fit-content",color:D.tokens.outlineDefault},".button-container":{marginTop:"15px"},".cta-button":{padding:"5px",display:"grid",verticalAlign:"middle"},".content":{marginLeft:"4px"},".spacer":{height:D.tokens.space8,userSelect:"none",pointerEvents:"none"}},(0,o._)(l,"@media screen and (min-width:450px)",{".cta-button":{padding:"5px",display:"inline-block",verticalAlign:"middle"}}),(0,o._)(l,".spinner",{width:"100%",height:"100%"}),(0,o._)(l,".spinner,.load-more-spinner",{display:"flex",justifyContent:"center",alignItems:"center",padding:"20px"}),(0,o._)(l,".header",{display:"grid",gridTemplateColumns:"1fr auto auto",gridColumnGap:"20px",alignItems:"center"}),(0,o._)(l,".empty-folder",{display:"flex",flexDirection:"column",alignItems:"center"}),(0,o._)(l,".new-folder",{maxWidth:"fit-content"}),(0,o._)(l,".empty-folder *",{padding:D.tokens.space16}),l)),rD=(0,_.css)({"&":{width:"100%",height:"100%",display:"flex",justifyContent:"center",marginTop:D.tokens.space16}});let rC=function(e){var r,n=e.path,t=e.starred,i=(0,ri.useSelectedRepls)(),l=i.deselectRepl,o=i.isReplSelected,a=i.clearSelectedRepls,d=(0,v._)((0,y.useState)(n),2),p=d[0],f=d[1];n!==p&&(f(n),a());var h=(0,b.useReplsDashboardReplFolderListQuery)({fetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first",variables:{path:n,starred:t},ssr:!1,notifyOnNetworkStatusChange:!0}),k=h.data,R=h.loading,_=h.refetch,D=h.fetchMore,C=(0,w.default)(),I=C.showError,F=C.showConfirm,T=(0,v._)((0,b.useReplsDashboardMoveItemsToFolderMutation)({onError:function(e){return I(e.message)},onCompleted:function(e){e.moveItemsToFolder.forEach(function(e){"Repl"===e.__typename&&o(e.id)&&l(e.id)})},update:function(e,r){var n=r.data;n&&B&&(n.moveItemsToFolder.forEach(function(r){e.modify({id:e.identify({__typename:"ReplFolder",id:B.id}),optimistic:!0,fields:{folders:function(e,n){var t=n.readField;return"ReplFolder"!==r.__typename?e:e.filter(function(e){return t("id",e)!==r.id})},repls:function(e,n){var t=n.readField;if("Repl"!==r.__typename)return e;var i=e.items.filter(function(e){return t("id",e)!==r.id});return{pageInfo:e.pageInfo,items:i}}}})}),F("Item moved!"))}}),2),E=T[0],P=T[1],B=k&&k.currentUser&&k.currentUser.replFolderByPath?k.currentUser.replFolderByPath:null,L=(null==B?void 0:B.pathnames.length)===1&&(null==B?void 0:B.pathnames[0])===""||null==B?void 0:B.id,N=!!t,U=B&&B.folders.length+B.repls.items.length===0,z=B&&1===B.folders.length&&0===B.repls.items.length&&"multiplayer"===B.folders[0].pathnames[0],W=!N&&(U||z)&&((null==B?void 0:B.canEdit)||!L),H=B&&B.repls.pageInfo.nextCursor?B&&B.repls.pageInfo.nextCursor:null,q=(null==B?void 0:B.ownerId)&&(null==B?void 0:B.ownerId)!==(null==k||null==(r=k.currentUser)?void 0:r.id)?B.ownerId:void 0,Q=(0,u.default)(),$=function(e){P.loading||E({variables:{replIds:"repl"in e?[e.repl.id]:[],folderIds:"folder"in e?[e.folder.id]:[],destFolderId:e.to.id,teamId:q}})};return!k&&R?(0,s.jsx)("div",{className:"spinner",css:rR,children:(0,s.jsx)(er.default,{})}):B?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{css:r_,children:[(0,s.jsxs)(ee.View,{pb:16,row:!0,justify:"space-between",align:"center",children:[W||!B.canCreateSubFolders&&L?(0,s.jsx)("div",{}):(0,s.jsx)("div",{className:"new-folder",children:(0,s.jsx)(eJ,{onCreate:_,parentId:L,teamId:q})}),(0,s.jsx)(e4,{starred:!!t})]}),(0,s.jsx)(rb.default,{children:(0,s.jsxs)("div",{children:[B.parent&&B.canEdit?(0,s.jsx)("div",{children:(0,s.jsx)(O,{folder:B.parent,children:(0,s.jsx)(M,{pathnames:B.parent.pathnames})})}):null,B.parent&&!B.canEdit?(0,s.jsx)(M,{pathnames:B.parent.pathnames}):null,!N&&B.folders.length?(0,s.jsx)(ee.View,{css:rk,children:B.folders.map(function(e){return e.canEdit?(0,s.jsx)(O,{folder:e,children:(0,s.jsx)(A,{onMove:$,folder:e,children:(0,s.jsx)(eG,{onDelete:_,folder:e,teamId:q,onMove:_})})},e.id):(0,s.jsx)(eG,{onDelete:_,teamId:q,onMove:_,folder:e},e.id)})}):null,(0,s.jsx)(ee.View,{gap:1,children:B.repls.items.map(function(e,r){return(0,s.jsx)(V,{onMove:$,repl:e,children:(0,s.jsx)(rj,{position:B.repls.items.length>1?r/(B.repls.items.length-1):-1,repl:e,onMove:_,onDelete:_,teamId:q})},e.id)})}),W?(0,s.jsx)("div",{className:"cta-box",children:(0,s.jsxs)("div",{className:"button-container",children:[(0,s.jsx)("div",{className:"cta-button",children:(0,s.jsx)(eJ,{onCreate:_,parentId:L,teamId:q})}),(0,s.jsx)("div",{className:"cta-button",children:(0,s.jsx)(ry.ButtonLink,{iconLeft:(0,s.jsx)(rw.default,{}),text:"New App",href:{pathname:"/home",query:{folderId:Q}},as:"/home",onClick:function(){(0,m.track)(c.events.OPEN_REPL_CREATION_PAGE,{source:"repl folder"})}})})]})}):null]})}),R?(0,s.jsx)("div",{className:"load-more-spinner",children:(0,s.jsx)(er.default,{})}):null,H&&!R?(0,s.jsx)(eY,{loadMore:function(){H&&!R&&D({variables:{path:n,starred:t,after:H},updateQuery:function(e,r){var n=r.fetchMoreResult;return e&&e.currentUser&&e.currentUser.replFolderByPath&&n&&n.currentUser&&n.currentUser.replFolderByPath?{__typename:"RootQueryType",currentUser:(0,g._)((0,x._)({},n.currentUser),{replFolderByPath:(0,g._)((0,x._)({},n.currentUser.replFolderByPath),{repls:{__typename:"ReplConnection",pageInfo:(0,x._)({},n.currentUser.replFolderByPath.repls.pageInfo),items:(0,j._)(e.currentUser.replFolderByPath.repls.items).concat((0,j._)(n.currentUser.replFolderByPath.repls.items))}})})}:e}})}}):null]}),(0,s.jsx)(S.default,{onDelete:_})]}):(0,s.jsx)("div",{css:rD,children:(0,s.jsx)(Z.Text,{variant:"text",multiline:!1,children:"Unable to fetch repls. Please try again."})})},rI=function(e){var r=e.links;return(0,s.jsx)(Z.Text,{multiline:!1,children:r.map(function(e,n){var t=e.pathnames,i=e.text;return(0,s.jsxs)(y.Fragment,{children:[n===r.length-1?i:(0,s.jsx)(k.default,(0,g._)((0,x._)({},(0,R.folderLinkProps)({pathnames:t})),{style:{color:D.tokens.foregroundDefault},children:i})),(0,s.jsx)("span",{css:{color:D.tokens.foregroundDimmest},children:" / "})]},t.join("/"))})})};var rM=e.i(578134),rS=e.i(403675),rF=(0,G.cssRecord)({content:[(0,o._)({margin:"0 auto"},X.media.min("tabletMin"),[X.rcss.width("90%")])]});e.s(["default",0,function(){var e=(0,a.useRouter)(),r=e.asPath,n=e.query,t=(0,d.useIsSSR)(),i=(0,R.getFolderPath)(r),l=(0,u.default)(),o=t?[]:(0,R.getPathLinks)(i);return(0,s.jsx)(ri.SelectedReplsContextProvider,{children:(0,s.jsx)(rM.default,{title:"Apps",children:(0,s.jsxs)(ee.View,{css:rF.content,px:12,py:32,gap:16,children:[(0,s.jsxs)(ee.View,{pt:12,tag:"header",css:f.orgStyles.pageHeader,children:[(0,s.jsxs)(ee.View,{css:f.orgStyles.pageTitle,children:[(0,s.jsx)(rS.default,{size:24}),(0,s.jsx)(Z.Header,{level:2,variant:"headerDefault",children:(0,s.jsxs)(ee.View,{row:!0,gap:16,justify:"start",align:"center",children:[(0,s.jsx)(ee.View,{children:"Apps"}),(0,s.jsx)(h.ReplsLimitUpsellPill,{})]})})]}),(0,s.jsx)(ee.View,{css:f.orgStyles.pageHeaderActions,children:(0,s.jsx)(ry.ButtonLink,{colorway:"primary",href:{pathname:"/home",query:{folderId:l}},as:"/home",onClick:function(){(0,m.track)(c.events.OPEN_REPL_CREATION_MODAL,{source:"repls-dashboard",href:window.location.href,context:(0,p.getOrgTrackingContext)()})},text:"Create",iconLeft:(0,s.jsx)(rw.default,{})})})]}),(0,s.jsxs)(ee.View,{gap:16,children:[(0,s.jsx)(rI,{links:o}),(0,s.jsx)(rC,{path:i,starred:n.starred?!!n.starred:void 0})]})]})})})}],957296)},852771,(e,r,n)=>{var t="/replsDashboard";(window.__NEXT_P=window.__NEXT_P||[]).push([t,function(){return e.r(957296)}]),r.hot&&r.hot.dispose(function(){window.__NEXT_P.push([t])})}]);

//# debugId=e7bc7048-ce96-2fd4-48f7-7350da45bf1a
//# sourceMappingURL=3f68a566e8002473.js.map