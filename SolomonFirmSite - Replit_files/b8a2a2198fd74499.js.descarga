;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="d6685ed9-3bc6-d48f-3dfb-322d69d1148f")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,315801,e=>{"use strict";function t(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.root,s=r.rootMargin,i=r.threshold;if("undefined"==typeof IntersectionObserver)return function(){};var a=new WeakMap,c=new IntersectionObserver(function(e){e.forEach(function(e){var r=a.get(e.target);if(!!r!==e.isIntersecting)if(e.isIntersecting){var n=t(e);"function"==typeof n?a.set(e.target,n):c.unobserve(e.target)}else r&&(r(e),a.delete(e.target))})},{root:n,rootMargin:s,threshold:void 0===i?1:i});return c.observe(e),function(){return c.disconnect()}}e.s(["inView",()=>t])},467951,e=>{"use strict";var t=e.i(530658),r=e.i(389959),n=e.i(315801);function s(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=s.root,a=s.margin,c=s.amount,o=s.once,l=void 0!==o&&o,u=(0,t._)((0,r.useState)(!1),2),d=u[0],f=u[1];return(0,r.useEffect)(function(){if(e.current&&(!l||!d)){var t;return(0,n.inView)(e.current,function(){return f(!0),l?void 0:function(){return f(!1)}},{root:null!=(t=null==i?void 0:i.current)?t:void 0,rootMargin:a,threshold:c})}},[i,e,a,l,c,d]),d}e.s(["useInView",()=>s])},352701,e=>{"use strict";var t=e.i(878420),r=e.i(64386),n=e.i(276385),s=e.i(606867);function i(e){return(0,n.jsx)(s.default,(0,r._)((0,t._)({},e),{children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M3.25 12a1.75 1.75 0 1 1 3.5 0 1.75 1.75 0 0 1-3.5 0Zm7 0a1.75 1.75 0 1 1 3.5 0 1.75 1.75 0 0 1-3.5 0Zm7 0a1.75 1.75 0 1 1 3.5 0 1.75 1.75 0 0 1-3.5 0Z",clipRule:"evenodd"})}))}e.s(["default",()=>i])},258941,e=>{"use strict";var t=e.i(276385),r=e.i(140487),n=e.i(960178),s=e.i(625484),i=e.i(940745);function a(e){var a=e.prompt,c=e.desc,o=e.confirmText,l=e.loading,u=void 0!==l&&l,d=e.onCancel,f=e.onConfirm,h=e.danger,p=e.icon;return(0,t.jsxs)(s.View,{gap:24,children:[(0,t.jsx)(n.Header,{level:3,variant:"headerDefault",children:a}),(0,t.jsx)(n.Text,{children:c}),(0,t.jsxs)(s.View,{row:!0,gap:12,justify:"end",children:[d?(0,t.jsx)(r.Button,{disabled:u,onClick:d,text:"Cancel"}):null,(0,t.jsx)(r.Button,{colorway:h?"negative":"primary",disabled:u,onClick:f,text:o||"Ok",iconLeft:u?(0,t.jsx)(i.default,{}):p})]})]})}e.s(["default",()=>a])},677202,e=>{"use strict";var t=e.i(878420),r=e.i(64386),n=e.i(276385),s=e.i(606867);function i(e){return(0,n.jsx)(s.default,(0,r._)((0,t._)({},e),{children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M8 12a4 4 0 1 1 8 0 4 4 0 0 1-8 0Z",clipRule:"evenodd"})}))}e.s(["default",()=>i])},598160,e=>{"use strict";var t=e.i(878420),r=e.i(64386),n=e.i(276385),s=e.i(606867);function i(e){return(0,n.jsx)(s.default,(0,r._)((0,t._)({},e),{children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M12 3.75A3.25 3.25 0 0 0 8.75 7v.25h6.5V7A3.25 3.25 0 0 0 12 3.75Zm4.75 3.604V7a4.75 4.75 0 1 0-9.5 0v.354c-.444.125-.842.36-1.164.671L4.53 6.47a.75.75 0 0 0-1.06 1.06l1.85 1.85c-.046.2-.07.407-.07.62v3.25H3a.75.75 0 0 0 0 1.5h2.291a6.709 6.709 0 0 0 1.018 2.88l-1.84 1.84a.75.75 0 1 0 1.061 1.06l1.727-1.727A6.729 6.729 0 0 0 12 20.75a6.728 6.728 0 0 0 4.743-1.947l1.727 1.727a.75.75 0 1 0 1.06-1.06l-1.839-1.84a6.71 6.71 0 0 0 1.018-2.88H21a.75.75 0 0 0 0-1.5h-2.25V10c0-.213-.024-.42-.07-.62l1.85-1.85a.75.75 0 0 0-1.06-1.06l-1.556 1.555a2.747 2.747 0 0 0-1.164-.671Zm-5.5 1.396H8c-.69 0-1.25.56-1.25 1.25v4a5.251 5.251 0 0 0 4.5 5.197V8.75Zm1.5 10.447V8.75H16c.69 0 1.25.56 1.25 1.25v4a5.251 5.251 0 0 1-4.5 5.197Z",clipRule:"evenodd"})}))}e.s(["default",()=>i])},491669,e=>{"use strict";var t=e.i(878420),r=e.i(64386),n=e.i(276385),s=e.i(606867);function i(e){return(0,n.jsx)(s.default,(0,r._)((0,t._)({},e),{children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M20.715 11.137c-.176-4.908-4.971-8.783-9.59-8.355l-.02.002h-.02c-4.695.185-8.221 4.382-7.8 8.245l.002.022v.021c.2 3.94 4.078 6.949 7.686 6.553l.02-.003h.02c3.684-.204 6.304-3.525 5.923-6.413l-.003-.022-.002-.022c-.217-2.973-3.18-5.113-5.774-4.757l-.02.003-.02.002c-2.673.22-4.388 2.656-4.054 4.568l.004.023.002.023c.226 2.006 2.27 3.282 3.844 2.977l.02-.004.02-.003c1.668-.227 2.47-1.76 2.217-2.69l-.006-.022-.005-.024a1.634 1.634 0 0 0-.803-1.098c-.402-.23-.804-.251-1.042-.164a.75.75 0 1 1-.518-1.408c.744-.273 1.609-.128 2.304.269a3.134 3.134 0 0 1 1.524 2.076c.504 1.912-1.029 4.203-3.447 4.544-2.396.451-5.258-1.382-5.596-4.263-.484-2.866 1.96-6.003 5.392-6.297 3.401-.455 7.158 2.259 7.452 6.114.492 3.826-2.86 7.827-7.308 8.084-4.41.471-9.07-3.121-9.326-7.948-.508-4.795 3.752-9.658 9.215-9.883C16.42.797 21.99 5.26 22.213 11.062c.53 5.766-4.654 11.505-11.137 11.688a.75.75 0 1 1-.042-1.5c5.704-.16 10.14-5.236 9.684-10.07l-.003-.021v-.022Z",clipRule:"evenodd"})}))}e.s(["default",()=>i])},938024,e=>{"use strict";var t=e.i(878420),r=e.i(64386),n=e.i(276385),s=e.i(606867);function i(e){return(0,n.jsxs)(s.default,(0,r._)((0,t._)({},e),{children:[(0,n.jsx)("path",{d:"M9.53 8.47a.75.75 0 0 0-1.06 1.06L10.94 12l-2.47 2.47a.75.75 0 1 0 1.06 1.06L12 13.06l2.47 2.47a.75.75 0 1 0 1.06-1.06L13.06 12l2.47-2.47a.75.75 0 0 0-1.06-1.06L12 10.94 9.53 8.47Z"}),(0,n.jsx)("path",{fillRule:"evenodd",d:"M12 3.25a8.75 8.75 0 1 0 0 17.5 8.75 8.75 0 0 0 0-17.5ZM4.75 12a7.25 7.25 0 1 1 14.5 0 7.25 7.25 0 0 1-14.5 0Z",clipRule:"evenodd"})]}))}e.s(["default",()=>i])},653863,e=>{"use strict";e.i(239663),e.i(973519),e.i(534313),e.s([])},112767,e=>{"use strict";e.i(33699);var t=e.i(878420),r=e.i(64386),n=e.i(886513),s=e.i(276385),i=e.i(389959),a=e.i(497953),c=e.i(99906),o=e.i(483443),l=e.i(104394),u=e.i(330666),d=e.i(480028),f=e.i(446530),h=e.i(613355),p=e.i(960178),m=e.i(625484).SpecializedView.label,v=(0,f.cssRecord)({label:[h.rcss.rowWithGap(8),h.rcss.align.center],svg:{" [data-switch-outline]":{transition:"stroke 100ms ease-out"},":hover [data-switch-outline]":{transition:"stroke 0ms"}},background:{transition:"fill 80ms ease-out"},button:{transition:"x 80ms ease-out"}}),x=function(e){var f,h,x,S,g,w,_,j=e.colorway,y=e.dataCy,b=e.size,C=e.fillColor,R=e.focusRingColor,E=(0,n._)(e,["colorway","dataCy","size","fillColor","focusRingColor"]),T=d.colormap[void 0===j?"primary":j],k=(0,i.useRef)(null),V=(0,a.useToggleState)(E),A=(h=(f=(0,l.useToggle)(E,V,k)).labelProps,x=f.inputProps,S=f.isSelected,g=f.isPressed,w=f.isDisabled,_=f.isReadOnly,{labelProps:h,inputProps:(0,r._)((0,t._)({},x),{role:"switch",checked:S}),isSelected:S,isPressed:g,isDisabled:w,isReadOnly:_}).inputProps,U=(0,c.useFocusRing)(E),I=U.focusProps,P=U.isFocusVisible,O=(0,o.useHover)(E),D=O.hoverProps,M=O.isHovered,F=V.isSelected,B=E.isDisabled||!1,N=E.isReadOnly||!1,L=i.Children.count(E.children)>0;void 0!==E["aria-label"]||E["aria-labelledby"];var W="small"===(void 0===b?"default":b),z=W?26:38,H=W?16:24,Z=W?8:12,q=W?12:16,K=z-1,$=H-1,X=z+2,G=H+2,Q=Z+1,Y=(0,s.jsxs)("svg",(0,r._)((0,t._)({"aria-hidden":"true"},D),{width:z,height:H,viewBox:"0 0 ".concat(z," ").concat(H),fill:"none",xmlns:"http://www.w3.org/2000/svg",overflow:P?"visible":"hidden",style:{cursor:B||N?"auto":"pointer"},css:v.svg,children:[(0,s.jsx)("rect",{x:"0",y:"0",width:z,height:H,rx:Z,fill:null!=C?C:F?B||N?T.dimmer:T.default:d.tokens.interactiveBorder,css:v.background}),(0,s.jsx)("rect",{x:F?W?12:18:W?2:4,y:W?2:4,width:q,height:q,rx:W?6:8,fill:d.tokens.white,opacity:B?.7:1,css:v.button}),(0,s.jsx)("rect",{x:"0.5",y:"0.5",width:K,height:$,rx:Z,stroke:!M||B||N?"transparent":F?T.strongest:d.tokens.interactiveBorderHover,"data-switch-outline":!0}),(0,s.jsx)("rect",{x:"-1",y:"-1",stroke:P?null!=R?R:F?T.strongest:T.default:"transparent",width:X,height:G,rx:Q,strokeWidth:"2"})]}));return L?(0,s.jsxs)(m,{css:v.label,"data-cy":y,children:[(0,s.jsx)(u.VisuallyHidden,{children:(0,s.jsx)("input",(0,r._)((0,t._)({},A,I),{ref:k}))}),Y,(0,s.jsx)(p.Text,{multiline:!1,variant:W?"small":"text",children:E.children})]}):(0,s.jsxs)(m,{css:v.label,"data-cy":y,children:[(0,s.jsx)(u.VisuallyHidden,{children:(0,s.jsx)("input",(0,r._)((0,t._)({},A,I),{ref:k}))}),Y]})};e.s(["Switch",()=>x],112767)},354429,e=>{"use strict";var t=/^[a-zA-Z_][a-zA-Z0-9_]*$/;e.s(["POSIX_ENV_VAR_ERROR",()=>"Use only letters, numbers, and underscores (must start with a letter or underscore)","POSIX_ENV_VAR_PATTERN",()=>t])},448337,e=>{"use strict";var t=e.i(878420),r=e.i(569384),n=e.i(973245),s=e.i(304277);e.i(566901);var i=e.i(951262);function a(){var e=(0,r._)(["\n  fragment SharedSecret on SharedSecret {\n    id\n    name\n    description\n    version\n    value\n    timeCreated\n    timeUpdated\n    links {\n      items {\n        id\n        resource {\n          __typename\n          ... on Repl {\n            id\n            url\n            title\n            iconUrl\n          }\n        }\n      }\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        nextCursor\n        previousCursor\n      }\n      totalCount\n    }\n    owner {\n      __typename\n      ... on User {\n        id\n      }\n    }\n  }\n"]);return a=function(){return e},e}function c(){var e=(0,r._)(["\n  query AccountSecrets($secretsInput: SecretsInput) {\n    currentUser {\n      id\n      secrets(input: $secretsInput) {\n        ... on SharedSecretConnection {\n          items {\n            ...SharedSecret\n          }\n          pageInfo {\n            hasNextPage\n            hasPreviousPage\n            nextCursor\n            previousCursor\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}function o(){var e=(0,r._)(["\n  mutation CreateSharedSecrets($input: CreateSharedSecretsInput!) {\n    createSharedSecrets(input: $input) {\n      __typename\n      ... on CreateSharedSecretsResult {\n        createdSecrets {\n          ...SharedSecret\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return o=function(){return e},e}function l(){var e=(0,r._)(["\n  mutation UpdateSharedSecrets($input: UpdateSharedSecretsInput!) {\n    updateSharedSecrets(input: $input) {\n      __typename\n      ... on UpdateSharedSecretsResult {\n        updatedSecrets {\n          ...SharedSecret\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return l=function(){return e},e}function u(){var e=(0,r._)(["\n  mutation DeleteSharedSecret($id: ID!) {\n    deleteSharedSecret(id: $id) {\n      __typename\n      ... on DeleteSharedSecretResult {\n        __typename\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return u=function(){return e},e}var d={},f=(0,n.gql)(a()),h=(0,n.gql)(c(),f);function p(e){var r=(0,t._)({},d,e);return s.useQuery(h,r)}var m=(0,n.gql)(o(),f);function v(e){var r=(0,t._)({},d,e);return i.useMutation(m,r)}var x=(0,n.gql)(l(),f);function S(e){var r=(0,t._)({},d,e);return i.useMutation(x,r)}var g=(0,n.gql)(u());function w(e){var r=(0,t._)({},d,e);return i.useMutation(g,r)}e.s(["SharedSecretFragmentDoc",()=>f,"useAccountSecretsQuery",()=>p,"useCreateSharedSecretsMutation",()=>v,"useDeleteSharedSecretMutation",()=>w,"useUpdateSharedSecretsMutation",()=>S])},466640,e=>{"use strict";var t=e.i(297083),r=e.i(721281),n=e.i(878420),s=e.i(64386),i=e.i(530658),a=e.i(346715),c=e.i(817556),o=e.i(276385),l=e.i(412160),u=e.i(389959),d=e.i(906368),f=e.i(417751),h=e.i(15053),p=e.i(448337),m=e.i(368964),v=e.i(709485),x=e.i(47503),S=e.i(222342),g=e.i(858248),w=e.i(354429),_=e.i(967629),j=e.i(480028),y=e.i(877249),b=e.i(446530),C=e.i(613355),R=e.i(140487),E=e.i(258941),T=e.i(88619),k=e.i(939562),V=e.i(887877),A=e.i(136540),U=e.i(607278),I=e.i(818503),P=e.i(739521),O=e.i(604963),D=e.i(929872),M=e.i(960178),F=e.i(795581),B=e.i(625484),N=e.i(418944),L=e.i(283023),W=e.i(841691),z=e.i(90102),H=e.i(530310),Z=e.i(952030),q=e.i(703505),K=(0,b.cssRecord)({root:[C.rcss.gap(16)]}),$=(0,b.cssRecord)({root:[C.rcss.flex.column,C.rcss.p(8),C.rcss.colWithGap(8)],clickableText:[C.rcss.color.accentPrimaryStronger,C.rcss.display.flex,C.rcss.cursor.pointer],disclaimer:[C.rcss.gap(4)],list:[{li:[C.rcss.flex.row,C.rcss.align.center,C.rcss.gap(4)]}]}),X=function(e){var t=e.name,r=e.links,n=e.isOpen,s=e.onClose,a=e.onDelete,c=e.isLoading,l=(0,i._)((0,u.useState)(!1),2),d=l[0],f=l[1];return(0,o.jsx)(P.Modal,{isOpen:n,onRequestClose:function(){return s()},css:K.root,children:(0,o.jsx)(E.default,{prompt:"Delete ".concat(t,"?"),desc:(0,o.jsxs)(o.Fragment,{children:[r&&r.totalCount>0?(0,o.jsxs)(O.PopoverTrigger,{label:"affected-repls",isOpen:d,onOpenChange:f,children:[(0,o.jsxs)("div",{children:[r.totalCount," Repl",1===r.totalCount?"":"s"," ","will immediately lose access to this secret"]}),(0,o.jsx)(ee,{links:r})]}):"No Apps are currently using this secret",(0,o.jsx)("br",{}),"This action cannot be undone."]}),onConfirm:a,onCancel:s,confirmText:"Yes, delete this secret",icon:(0,o.jsx)(q.default,{}),danger:!0,loading:c})})},G=(0,_.css)([C.rcss.border({color:j.tokens.outlineDimmer,width:1,direction:"bottom"}),{"&:last-child":{borderBottom:"none"}}]),Q=(0,b.cssRecord)({titleWrapper:[C.rcss.align.baseline],section:[C.rcss.borderRadius(12),C.rcss.p(16),C.rcss.flex.column,C.rcss.gap(12),{'*[data-sensitive="true"]':{fontFamily:"text-security-disc"}}],secretList:[C.rcss.borderRadius(),C.rcss.overflow("hidden")],secretItem:[G,C.rcss.align.center,C.rcss.p(8),C.rcss.display.grid,(0,r._)({gridTemplateColumns:"1fr 1fr 140px 50px",minWidth:0,overflow:"hidden"},"@media (max-width: ".concat(y.BREAKPOINTS.mobileMax,"px)"),{gridTemplateColumns:"1fr 2fr auto",gridTemplateRows:"auto auto",gridTemplateAreas:'\n          "name name edit"\n          "value value timestamp"\n        ',gap:"8px"})],secretValue:[C.rcss.display.grid,C.rcss.gap(4),C.rcss.overflow("hidden"),(0,r._)({gridTemplateColumns:"min-content minmax(50px, 1fr) min-content",minWidth:0,width:"100%","& > span":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",minWidth:0,display:"block",width:"100%"}},"@media (max-width: ".concat(y.BREAKPOINTS.mobileMax,"px)"),{gridArea:"value"})],secretValueWrapper:[C.rcss.overflow("hidden"),C.rcss.width("100%"),{textOverflow:"ellipsis",minWidth:0}],secretValueText:[C.rcss.overflow("hidden"),{textOverflow:"ellipsis",whiteSpace:"nowrap",display:"block",width:"100%",maxWidth:"100%",minWidth:0}],secretName:[C.rcss.overflow("hidden"),C.rcss.width("100%"),(0,r._)({textOverflow:"ellipsis",whiteSpace:"nowrap",display:"block",minWidth:0,maxWidth:"100%"},"@media (max-width: ".concat(y.BREAKPOINTS.mobileMax,"px)"),{gridArea:"name",fontWeight:500})],secretTimestamp:[C.rcss.color.foregroundDimmer,(0,r._)({},"@media (max-width: ".concat(y.BREAKPOINTS.mobileMax,"px)"),{gridArea:"timestamp",textAlign:"right",fontSize:"0.75rem",whiteSpace:"nowrap"})],emptyState:[C.rcss.center,C.rcss.border({color:j.tokens.outlineDefault,width:1,style:"dashed"}),C.rcss.borderRadius(4),C.rcss.py(24),C.rcss.px(12)],secretEditContainer:[(0,r._)({},"@media (max-width: ".concat(y.BREAKPOINTS.mobileMax,"px)"),{gridArea:"edit",justifySelf:"end"})]}),Y=function(e){var t=e.value,r=(0,i._)((0,u.useState)(!1),2),n=r[0],s=r[1];return(0,o.jsxs)(B.View,{css:Q.secretValue,row:!0,align:"center","data-sensitive":!n,children:[(0,o.jsx)(T.CopyIconButton,{textToCopy:t}),(0,o.jsx)(B.View,{css:Q.secretValueWrapper,children:(0,o.jsx)("span",{css:Q.secretValueText,children:n?t:"****************"})}),(0,o.jsx)(A.IconButton,{onClick:function(){return s(!n)},alt:n?"Hide":"Show",children:n?(0,o.jsx)(z.default,{size:16}):(0,o.jsx)(W.default,{size:16})})]})},J=(0,b.cssRecord)({root:[C.rcss.display.flex,C.rcss.flex.column,C.rcss.p(8),C.rcss.gap(8),G,{borderBottomWidth:1,borderBottomStyle:"solid"}],formFields:[C.rcss.display.grid,C.rcss.gap(32),{gridTemplateColumns:"2fr 3fr"}],formField:[C.rcss.flex.column,C.rcss.gap(8)],formFieldLabel:[{label:[C.rcss.flex.row,C.rcss.align.center,C.rcss.gap(4)]}],disclaimer:[C.rcss.color.foregroundDimmer,{fontSize:j.tokens.fontSizeSmall,lineHeight:j.tokens.lineHeightSmall}],footer:[C.rcss.display.flex,C.rcss.flex.row,C.rcss.justify.spaceBetween],footerGroup:[C.rcss.display.flex,C.rcss.flex.row,C.rcss.gap(4)]}),ee=function(e){var t=e.links;return(0,o.jsxs)(B.View,{css:$.root,children:[(0,o.jsx)(M.Text,{children:"The following Apps will be affected:"}),(0,o.jsx)("ul",{css:$.list,children:t.items.map(function(e){return"Repl"===e.resource.__typename?(0,o.jsxs)("li",{children:[(0,o.jsx)(N.default,{size:16,iconUrl:e.resource.iconUrl,alt:e.resource.title}),(0,o.jsx)(l.default,{href:e.resource.url,target:"_blank",children:e.resource.title},e.id)]},e.id):null})}),(0,o.jsxs)(M.Text,{color:"dimmer",children:["Please refresh the App page, then Stop and Run the App",(0,o.jsx)("br",{})," to use the updated linked secrets."]})]})},et=function(e){var r=e.name,n=e.value,s=e.onSave,a=e.onCancel,l=e.onDelete,f=e.isNew,h=e.secrets,p=(0,u.useMemo)(function(){return h.find(function(e){return e.name===r})},[h,r]),m=null==p?void 0:p.links,v=(0,S.default)(),x=(0,i._)((0,u.useState)(r),2),g=x[0],_=x[1],j=(0,i._)((0,u.useState)(n),2),y=j[0],b=j[1],C=(0,i._)((0,u.useState)(!0),2),E=C[0],T=C[1],P=(0,i._)((0,u.useState)(!1),2),D=P[0],M=P[1],N=(0,i._)((0,u.useState)(!1),2),L=N[0],H=N[1],Z=(0,i._)((0,u.useState)(!1),2),K=Z[0],G=Z[1],Q=(0,u.useMemo)(function(){return null!==g.match(w.POSIX_ENV_VAR_PATTERN)},[g]),Y=(0,u.useMemo)(function(){return!h.some(function(e){return e.name===g&&e.name!==r})},[r,g,h]),et=(0,i._)((0,u.useState)(!1),2),er=et[0],en=et[1],es=(0,i._)((0,u.useState)(null),2),ei=es[0],ea=es[1];(0,u.useEffect)(function(){Y?!Q&&g?ea(w.POSIX_ENV_VAR_ERROR):ea(null):ea("Key must be unique")},[Y,Q,g]);var ec=(0,u.useCallback)(function(){return(0,t._)(function(){var e;return(0,c._)(this,function(t){switch(t.label){case 0:G(!0),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,l()];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),d.captureException(e),v.showError("Something went wrong. Please try again."),[3,4];case 4:return G(!1),[2]}})})()},[l,v]),eo=(0,u.useCallback)(function(){return(0,t._)(function(){return(0,c._)(this,function(e){switch(e.label){case 0:if(!Y||!Q)return[2];M(!0),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,s({name:g,value:y})];case 2:return e.sent(),[3,4];case 3:return ea(e.sent().message),[3,4];case 4:return M(!1),[2]}})})()},[Y,Q,g,y,s]);return(0,o.jsxs)(V.Form,{css:J.root,onSubmit:function(e){e.preventDefault(),eo()},children:[(0,o.jsxs)(B.View,{css:J.formFields,children:[(0,o.jsx)(B.View,{css:J.formField,children:(0,o.jsxs)(F.TextField,{validate:function(){return Y?!Q&&g?w.POSIX_ENV_VAR_ERROR:void 0:"Key must be unique"},validationBehavior:"aria",isRequired:!0,minLength:1,maxLength:128,name:"secretName",value:g,onChange:function(e){return _(e)},isInvalid:null!==ei,children:[(0,o.jsx)(I.Label,{color:"dimmer",multiline:!1,css:J.formFieldLabel,children:"Key"}),(0,o.jsx)(U.Input,{autoFocus:!0,autoComplete:"off","data-1p-ignore":!0}),(0,o.jsx)(k.FieldError,{children:ei})]})}),(0,o.jsx)(B.View,{css:J.formField,children:(0,o.jsxs)(F.TextField,{isRequired:!0,minLength:1,name:"secretValue",value:y,onChange:function(e){return b(e)},children:[(0,o.jsxs)(I.Label,{color:"dimmer",multiline:!1,css:J.formFieldLabel,children:["Value"," ",(0,o.jsx)(A.IconButton,{alt:E?"Hide":"Show",size:12,onClick:function(){return T(!E)},children:E?(0,o.jsx)(z.default,{}):(0,o.jsx)(W.default,{})})]}),(0,o.jsx)(U.Input,{"data-sensitive":E,autoComplete:"off"})]})})]}),(0,o.jsx)(B.View,{css:J.disclaimer,children:(0,o.jsx)(o.Fragment,{children:m&&m.totalCount>0?(0,o.jsxs)(B.View,{css:$.disclaimer,row:!0,align:"center",children:[(0,o.jsxs)(O.PopoverTrigger,{label:"affected-repls",isOpen:er,onOpenChange:en,placement:"bottom start",children:[(0,o.jsxs)("span",{css:$.clickableText,children:[m.totalCount," Repl",1===m.totalCount?"":"s"," "]}),(0,o.jsx)(ee,{links:m})]}),"will be affected by this change."]}):null})}),(0,o.jsxs)(B.View,{css:J.footer,children:[f?(0,o.jsx)("div",{}):(0,o.jsx)(R.Button,{text:"Delete",colorway:"negative",onClick:function(){return H(!0)},iconLeft:(0,o.jsx)(q.default,{})}),(0,o.jsxs)(B.View,{css:J.footerGroup,children:[(0,o.jsx)(R.Button,{text:"Cancel",onClick:a,disabled:D}),(0,o.jsx)(R.Button,{text:"Save",colorway:"primary",loading:D,disabled:!Y||!Q||!g.length,onClick:eo,type:"submit"})]})]}),(0,o.jsx)(X,{name:r,links:m,isOpen:L,onClose:function(){return H(!1)},onDelete:ec,isLoading:K})]})},er=function(){var e=(0,x.useCurrentUserId)(),t=(0,S.default)().showError,r=(0,i._)((0,p.useCreateSharedSecretsMutation)({update:function(r,i){var c,o=i.data;if((null==o||null==(c=o.createSharedSecrets)?void 0:c.__typename)==="CreateSharedSecretsResult"){var l=o.createSharedSecrets.createdSecrets;r.modify({id:r.identify({__typename:"CurrentUser",id:e}),fields:{secrets:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{items:[]},t=l.map(function(e){return r.writeFragment({data:e,fragment:p.SharedSecretFragmentDoc})});return(0,s._)((0,n._)({},e),{items:(0,a._)(t).concat((0,a._)(e.items))})}}})}else(null==o?void 0:o.createSharedSecrets)&&t(o.createSharedSecrets.message)},onError:function(e){t("Failed to create secret. Please try again."),d.captureException(e)}}),2);return[r[0],r[1]]},en=function(){var e=(0,x.useCurrentUserId)(),t=(0,S.default)().showError,r=(0,i._)((0,p.useUpdateSharedSecretsMutation)({update:function(r,i){var a,c=i.data;if((null==c||null==(a=c.updateSharedSecrets)?void 0:a.__typename)==="UpdateSharedSecretsResult"){var o=c.updateSharedSecrets.updatedSecrets;r.modify({id:r.identify({__typename:"CurrentUser",id:e}),fields:{secrets:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{items:[]},t=e.items.map(function(e){var t=o.find(function(t){return t.id===e.id});return t?r.writeFragment({data:t,fragment:p.SharedSecretFragmentDoc}):e});return(0,s._)((0,n._)({},e),{items:t})}}})}else(null==c?void 0:c.updateSharedSecrets)&&t(c.updateSharedSecrets.message)},onError:function(e){t("Failed to update secret. Please try again."),d.captureException(e)}}),2);return[r[0],r[1]]},es=function(){var e=(0,x.useCurrentUserId)(),t=(0,S.default)().showError,r=(0,i._)((0,p.useDeleteSharedSecretMutation)({update:function(r,i,a){var c,o=i.data,l=a.variables,u=null==l?void 0:l.id;u&&(null==o||null==(c=o.deleteSharedSecret)?void 0:c.__typename)==="DeleteSharedSecretResult"?r.modify({id:r.identify({__typename:"CurrentUser",id:e}),fields:{secrets:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{items:[]},t=(arguments.length>1?arguments[1]:void 0).readField;return(0,s._)((0,n._)({},e),{items:e.items.filter(function(e){return t("id",e)!==u})})}}}):(null==o?void 0:o.deleteSharedSecret)&&"message"in o.deleteSharedSecret&&t(o.deleteSharedSecret.message)},onError:function(e){t("Failed to delete secret. Please try again."),d.captureException(e)}}),2);return[r[0],r[1]]},ei=function(e){var r=e.id,a=e.name,l=e.value,d=e.timeUpdated,h=e.onRemoveSecret,p=e.secrets,x="0"===e.version,S=(0,i._)((0,u.useState)(x),2),w=S[0],_=S[1],j=(0,u.useRef)(null),y=(0,u.useCallback)(function(){setTimeout(function(){var e;return null==(e=j.current)?void 0:e.focus()},0)},[]),b=(0,i._)(er(),1)[0],C=(0,i._)(en(),1)[0],R=(0,i._)(es(),1)[0],E=(0,u.useCallback)(function(e){return(0,t._)(function(){return(0,c._)(this,function(t){switch(t.label){case 0:if(!x)return[3,2];return[4,b({variables:{input:{ownerType:m.SharedSecretOwnerType.Account,secrets:[e]}}})];case 1:return t.sent(),(0,g.track)(v.events.SHARED_SECRETS_USED,{ownerType:"account",action:"create",source:"account"}),[3,4];case 2:return[4,C({variables:{input:{ownerType:m.SharedSecretOwnerType.Account,secrets:[(0,s._)((0,n._)({},e),{id:r})]}}})];case 3:t.sent(),(0,g.track)(v.events.SHARED_SECRETS_USED,{ownerType:"account",action:"update",source:"account"}),t.label=4;case 4:return _(!1),[2]}})})()},[b,r,x,C]),T=(0,u.useCallback)(function(){_(!1),x?h():y()},[x,h,y]);return w||!d?(0,o.jsx)(et,{secrets:p,isNew:x,name:a,value:l,onDelete:function(){return(0,t._)(function(){return(0,c._)(this,function(e){switch(e.label){case 0:return[4,R({variables:{id:r}})];case 1:return e.sent(),(0,g.track)(v.events.SHARED_SECRETS_USED,{ownerType:"account",action:"delete",source:"account"}),h(),[2]}})})()},onSave:E,onCancel:T}):(0,o.jsxs)(B.View,{css:Q.secretItem,children:[(0,o.jsx)(B.View,{css:Q.secretName,children:a}),(0,o.jsx)(Y,{value:l}),(0,o.jsxs)(B.View,{css:Q.secretTimestamp,children:["Updated ",(0,f.format)(new Date(d),"MM/dd/yy")]}),(0,o.jsx)(B.View,{css:Q.secretEditContainer,align:"end",children:(0,o.jsx)(A.IconButton,{alt:"Edit",onClick:function(){return _(!0)},ref:j,children:(0,o.jsx)(L.default,{})})})]})};function ea(){var e,t,r,s=(0,p.useAccountSecretsQuery)().data,c=(0,i._)((0,u.useState)((null==s||null==(t=s.currentUser)||null==(e=t.secrets)?void 0:e.__typename)==="SharedSecretConnection"?s.currentUser.secrets.items:[]),2),l=c[0],d=c[1];(0,u.useEffect)(function(){var e,t;d((null==s||null==(t=s.currentUser)||null==(e=t.secrets)?void 0:e.__typename)==="SharedSecretConnection"?s.currentUser.secrets.items:[])},[null==s||null==(r=s.currentUser)?void 0:r.secrets]);var f=(0,u.useCallback)(function(){d(function(e){return[{__typename:"SharedSecret",id:"temp-".concat((0,h.v4)()),name:"",value:"",timeUpdated:new Date().toISOString(),timeCreated:new Date().toISOString(),version:"0"}].concat((0,a._)(e))})},[]),m=(0,u.useCallback)(function(e){d(function(t){return t.filter(function(t,r){return r!==e})})},[]);return(0,o.jsxs)(B.View,{gap:8,children:[(0,o.jsxs)(B.View,{row:!0,justify:"space-between",children:[(0,o.jsx)(B.View,{css:Q.titleWrapper,row:!0,gap:8,children:(0,o.jsx)(M.Text,{variant:"subheadBig",multiline:!1,children:"Account Secrets"})}),(0,o.jsx)(B.View,{align:"center",row:!0,gap:8,children:(0,o.jsx)(R.Button,{text:"New secret",iconLeft:(0,o.jsx)(Z.default,{}),size:"small",colorway:"primary",onClick:f})})]}),(0,o.jsxs)(D.Surface,{elevated:!0,css:Q.section,children:["Add secrets to your account to access them in any of your Apps.",0===l.length?(0,o.jsxs)(B.View,{css:Q.emptyState,gap:8,children:[(0,o.jsx)(H.default,{size:24,color:j.tokens.foregroundDimmest}),(0,o.jsx)(M.Text,{color:"dimmer",children:"You haven't added any account secrets yet."})]}):(0,o.jsx)(D.Surface,{elevated:!0,css:Q.secretList,children:l.map(function(e,t){return(0,o.jsx)(ei,(0,n._)({secrets:l,onRemoveSecret:function(){return m(t)}},e),e.id)})})]})]})}e.s(["default",()=>ea,"useCreateSharedSecretsWithCache",()=>er,"useUpdateSharedSecretsWithCache",()=>en])}]);

//# debugId=d6685ed9-3bc6-d48f-3dfb-322d69d1148f
//# sourceMappingURL=d16db96b4d468d30.js.map