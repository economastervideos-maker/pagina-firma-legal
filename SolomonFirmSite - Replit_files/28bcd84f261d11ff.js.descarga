;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="a61b46fc-718f-fe80-9e09-ec56181b73ce")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,571383,558273,e=>{"use strict";var n=e.i(878420),t=e.i(64386),r=e.i(276385),i=e.i(606867);function a(e){return(0,r.jsx)(i.default,(0,t._)((0,n._)({},e),{children:(0,r.jsx)("path",{d:"M22.495 11.02 12.93 1.415a1.41 1.41 0 0 0-1.538-.307 1.41 1.41 0 0 0-.457.307L8.948 3.409l2.52 2.531a1.667 1.667 0 0 1 1.724.403 1.687 1.687 0 0 1 .398 1.741l2.428 2.44a1.667 1.667 0 0 1 1.734.4 1.686 1.686 0 0 1 0 2.383 1.676 1.676 0 0 1-1.83.366 1.677 1.677 0 0 1-1.003-1.227 1.694 1.694 0 0 1 .093-.972L12.747 9.2v5.985a1.677 1.677 0 0 1 .936 1.51c0 .448-.176.877-.491 1.193a1.674 1.674 0 0 1-2.738-.547 1.69 1.69 0 0 1 .913-2.205v-6.04a1.69 1.69 0 0 1-.912-2.211L7.973 4.388l-6.559 6.586a1.417 1.417 0 0 0-.306 1.545c.071.172.175.328.306.46l9.566 9.605a1.41 1.41 0 0 0 1.995 0l9.52-9.56a1.42 1.42 0 0 0 0-2.005Z"})}))}function o(e){return(0,r.jsxs)(i.default,(0,t._)((0,n._)({},e),{children:[(0,r.jsx)("path",{fillRule:"evenodd",d:"M15.315 3.373a2.326 2.326 0 0 0-3.245 0l-8.652 8.485a.776.776 0 0 1-1.082 0 .74.74 0 0 1 0-1.06l8.653-8.486a3.877 3.877 0 0 1 5.407 0 3.7 3.7 0 0 1 1.083 3.182 3.865 3.865 0 0 1 3.244 1.06l.045.046a3.698 3.698 0 0 1 0 5.303l-7.826 7.673a.246.246 0 0 0 0 .354l1.607 1.576a.74.74 0 0 1 0 1.061.776.776 0 0 1-1.081 0l-1.607-1.576a1.726 1.726 0 0 1 0-2.475l7.825-7.675a2.219 2.219 0 0 0 0-3.182l-.045-.044a2.326 2.326 0 0 0-3.242-.002l-6.447 6.322-.001.002-.088.087a.776.776 0 0 1-1.083 0 .74.74 0 0 1 0-1.06l6.538-6.412a2.218 2.218 0 0 0-.003-3.18Z",clipRule:"evenodd"}),(0,r.jsx)("path",{fillRule:"evenodd",d:"M14.234 5.494a.74.74 0 0 0 0-1.06.776.776 0 0 0-1.082 0l-6.4 6.275a3.698 3.698 0 0 0 0 5.304 3.878 3.878 0 0 0 5.408 0l6.4-6.276a.738.738 0 0 0 0-1.061.776.776 0 0 0-1.082 0l-6.4 6.276a2.326 2.326 0 0 1-3.244 0 2.219 2.219 0 0 1 0-3.182l6.4-6.276Z",clipRule:"evenodd"})]}))}e.s(["default",()=>a],571383),e.s(["default",()=>o],558273)},163355,e=>{"use strict";var n=e.i(297083),t=e.i(878420),r=e.i(64386),i=e.i(530658),a=e.i(817556),o=e.i(389959),s=e.i(507491),l=function(e){var l=e.refetch,u=e.onConnectionCreated,c=(0,i._)((0,s.useCreateConnectionMutation)(),1)[0],d=(0,i._)((0,s.useDeleteConnectionMutation)(),1)[0];return{handleDelete:(0,o.useCallback)(function(e){return(0,n._)(function(){return(0,a._)(this,function(n){switch(n.label){case 0:return[4,d({variables:{input:{connectionId:e,orgId:null}},optimisticResponse:{__typename:"RootMutationType",deleteConnection:{__typename:"DeleteConnection",success:!0}},update:function(n){try{var i,a=n.readQuery({query:s.UserConnectorsPageDocument});if((null==a||null==(i=a.currentUser)?void 0:i.__typename)==="CurrentUser"){var o=a.currentUser.connectorContext.connections.filter(function(n){return n.connectionId!==e});n.writeQuery({query:s.UserConnectorsPageDocument,data:{currentUser:(0,r._)((0,t._)({},a.currentUser),{connectorContext:(0,r._)((0,t._)({},a.currentUser.connectorContext),{connections:o})})}})}}catch(e){}}})];case 1:return n.sent(),[4,l()];case 2:return n.sent(),[2]}})})()},[d,l]),handleEvent:(0,o.useCallback)(function(e){return(0,n._)(function(){return(0,a._)(this,function(n){switch(n.label){case 0:if("connect.connection-connected"!==e.name)return[3,3];return[4,c({variables:{input:{connectionId:e.data.connection_id,orgId:null}}})];case 1:return n.sent(),[4,l()];case 2:n.sent(),null==u||u(),n.label=3;case 3:return[2]}})})()},[c,l,u])}};e.s(["usePersonalConnectorMutations",()=>l])},109900,e=>{"use strict";var n=e.i(346715),t=e.i(276385),r=e.i(878420),i=e.i(569384),a=e.i(973245),o=e.i(304277);e.i(566901);var s=e.i(520112);function l(){var e=(0,i._)(["\n  query GitProvidersSection {\n    currentUser {\n      ... on CurrentUser {\n        id\n        connectorContext {\n          __typename\n          ...ConnectorContext\n          ... on Error {\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return l=function(){return e},e}var u={},c=(0,a.gql)(l(),s.ConnectorContextFragmentDoc),d=e.i(917063),p=e.i(163355),h=e.i(993796),m=e.i(882793),x=e.i(960178),v=e.i(625484),f=e.i(571383),g=[],C=function(e){var i,a,s,l,C,y=e.query,j=(0,h.useFlag)({controlName:"flag-github-connection-migration"}),w=(0,h.useFlag)({controlName:"flag-source-control-integrations"}),b=(i={ssr:!1},a=(0,r._)({},u,i),o.useQuery(c,a)),_=b.data,T=b.refetch,S=(0,p.usePersonalConnectorMutations)({refetch:T}),V=S.handleDelete,k=S.handleEvent;if(!j)return null;var R=(0,n._)(m.VERSION_CONTROL_CONNECTORS);w||(R=R.filter(function(e){return"GITHUB_SOURCE_CONTROL"===e}));var P=(null==_||null==(s=_.currentUser)?void 0:s.__typename)==="CurrentUser"?_.currentUser.connectorContext:null,M=(null==P?void 0:P.__typename)==="CurrentUserConnectorContext"?P.openIntClientToken:null,L=(null==P?void 0:P.__typename)==="CurrentUserConnectorContext"&&null!=(l=P.connections)?l:g,U=(null==P?void 0:P.__typename)==="CurrentUserConnectorContext"&&null!=(C=P.connectorConfigs)?C:g;return M?(0,t.jsxs)(v.View,{gap:8,children:[(0,t.jsxs)(v.View,{gap:4,children:[(0,t.jsxs)(v.View,{row:!0,gap:8,align:"center",children:[(0,t.jsx)(f.default,{size:24}),(0,t.jsx)(x.Header,{level:2,variant:"subheadBig",children:"Git Providers"})]}),(0,t.jsx)(x.Text,{color:"dimmer",children:"Connect your version control tools to use for authenticating to git remotes in your apps. Not accessible to Replit Agent."})]}),(0,t.jsx)(d.ConnectorsShared,{token:M,connectorConfigs:U,connections:L,onDelete:V,onEvent:k,query:y,shouldShowConnectButton:!1,whitelist:R})]}):null};e.s(["GitProvidersSection",()=>C],109900)},344782,e=>{"use strict";var n=e.i(530658),t=e.i(276385),r=e.i(412160),i=e.i(389959),a=e.i(878420),o=e.i(569384),s=e.i(973245),l=e.i(304277);e.i(566901);var u=e.i(520112);function c(){var e=(0,o._)(["\n  query McpServersSection {\n    currentUser {\n      ... on CurrentUser {\n        id\n        connectorContext {\n          __typename\n          ...ConnectorContext\n          ... on Error {\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var d={},p=(0,s.gql)(c(),u.ConnectorContextFragmentDoc),h=e.i(917063),m=e.i(882793),x=e.i(297083),v=e.i(346715),f=e.i(817556),g=e.i(951262);function C(){var e=(0,o._)(['\n  query CustomMcpConnectorInfo {\n    getUserConnectorByName(connectorName: "custom-mcp") {\n      ... on UserConnector {\n        type\n        name\n        connectionSettings\n      }\n    }\n  }\n']);return C=function(){return e},e}function y(){var e=(0,o._)(["\n  mutation CreateCustomMcpConnection($input: CreateApiKeyConnectionInput!) {\n    createApiKeyConnection(input: $input) {\n      ... on CreateApiKeyConnectionResult {\n        connectionId\n      }\n      ... on UserError {\n        message\n      }\n      ... on ServiceUnavailable {\n        message\n      }\n    }\n  }\n"]);return y=function(){return e},e}var j={},w=(0,s.gql)(C()),b=(0,s.gql)(y()),_=e.i(322823),T=e.i(222342),S=e.i(613355),V=e.i(140487),k=e.i(136540),R=e.i(607278),P=e.i(818503),M=e.i(739521),L=e.i(624782),U=e.i(396776),N=e.i(960178),E=e.i(625484),I=e.i(952030),q=e.i(703505),O=e.i(42458),A=[S.rcss.color.accentNegativeDefault],B=[S.rcss.color.orangeDefault],D=function(e){return e.trim()?null:{message:"Please enter a display name for this MCP server",severity:"error"}},F=function(e){if(!e.trim())return{message:"Please enter an MCP server URL",severity:"error"};try{var n=new URL(e);if("https:"!==n.protocol)return{message:"MCP server URL must use HTTPS for security",severity:"error"}}catch(e){return{message:"Please enter a valid URL",severity:"error"}}return null},z=function(e){if(e.filter(function(e){return""!==e.key.trim()&&""===e.value.trim()||""===e.key.trim()&&""!==e.value.trim()}).length>0)return{message:"Please provide both name and value for all headers or remove them",severity:"error"};var n=new Set,t=new Set;return(e.forEach(function(e){var r=e.key.trim().toLowerCase();r&&t.has(r)&&n.add(e.key.trim()),r&&t.add(r)}),n.size>0)?{message:"Duplicate header keys found: ".concat(Array.from(n).join(", ")),severity:"warning"}:null};function H(e){var r,o,s,u,c,d,p,h=e.isOpen,m=e.onRequestClose,C=e.onSuccess,y=e.initialParams,S=(0,_.useFormField)(null!=(c=null==y?void 0:y.displayName)?c:"",D),H=(0,_.useFormField)(null!=(d=null==y?void 0:y.baseUrl)?d:"",F),G=(0,_.useFormField)(null!=(p=null==y?void 0:y.headers)?p:[],z),K=(0,n._)((0,i.useState)(null),2),W=K[0],Q=K[1],Z=(0,T.default)().showConfirm,X=(r={skip:!h},o=(0,a._)({},j,r),l.useQuery(w,o)).loading,Y=(0,n._)((s={onCompleted:function(e){"CreateApiKeyConnectionResult"===e.createApiKeyConnection.__typename?(Z("Custom MCP server added successfully!"),et(),null==C||C()):Q(e.createApiKeyConnection.message)},onError:function(e){Q(e.message)}},u=(0,a._)({},j,s),g.useMutation(b,u)),2),$=Y[0],J=Y[1].loading,ee=function(e){G.setValue(G.value.filter(function(n,t){return t!==e}))},en=function(e,n,t){var r=(0,v._)(G.value);r[e][n]=t,G.setValue(r)},et=function(){S.setValue("",{preventTouch:!0,preventValidation:!0}),H.setValue("",{preventTouch:!0,preventValidation:!0}),G.setValue([],{preventTouch:!0,preventValidation:!0}),S.setTouched(!1),H.setTouched(!1),G.setTouched(!1),Q(null),m()},er=J||X||!!S.error||!!H.error||!!G.error;return(0,t.jsx)(M.Modal,{isOpen:h,onRequestClose:et,centered:!0,maxWidth:600,preventClose:J,children:(0,t.jsxs)(E.View,{gap:24,p:16,children:[(0,t.jsxs)(E.View,{gap:8,children:[(0,t.jsxs)(E.View,{row:!0,gap:8,align:"center",children:[(0,t.jsx)(N.Header,{level:2,variant:"headerDefault",children:"Add Custom MCP Server"}),(0,t.jsx)(L.Pill,{text:"Beta",colorway:"primary"})]}),(0,t.jsx)(N.Text,{color:"dimmer",children:"Connect to any MCP server by providing the URL and authentication headers."})]}),(0,t.jsxs)(E.View,{gap:20,children:[(0,t.jsxs)(E.View,{gap:4,children:[(0,t.jsx)(P.Label,{variant:"text",htmlFor:"mcp-display-name",children:"Display Name *"}),(0,t.jsx)(R.Input,{id:"mcp-display-name",placeholder:"My MCP Server",value:S.value,onChange:function(e){return S.setValue(e.target.value,{preventValidation:!0})},onBlur:S.handleBlur,disabled:J}),S.error?(0,t.jsx)(N.Text,{css:A,variant:"small",children:S.error.message}):(0,t.jsx)(N.Text,{color:"dimmer",variant:"small",children:"A name to identify this MCP server"})]}),(0,t.jsxs)(E.View,{gap:4,children:[(0,t.jsx)(P.Label,{variant:"text",htmlFor:"mcp-base-url",children:"MCP Server URL *"}),(0,t.jsx)(R.Input,{id:"mcp-base-url",placeholder:"https://mcp.example.com",value:H.value,onChange:function(e){return H.setValue(e.target.value,{preventValidation:!0})},onBlur:H.handleBlur,disabled:J}),H.error?(0,t.jsx)(N.Text,{css:A,variant:"small",children:H.error.message}):(0,t.jsx)(N.Text,{color:"dimmer",variant:"small",children:"The base URL of your MCP server"})]}),(0,t.jsxs)(E.View,{gap:8,children:[(0,t.jsxs)(E.View,{row:!0,align:"center",justify:"space-between",children:[(0,t.jsx)(P.Label,{variant:"text",children:"Custom Headers"}),(0,t.jsx)(V.Button,{text:"Add Header",variant:"outlined",size:"small",iconLeft:(0,t.jsx)(I.default,{}),onClick:function(){G.setValue((0,v._)(G.value).concat([{key:"",value:""}]))},disabled:J})]}),G.value.map(function(e,n){return(0,t.jsx)(E.View,{gap:8,children:(0,t.jsxs)(E.View,{row:!0,gap:8,align:"end",children:[(0,t.jsxs)(E.View,{gap:4,style:{flex:1},children:[(0,t.jsx)(P.Label,{variant:"text",htmlFor:"header-key-".concat(n),children:"Name"}),(0,t.jsx)(R.Input,{id:"header-key-".concat(n),placeholder:"X-Custom-Header",value:e.key,onChange:function(e){return en(n,"key",e.target.value)},disabled:J})]}),(0,t.jsxs)(E.View,{gap:4,style:{flex:2},children:[(0,t.jsx)(P.Label,{variant:"text",htmlFor:"header-value-".concat(n),children:"Value"}),(0,t.jsx)(R.Input,{id:"header-value-".concat(n),type:"authorization"===e.key.toLowerCase()?"password":"text",placeholder:"authorization"===e.key.toLowerCase()?"Bearer your-token-here":"Header Value",value:e.value,onChange:function(e){return en(n,"value",e.target.value)},disabled:J})]}),(0,t.jsx)(k.IconButton,{alt:"Remove header",onClick:function(){return ee(n)},disabled:J,children:(0,t.jsx)(q.default,{})})]})},n)}),G.error?(0,t.jsx)(N.Text,{css:A,variant:"small",children:G.error.message}):null,!G.error&&G.warning?(0,t.jsx)(N.Text,{css:B,variant:"small",children:G.warning.message}):null,G.error||G.warning?null:(0,t.jsx)(N.Text,{color:"dimmer",variant:"small",children:"Add headers for authentication (e.g., Authorization, X-API-Key)"})]}),W?(0,t.jsx)(U.StatusBanner,{text:W,colorway:"negative",icon:(0,t.jsx)(O.default,{})}):null]}),(0,t.jsxs)(E.View,{row:!0,gap:12,justify:"end",children:[(0,t.jsx)(V.Button,{variant:"outlined",text:"Cancel",onClick:et,disabled:J}),(0,t.jsx)(V.Button,{text:J?"Saving...":"Save",colorway:"primary",onClick:function(){return(0,x._)(function(){var e,n,t;return(0,f._)(this,function(r){switch(r.label){case 0:return Q(null),[4,S.validate()];case 1:return e=r.sent(),[4,H.validate()];case 2:return n=r.sent(),[4,G.validate()];case 3:if(t=r.sent(),e||n||t)return[2];return[4,$({variables:{input:{connectorName:"CUSTOM_MCP",config:{base_url:H.value,headers:G.value.filter(function(e){return""!==e.key.trim()&&""!==e.value.trim()}).map(function(e){return{key:e.key.trim(),value:e.value.trim()}})},displayName:S.value.trim()}}})];case 4:return r.sent(),[2]}})})()},disabled:er,loading:J})]})]})})}var G=e.i(886513),K=e.i(399528),W=e.i(960933),Q=e.i(862927),Z=W.Type.Object({key:W.Type.String({minLength:1}),value:W.Type.String()}),X=W.Type.Object({displayName:W.Type.String({minLength:1,maxLength:1e3}),baseUrl:W.Type.String({minLength:1}),headers:W.Type.Optional(W.Type.Array(Z,{maxItems:20}))});function Y(e){var n="string"==typeof e.mcp?e.mcp:null;if(!n)return null;try{var t=atob(n),r=JSON.parse(t);if(!Q.Value.Check(X,r))return null;var i=new URL(r.baseUrl);if("https:"!==i.protocol)return null;return{displayName:r.displayName,baseUrl:r.baseUrl,headers:r.headers||[]}}catch(e){return null}}var $=e.i(163355),J=e.i(167626),ee=e.i(858248),en=e.i(709485),et=e.i(734882),er=e.i(616278);function ei(e){var r=e.isOpen,o=e.onRequestClose,s=(0,n._)((0,i.useState)(""),2),l=s[0],u=s[1],c=(0,n._)((0,i.useState)(""),2),d=c[0],p=c[1],h=(0,n._)((0,i.useState)(""),2),m=h[0],v=h[1],g=(0,n._)((0,i.useState)(""),2),C=g[0],y=g[1],j=(0,n._)((0,i.useState)(!1),2),w=j[0],b=j[1],_=(0,n._)((0,i.useState)(null),2),T=_[0],S=_[1],k=function(){u(""),p(""),v(""),y(""),S(null)},L=function(){w||(k(),o())},I=!l||!m||w;return(0,t.jsx)(M.Modal,{isOpen:r,onRequestClose:L,centered:!0,maxWidth:600,preventClose:w,children:(0,t.jsxs)(E.View,{gap:24,p:16,children:[(0,t.jsxs)(E.View,{gap:8,children:[(0,t.jsx)(N.Header,{level:2,variant:"headerDefault",children:"MCP server interest"}),(0,t.jsx)(N.Text,{color:"dimmer",children:"Help us understand what you'd like to do with MCP servers in Replit. Your feedback will guide our MCP integration roadmap."})]}),(0,t.jsxs)(E.View,{gap:20,children:[(0,t.jsxs)(E.View,{gap:4,children:[(0,t.jsx)(P.Label,{variant:"text",children:"How do you prefer to set up MCP servers? *"}),(0,t.jsx)(et.RadioGroup,{name:"setup-preference",value:l,onChange:function(e){return u(e.target.value)},disabled:w,children:(0,t.jsxs)(E.View,{gap:8,children:[(0,t.jsxs)(E.View,{row:!0,gap:8,align:"center",children:[(0,t.jsx)(et.Radio,{id:"setup-preconfigured",value:"preconfigured",disabled:w}),(0,t.jsx)(P.Label,{htmlFor:"setup-preconfigured",children:"Pre-configured servers (just click to enable)"})]}),(0,t.jsxs)(E.View,{row:!0,gap:8,align:"center",children:[(0,t.jsx)(et.Radio,{id:"setup-remote",value:"remote",disabled:w}),(0,t.jsx)(P.Label,{htmlFor:"setup-remote",children:"Custom remote servers (provide URL/endpoint)"})]}),(0,t.jsxs)(E.View,{row:!0,gap:8,align:"center",children:[(0,t.jsx)(et.Radio,{id:"setup-local",value:"local",disabled:w}),(0,t.jsx)(P.Label,{htmlFor:"setup-local",children:"Local servers (run in my App)"})]}),(0,t.jsxs)(E.View,{row:!0,gap:8,align:"center",children:[(0,t.jsx)(et.Radio,{id:"setup-unsure",value:"unsure",disabled:w}),(0,t.jsx)(P.Label,{htmlFor:"setup-unsure",children:"Not sure yet"})]})]})})]}),(0,t.jsxs)(E.View,{gap:4,children:[(0,t.jsx)(P.Label,{variant:"text",htmlFor:"specific-servers",children:"What specific MCP servers would you like to use?"}),(0,t.jsx)(R.Input,{placeholder:"e.g. Miro, Notion, Obsidian, etc.",id:"specific-servers",value:d,onChange:function(e){return p(e.target.value)},disabled:w,maxLength:200}),(0,t.jsxs)(N.Text,{color:"dimmer",variant:"small",children:[d.length,"/200 characters"]})]}),(0,t.jsxs)(E.View,{gap:4,children:[(0,t.jsx)(P.Label,{variant:"text",children:"What's your comfort level with MCP configuration? *"}),(0,t.jsx)(et.RadioGroup,{name:"comfort-level",value:m,onChange:function(e){return v(e.target.value)},disabled:w,children:(0,t.jsxs)(E.View,{gap:8,children:[(0,t.jsxs)(E.View,{row:!0,gap:8,align:"center",children:[(0,t.jsx)(et.Radio,{id:"comfort-very",value:"very-comfortable",disabled:w}),(0,t.jsx)(P.Label,{htmlFor:"comfort-very",children:"I can write custom configuration files"})]}),(0,t.jsxs)(E.View,{row:!0,gap:8,align:"center",children:[(0,t.jsx)(et.Radio,{id:"comfort-not-very",value:"not-very-comfortable",disabled:w}),(0,t.jsx)(P.Label,{htmlFor:"comfort-not-very",children:"I need guided setup"})]}),(0,t.jsxs)(E.View,{row:!0,gap:8,align:"center",children:[(0,t.jsx)(et.Radio,{id:"comfort-no-experience",value:"no-experience",disabled:w}),(0,t.jsx)(P.Label,{htmlFor:"comfort-no-experience",children:"No experience with MCP yet"})]})]})})]}),(0,t.jsxs)(E.View,{gap:4,children:[(0,t.jsx)(P.Label,{variant:"text",htmlFor:"additional-feedback",children:"Any other feedback or feature requests?"}),(0,t.jsx)(R.MultiLineInput,{id:"additional-feedback",value:C,onChange:function(e){return y(e.target.value)},disabled:w,rows:3,maxLength:500}),(0,t.jsxs)(N.Text,{color:"dimmer",variant:"small",children:[C.length,"/500 characters"]})]})]}),(0,t.jsxs)(E.View,{gap:12,children:[T?(0,t.jsx)(U.StatusBanner,{text:T.text,colorway:"success"===T.type?"positive":"negative",icon:"success"===T.type?(0,t.jsx)(er.default,{}):(0,t.jsx)(O.default,{})}):null,(0,t.jsxs)(E.View,{row:!0,gap:12,justify:"end",children:[(0,t.jsx)(V.Button,{variant:"outlined",text:"Cancel",onClick:L,disabled:w}),(0,t.jsx)(V.Button,{text:"Submit feedback",colorway:"primary",onClick:function(){return(0,x._)(function(){var e;return(0,f._)(this,function(n){switch(n.label){case 0:if(!l||!m)return S({type:"error",text:"Please answer all required questions."}),[2];b(!0),S(null),n.label=1;case 1:return n.trys.push([1,3,4,5]),(0,ee.track)(en.events.MCP_INTEREST_SUBMITTED,(0,a._)({setupPreference:l,comfortLevel:m},d.trim()&&{specificServers:d.trim()},C.trim()&&{additionalFeedback:C.trim()})),S({type:"success",text:"Thank you for your feedback! We'll use this to improve our MCP support."}),[4,new Promise(function(e){return setTimeout(e,2e3)})];case 2:return n.sent(),o(),k(),[3,5];case 3:return e=n.sent(),S({type:"error",text:(0,J._)(e,Error)?e.message:"Failed to submit your feedback. Please try again."}),[3,5];case 4:return b(!1),[7];case 5:return[2]}})})()},disabled:I,loading:w})]})]})]})})}var ea=e.i(993796),eo=e.i(325990),es=e.i(903283),el=e.i(558273),eu=[],ec=function(e){var o,s,u,c,x,v,f,g,C,y,j,w,b=e.query,_=(0,n._)((0,i.useState)(!1),2),T=_[0],S=_[1],k=(0,n._)((0,i.useState)(!1),2),R=k[0],P=k[1],M=(o={ssr:!1},s=(0,a._)({},d,o),l.useQuery(p,s)),q=M.data,O=M.refetch,A=(0,$.usePersonalConnectorMutations)({refetch:O}),B=A.handleDelete,D=A.handleEvent,F=(0,ea.useFlag)({controlName:"flag-custom-mcp-servers"}),z=(0,eo.useOrgFlag)({controlName:"flag-org-custom-mcp-servers"}),W=F||z,Q=(0,i.useMemo)(function(){return Array.from(m.MCP_CONNECTORS).filter(function(e){return"CUSTOM_MCP"!==e||W})},[W]),Z=(u=(0,K.useRouter)(),x=(c=(0,n._)((0,i.useState)(!1),2))[0],v=c[1],g=(f=(0,n._)((0,i.useState)(!1),2))[0],C=f[1],(0,i.useEffect)(function(){g||R||Y(u.query)&&(v(!0),C(!0))},[R,g,u.query]),{shouldAutoOpen:x,getDeeplinkParams:function(){return Y(u.query)},clearDeeplinkParams:function(){var e=u.query,n=(e.mcp,(0,G._)(e,["mcp"]));u.replace({pathname:u.pathname,query:n},void 0,{shallow:!0}),v(!1)}}),X=Z.shouldAutoOpen,J=Z.getDeeplinkParams,ee=Z.clearDeeplinkParams;(0,i.useEffect)(function(){X&&W&&!R&&P(!0)},[X,R,W]);var en=J(),et=(null==q||null==(y=q.currentUser)?void 0:y.__typename)==="CurrentUser"?q.currentUser.connectorContext:null,er=(null==et?void 0:et.__typename)==="CurrentUserConnectorContext"?et.openIntClientToken:null,ec=(null==et?void 0:et.__typename)==="CurrentUserConnectorContext"?(null!=(j=et.connections)?j:eu).filter(function(e){return m.MCP_CONNECTORS.has(e.connectorName)}):eu,ed=(null==et?void 0:et.__typename)==="CurrentUserConnectorContext"?(null!=(w=et.connectorConfigs)?w:eu).filter(function(e){return e.connectorName&&m.MCP_CONNECTORS.has(e.connectorName)}):eu;return er?(0,t.jsxs)(E.View,{gap:8,children:[(0,t.jsxs)(E.View,{gap:4,children:[(0,t.jsxs)(E.View,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,t.jsxs)(E.View,{row:!0,gap:8,align:"center",children:[(0,t.jsx)(el.default,{size:24}),(0,t.jsx)(N.Header,{level:2,variant:"subheadBig",children:"MCP Servers for Replit Agent"}),(0,t.jsx)(L.Pill,{text:"Beta",colorway:"primary"})]}),W?(0,t.jsx)(V.Button,{text:"Add Custom MCP",variant:"outlined",size:"small",iconLeft:(0,t.jsx)(I.default,{}),onClick:function(){return P(!0)}}):null]}),(0,t.jsxs)(N.Text,{color:"dimmer",children:["Provide external context and tools to Replit Agent by connecting to"," ",(0,t.jsx)(r.default,{href:"https://modelcontextprotocol.io/",target:"_blank",children:"external MCP servers"}),"."]})]}),(0,t.jsx)(h.ConnectorsShared,{token:er,connectorConfigs:ed,connections:ec,onDelete:B,onEvent:D,query:b,shouldShowConnectButton:!1,whitelist:Q}),(0,t.jsx)(E.View,{pt:12,children:(0,t.jsx)(U.StatusBanner,{icon:(0,t.jsx)(es.default,{}),title:"Want support for more MCPs?",text:"Tell us what MCP servers you'd like to use in Replit",action:(0,t.jsx)(V.Button,{text:"Share feedback",variant:"outlined",colorway:"primary",size:"small",onClick:function(){return S(!0)}})})}),(0,t.jsx)(ei,{isOpen:T,onRequestClose:function(){return S(!1)}}),W?(0,t.jsx)(H,{isOpen:R,onRequestClose:function(){P(!1),ee()},onSuccess:O,initialParams:en}):null]}):null};e.s(["McpServersSection",()=>ec],344782)},24290,e=>{"use strict";var n=e.i(276385),t=e.i(389959),r=e.i(415756),i=e.i(858248),a=e.i(709485),o=e.i(882793),s=e.i(140487),l=e.i(91720),u=e.i(734582),c=e.i(272119),d=e.i(423828),p=e.i(960178),h=e.i(625484),m=e.i(243914),x=function(e){var x=e.query,v=e.openPane,f=(0,t.useMemo)(function(){return new r.Fzf(o.REPLIT_MANAGED_SERVICES,{fuzzy:!1,selector:function(e){return"".concat(e.name," ").concat(e.type)}})},[]),g=(0,t.useMemo)(function(){return x?f.find(x).map(function(e){return e.item}):o.REPLIT_MANAGED_SERVICES},[f,x]);return(0,n.jsx)(u.IndexTable,{autoLayout:!1,title:"",columns:[{key:"name",label:"Name",allowSorting:!1,width:200,isRowHeader:!0},{key:"type",label:"Type",allowSorting:!1,minWidth:118},{key:"actions",label:"",allowSorting:!1,width:118}],items:g,children:function(e){return(0,n.jsxs)(d.TableRow,{id:e.id,children:[(0,n.jsx)(c.TableCell,{children:(0,n.jsxs)(h.View,{gap:8,row:!0,align:"center",children:[e.icon,(0,n.jsx)(p.Text,{children:e.name})]})},"name"),(0,n.jsx)(c.TableCell,{children:(0,n.jsx)(p.Text,{color:"dimmer",children:e.type})},"type"),(0,n.jsx)(c.TableCell,{children:(0,n.jsx)(h.View,{row:!0,justify:"end",children:v?(0,n.jsx)(s.Button,{iconLeft:(0,n.jsx)(m.default,{size:12}),text:"Open",onClick:function(){(0,i.track)(a.events.REPLIT_MANAGED_SERVICE_CLICKED,{serviceName:e.name,serviceType:e.type,actionType:"open",source:"workspace"}),v(e.pane)},size:"small"}):(0,n.jsx)(l.ButtonLink,{href:e.link,iconLeft:(0,n.jsx)(m.default,{size:12}),text:"Learn more",size:"small",target:"_blank",onClick:function(){(0,i.track)(a.events.REPLIT_MANAGED_SERVICE_CLICKED,{serviceName:e.name,serviceType:e.type,actionType:"learn_more",source:"external"})}})})},"actions")]},e.id)}})};e.s(["ReplitManagedTable",()=>x])},696263,e=>{"use strict";var n=e.i(297083),t=e.i(167626),r=e.i(530658),i=e.i(817556),a=e.i(276385),o=e.i(389959),s=e.i(507491),l=e.i(140487),u=e.i(607278),c=e.i(818503),d=e.i(739521),p=e.i(396776),h=e.i(960178),m=e.i(625484),x=e.i(616278),v=e.i(42458);function f(e){var f=e.isOpen,g=e.onRequestClose,C=(0,r._)((0,o.useState)(""),2),y=C[0],j=C[1],w=(0,r._)((0,o.useState)(""),2),b=w[0],_=w[1],T=(0,r._)((0,o.useState)(!1),2),S=T[0],V=T[1],k=(0,r._)((0,o.useState)(null),2),R=k[0],P=k[1],M=(0,r._)((0,s.useRequestNewConnectorMutation)(),1)[0],L=(0,o.useRef)(null),U=function(){j(""),_(""),P(null)};(0,o.useEffect)(function(){return function(){L.current&&(clearTimeout(L.current),L.current=null)}},[]);var N=function(){S||(U(),g())},E=!y.trim()||!b.trim()||S;return(0,a.jsx)(d.Modal,{isOpen:f,onRequestClose:N,centered:!0,maxWidth:500,preventClose:S,children:(0,a.jsxs)(m.View,{gap:24,p:16,children:[(0,a.jsxs)(m.View,{gap:8,children:[(0,a.jsx)(h.Header,{level:2,variant:"headerDefault",children:"Request a new integration"}),(0,a.jsx)(h.Text,{color:"dimmer",children:"Tell us about an integration you'd like to see added to Replit. We'll review your request and consider it for future development."})]}),(0,a.jsxs)(m.View,{gap:16,children:[(0,a.jsxs)(m.View,{gap:4,children:[(0,a.jsx)(c.Label,{variant:"text",htmlFor:"integration-name",children:"Integration Name"}),(0,a.jsx)(u.Input,{placeholder:"e.g., Notion, Google Docs, Slack, etc.",id:"integration-name",value:y,onChange:function(e){return j(e.target.value)},disabled:S,maxLength:100})]}),(0,a.jsxs)(m.View,{gap:4,children:[(0,a.jsx)(c.Label,{variant:"text",htmlFor:"use-case-description",children:"Use Case Description"}),(0,a.jsx)(u.MultiLineInput,{placeholder:"Describe how you would use this integration and what specific functionality you need...",id:"use-case-description",value:b,onChange:function(e){return _(e.target.value)},disabled:S,rows:4,maxLength:1e3}),(0,a.jsxs)(h.Text,{color:"dimmer",variant:"small",children:[b.length,"/1000 characters"]})]})]}),(0,a.jsxs)(m.View,{gap:12,children:[R?(0,a.jsx)(p.StatusBanner,{text:R.text,colorway:"success"===R.type?"positive":"negative",icon:"success"===R.type?(0,a.jsx)(x.default,{}):(0,a.jsx)(v.default,{})}):null,(0,a.jsxs)(m.View,{row:!0,gap:12,justify:"end",children:[(0,a.jsx)(l.Button,{variant:"outlined",text:"Cancel",onClick:N,disabled:S}),(0,a.jsx)(l.Button,{text:"Submit request",colorway:"primary",onClick:function(){return(0,n._)(function(){var e;return(0,i._)(this,function(n){switch(n.label){case 0:if(!y.trim()||!b.trim())return[2];V(!0),P(null),n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,M({variables:{input:{connectorName:y.trim(),description:b.trim()}}})];case 2:return n.sent(),P({type:"success",text:"Your integration request has been submitted successfully! We'll review it and consider it for future development."}),[3,5];case 3:return e=n.sent(),P({type:"error",text:(0,t._)(e,Error)?e.message:"Failed to submit your integration request. Please try again."}),[3,5];case 4:return L.current=setTimeout(function(){V(!1),g(),U()},3e3),[7];case 5:return[2]}})})()},disabled:E,loading:S})]})]})]})})}e.s(["RequestNewConnectorModal",()=>f])}]);

//# debugId=a61b46fc-718f-fe80-9e09-ec56181b73ce
//# sourceMappingURL=6eb2958702fc5bf2.js.map